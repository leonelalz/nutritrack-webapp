import{a as pe}from"./chunk-D7VMDWC3.js";import{a as le,b as me}from"./chunk-JFIW5FLZ.js";import{a as ge}from"./chunk-SLRXGNQN.js";import"./chunk-C7M7CJCW.js";import{o as X}from"./chunk-I4C4K3VC.js";import{A as Q,z as J}from"./chunk-6AXQUQX5.js";import{c as ee,g as te,j as ie,l as ae,p as ne,q as oe,r as re,w as de}from"./chunk-M75YHKAC.js";import{a as ce}from"./chunk-GZZKD4TH.js";import{a as se}from"./chunk-F5B3K5RO.js";import"./chunk-6ULEJF3H.js";import{d as q}from"./chunk-LBN5CU62.js";import"./chunk-NZVHEJ25.js";import{Bb as E,Db as x,Fb as l,Kc as Z,Na as s,Qb as z,Rb as w,Sb as W,Ta as R,Tb as r,Ub as h,Vb as g,Wb as B,Xb as k,Yb as I,Zb as T,_a as Y,_b as $,ac as K,ca as m,da as p,ic as D,na as _,nb as f,ob as b,rb as V,sb as j,tb as F,ub as a,vb as n,wb as N}from"./chunk-N5FZ7NRP.js";import{a as H,b as L}from"./chunk-2VMXMS7J.js";var _e=()=>["/metas/planes"],U=(c,t)=>t.id,fe=(c,t)=>t.fecha;function be(c,t){if(c&1&&(a(0,"span",32),r(1),n()),c&2){let e=l(2);s(),g("a las ",e.proximaComida().horaSugerida)}}function xe(c,t){if(c&1){let e=E();a(0,"div",27)(1,"div",28),r(2),n(),a(3,"div",29)(4,"span",30),r(5),n(),a(6,"span",31),r(7),f(8,be,2,1,"span",32),n()(),a(9,"button",33),x("click",function(){m(e);let i=l();return p(i.abrirDetalleComida(i.proximaComida()))}),r(10," Registrar "),n()()}if(c&2){let e,o=l();w("urgente",o.esHoraDeComida()),s(2),h(o.esHoraDeComida()?"\u{1F514}":"\u23F0"),s(3),g(" ",o.esHoraDeComida()?"\xA1Es hora de comer!":"Pr\xF3xima comida"," "),s(2),B(" ",o.proximaComida().tipoComida," - ",o.proximaComida().comidaNombre||((e=o.proximaComida().comida)==null?null:e.nombre)," "),s(),b(!o.esHoraDeComida()&&o.proximaComida().horaSugerida?8:-1)}}function he(c,t){if(c&1&&(a(0,"span",36),r(1),n()),c&2){let e=l(2);s(),h(e.planActivo().nombre)}}function Me(c,t){c&1&&(a(0,"div",41),N(1,"div",44),a(2,"p"),r(3,"Cargando comidas..."),n()())}function ve(c,t){c&1&&(a(0,"div",42)(1,"span",45),r(2,"\u{1F37D}\uFE0F"),n(),a(3,"p"),r(4,"No tienes comidas programadas"),n(),a(5,"button",46),r(6,"Activar un Plan"),n()()),c&2&&(s(5),F("routerLink",K(1,_e)))}function Pe(c,t){if(c&1&&(a(0,"span",55),r(1),n()),c&2){let e=l().$implicit;s(),h(e.horaSugerida)}}function Se(c,t){if(c&1&&(a(0,"span",63),r(1),n()),c&2){let e=l().$implicit;s(),g("",e.porciones," porciones")}}function Ee(c,t){if(c&1){let e=E();a(0,"div",48),x("click",function(){let i=m(e).$implicit,d=l(3);return p(d.abrirDetalleComida(i))}),a(1,"div",49),N(2,"span",50)(3,"span",51),n(),a(4,"div",52)(5,"div",53)(6,"div",54)(7,"span"),r(8),n(),f(9,Pe,2,1,"span",55),n(),a(10,"div",56),x("click",function(i){return m(e),p(i.stopPropagation())}),a(11,"mat-checkbox",57),T("ngModelChange",function(i){let d=m(e).$implicit;return I(d.completada,i)||(d.completada=i),p(i)}),x("change",function(){let i=m(e).$implicit,d=l(3);return p(d.marcarComidaCompletada(i))}),n()()(),a(12,"h4"),r(13),n(),a(14,"div",58)(15,"span",59),r(16),n(),a(17,"span",60),r(18),n(),a(19,"span",61),r(20),n(),a(21,"span",62),r(22),n()(),f(23,Se,2,1,"span",63),n(),a(24,"div",64)(25,"mat-icon"),r(26,"chevron_right"),n()()()}if(c&2){let e=t.$implicit,o=l(3);w("completada",e.completada)("proxima",o.esProximaComida(e)),s(2),w("done",e.completada),s(5),W($("type-badge tipo-",e.tipoComida==null?null:e.tipoComida.toLowerCase())),s(),g(" ",o.formatearTipoComida(e.tipoComida)," "),s(),b(e.horaSugerida?9:-1),s(2),k("ngModel",e.completada),s(2),h(e.comidaNombre||(e.comida==null?null:e.comida.nombre)||"Comida"),s(3),g("\u{1F525} ",e.calorias||(e.comida==null?null:e.comida.calorias)||0," kcal"),s(2),g("\u{1F969} ",e.proteinas||(e.comida==null?null:e.comida.proteinas)||0,"g"),s(2),g("\u{1F35E} ",e.carbohidratos||(e.comida==null?null:e.comida.carbohidratos)||0,"g"),s(2),g("\u{1F951} ",e.grasas||(e.comida==null?null:e.comida.grasas)||0,"g"),s(),b(e.porciones&&e.porciones!==1?23:-1)}}function Oe(c,t){if(c&1&&(a(0,"div",43),V(1,Ee,27,18,"div",47,U),n()),c&2){let e=l(2);s(),j(e.comidasProgramadas())}}function De(c,t){if(c&1){let e=E();a(0,"div",24)(1,"div",34)(2,"div",35)(3,"h2"),r(4,"\u{1F3AF} Comidas del D\xEDa"),n(),f(5,he,2,1,"span",36),n(),a(6,"div",37)(7,"span",38),r(8),n(),a(9,"button",39),x("click",function(){m(e);let i=l();return p(i.abrirModalComidaExtra())}),a(10,"mat-icon"),r(11,"add"),n(),r(12," Agregar Extra "),n()()(),a(13,"div",40),f(14,Me,4,0,"div",41)(15,ve,7,2,"div",42)(16,Oe,3,0,"div",43),n()()}if(c&2){let e=l();s(5),b(e.planActivo()?5:-1),s(3),B("",e.comidasRegistradas(),"/",e.comidasProgramadas().length),s(6),b(e.cargando()?14:e.comidasProgramadas().length===0?15:16)}}function ye(c,t){if(c&1&&(a(0,"span",77),r(1),n()),c&2){let e=l().$implicit;s(),g("D\xEDa ",e.numeroDiaPlan)}}function we(c,t){if(c&1&&N(0,"span",85),c&2){let e=t.$implicit,o=l(4);W("tipo-"+(e.tipoComida==null?null:e.tipoComida.toLowerCase())),w("completada",e.completada),F("title",o.formatearTipoComida(e.tipoComida))}}function ke(c,t){if(c&1&&(a(0,"span",84),r(1),n()),c&2){let e=l(2).$implicit;s(),g("+",e.comidas.length-4)}}function Ie(c,t){if(c&1&&(a(0,"div",79),V(1,we,1,5,"span",83,U),f(3,ke,2,1,"span",84),n()),c&2){let e=l().$implicit;s(),j(e.comidas.slice(0,4)),s(2),b(e.comidas.length>4?3:-1)}}function Te(c,t){c&1&&(a(0,"span",80),r(1,"Sin comidas"),n())}function Ne(c,t){if(c&1&&(a(0,"span",82),r(1),n()),c&2){let e=l().$implicit,o=l(2);s(),g("",o.calcularCaloriasDia(e)," kcal")}}function Ae(c,t){if(c&1){let e=E();a(0,"div",73),x("click",function(){let i=m(e).$implicit,d=l(2);return p(d.seleccionarDia(i))}),a(1,"div",74)(2,"span",75),r(3),n(),a(4,"span",76),r(5),n(),f(6,ye,2,1,"span",77),n(),a(7,"div",78),f(8,Ie,4,1,"div",79)(9,Te,2,0,"span",80),a(10,"div",81),f(11,Ne,2,1,"span",82),n()()()}if(c&2){let e,o,i=t.$implicit,d=l(2);w("hoy",i.esHoy)("seleccionado",i.fecha===d.fechaSeleccionada())("fuera-plan",i.numeroDiaPlan<=0||i.numeroDiaPlan>(((e=d.planInfo())==null?null:e.diasTotales)||999)),s(3),h(i.nombreCorto),s(2),h(i.numero),s(),b(i.numeroDiaPlan>0&&i.numeroDiaPlan<=(((o=d.planInfo())==null?null:o.diasTotales)||999)?6:-1),s(2),b(i.comidas.length>0?8:i.numeroDiaPlan>0?9:-1),s(3),b(i.comidas.length>0?11:-1)}}function Ve(c,t){c&1&&(a(0,"mat-icon",89),r(1,"check_circle"),n())}function je(c,t){if(c&1){let e=E();a(0,"div",86),x("click",function(){let i=m(e).$implicit,d=l(2);return p(d.abrirDetalleComida(i))}),a(1,"span"),r(2),n(),a(3,"span",87),r(4),n(),a(5,"span",88),r(6),n(),f(7,Ve,2,0,"mat-icon",89),n()}if(c&2){let e=t.$implicit,o=l(2);w("completada",e.completada),s(),W($("tipo-mini tipo-",e.tipoComida==null?null:e.tipoComida.toLowerCase())),s(),g(" ",o.formatearTipoComida(e.tipoComida).substring(0,3)," "),s(2),h(e.comidaNombre||(e.comida==null?null:e.comida.nombre)),s(2),g("",e.calorias||(e.comida==null?null:e.comida.calorias)||0," kcal"),s(),b(e.completada?7:-1)}}function ze(c,t){c&1&&(a(0,"p",72),r(1,"No hay comidas programadas para este d\xEDa"),n())}function Fe(c,t){if(c&1){let e=E();a(0,"div",25)(1,"div",65)(2,"button",66),x("click",function(){m(e);let i=l();return p(i.semanaAnterior())}),a(3,"mat-icon"),r(4,"chevron_left"),n()(),a(5,"h3"),r(6),n(),a(7,"button",66),x("click",function(){m(e);let i=l();return p(i.semanaSiguiente())}),a(8,"mat-icon"),r(9,"chevron_right"),n()()(),a(10,"div",67),V(11,Ae,12,11,"div",68,fe),n(),a(13,"div",69)(14,"h4"),r(15),n(),a(16,"div",70),V(17,je,8,9,"div",71,U,!1,ze,2,0,"p",72),n()()()}if(c&2){let e=l();s(6),h(e.mesActual()),s(5),j(e.diasSemana()),s(4),h(e.formatearFechaCompleta(e.fechaSeleccionada())),s(2),j(e.comidasDiaSeleccionado())}}function He(c,t){if(c&1&&(a(0,"div",103)(1,"h4"),r(2,"\u{1F4DD} Descripci\xF3n"),n(),a(3,"p"),r(4),n()()),c&2){let e,o=l(2);s(4),h(((e=o.comidaSeleccionada())==null||e.comida==null?null:e.comida.descripcion)||((e=o.comidaSeleccionada())==null?null:e.descripcion))}}function Le(c,t){if(c&1&&(a(0,"li")(1,"span",114),r(2),n(),a(3,"span",115),r(4),n()()),c&2){let e=t.$implicit;s(2),B("",e.cantidad," ",e.unidad),s(2),h(e.ingredienteNombre||e.nombre)}}function Re(c,t){if(c&1&&(a(0,"div",103)(1,"h4"),r(2,"\u{1F957} Ingredientes"),n(),a(3,"ul",113),V(4,Le,5,3,"li",null,U),n()()),c&2){let e,o=l(2);s(4),j((e=o.comidaSeleccionada())==null||e.comida==null?null:e.comida.ingredientes)}}function We(c,t){if(c&1&&(a(0,"div",103)(1,"h4"),r(2,"\u{1F468}\u200D\u{1F373} Preparaci\xF3n"),n(),a(3,"p",116),r(4),n()()),c&2){let e,o=l(2);s(4),h((e=o.comidaSeleccionada())==null||e.comida==null?null:e.comida.instrucciones)}}function Be(c,t){if(c&1&&(a(0,"div",103)(1,"h4"),r(2,"\u{1F4CB} Notas"),n(),a(3,"p",117),r(4),n()()),c&2){let e,o=l(2);s(4),h((e=o.comidaSeleccionada())==null?null:e.notas)}}function Ue(c,t){if(c&1){let e=E();a(0,"button",118),x("click",function(){m(e);let i=l(2);return p(i.desmarcarComida())}),a(1,"mat-icon"),r(2,"undo"),n(),r(3," Desmarcar "),n()}}function Ge(c,t){if(c&1){let e=E();a(0,"button",119),x("click",function(){m(e);let i=l(2);return p(i.registrarComida())}),a(1,"mat-icon"),r(2,"check_circle"),n(),r(3," Registrar Comida "),n()}}function $e(c,t){if(c&1){let e=E();a(0,"div",26)(1,"div",90)(2,"div",91)(3,"div",35)(4,"span",92),r(5),n(),a(6,"h2"),r(7),n()(),a(8,"button",93),x("click",function(){m(e);let i=l();return p(i.cerrarModalDetalle())}),a(9,"mat-icon"),r(10,"close"),n()()(),a(11,"div",94)(12,"div",95)(13,"div",96)(14,"span",97),r(15,"\u{1F525}"),n(),a(16,"span",98),r(17),n(),a(18,"span",99),r(19,"Calor\xEDas"),n()(),a(20,"div",100)(21,"span",97),r(22,"\u{1F969}"),n(),a(23,"span",98),r(24),n(),a(25,"span",99),r(26,"Prote\xEDnas"),n()(),a(27,"div",101)(28,"span",97),r(29,"\u{1F35E}"),n(),a(30,"span",98),r(31),n(),a(32,"span",99),r(33,"Carbos"),n()(),a(34,"div",102)(35,"span",97),r(36,"\u{1F951}"),n(),a(37,"span",98),r(38),n(),a(39,"span",99),r(40,"Grasas"),n()()(),f(41,He,5,1,"div",103),f(42,Re,6,0,"div",103),f(43,We,5,1,"div",103),a(44,"div",104)(45,"h4"),r(46,"\u{1F37D}\uFE0F Porciones a Registrar"),n(),a(47,"div",105)(48,"button",106),x("click",function(){m(e);let i=l();return p(i.ajustarPorciones(-.5))}),a(49,"mat-icon"),r(50,"remove"),n()(),a(51,"span",107),r(52),n(),a(53,"button",108),x("click",function(){m(e);let i=l();return p(i.ajustarPorciones(.5))}),a(54,"mat-icon"),r(55,"add"),n()()(),a(56,"div",109)(57,"span"),r(58),n()()(),f(59,Be,5,1,"div",103),n(),a(60,"div",110),f(61,Ue,4,0,"button",111)(62,Ge,4,0,"button",112),n()()()}if(c&2){let e,o,i,d,M,u,v,P,S,O,y,A,C=l();s(2),z("background",C.getColorTipoComida((e=C.comidaSeleccionada())==null?null:e.tipoComida)),s(3),h(C.formatearTipoComida((o=C.comidaSeleccionada())==null?null:o.tipoComida)),s(2),h(((i=C.comidaSeleccionada())==null?null:i.comidaNombre)||((i=C.comidaSeleccionada())==null||i.comida==null?null:i.comida.nombre)),s(10),h(((d=C.comidaSeleccionada())==null?null:d.calorias)||((d=C.comidaSeleccionada())==null||d.comida==null?null:d.comida.calorias)||0),s(7),g("",((M=C.comidaSeleccionada())==null?null:M.proteinas)||((M=C.comidaSeleccionada())==null||M.comida==null?null:M.comida.proteinas)||0,"g"),s(7),g("",((u=C.comidaSeleccionada())==null?null:u.carbohidratos)||((u=C.comidaSeleccionada())==null||u.comida==null?null:u.comida.carbohidratos)||0,"g"),s(7),g("",((v=C.comidaSeleccionada())==null?null:v.grasas)||((v=C.comidaSeleccionada())==null||v.comida==null?null:v.comida.grasas)||0,"g"),s(3),b(!((P=C.comidaSeleccionada())==null||P.comida==null)&&P.comida.descripcion||(P=C.comidaSeleccionada())!=null&&P.descripcion?41:-1),s(),b(((S=C.comidaSeleccionada())==null||S.comida==null||S.comida.ingredientes==null?null:S.comida.ingredientes.length)>0?42:-1),s(),b(!((O=C.comidaSeleccionada())==null||O.comida==null)&&O.comida.instrucciones?43:-1),s(5),F("disabled",C.porcionesRegistrar()<=.5),s(4),h(C.porcionesRegistrar()),s(6),g("Total: ",C.caloriasAjustadas()," kcal"),s(),b((y=C.comidaSeleccionada())!=null&&y.notas?59:-1),s(2),b((A=C.comidaSeleccionada())!=null&&A.completada?61:62)}}function Ye(c,t){if(c&1){let e=E();a(0,"div",26)(1,"div",120)(2,"div",121)(3,"h2"),r(4,"\u2795 Agregar Comida Extra"),n(),a(5,"button",93),x("click",function(){m(e);let i=l();return p(i.cerrarModalExtra())}),a(6,"mat-icon"),r(7,"close"),n()()(),a(8,"div",94)(9,"div",122)(10,"label"),r(11,"Tipo de Comida"),n(),a(12,"select",123),T("ngModelChange",function(i){m(e);let d=l();return I(d.comidaExtra.tipoComida,i)||(d.comidaExtra.tipoComida=i),p(i)}),a(13,"option",124),r(14,"Desayuno"),n(),a(15,"option",125),r(16,"Almuerzo"),n(),a(17,"option",126),r(18,"Cena"),n(),a(19,"option",127),r(20,"Snack"),n(),a(21,"option",128),r(22,"Merienda"),n()()(),a(23,"div",122)(24,"label"),r(25,"Nombre de la Comida"),n(),a(26,"input",129),T("ngModelChange",function(i){m(e);let d=l();return I(d.comidaExtra.nombre,i)||(d.comidaExtra.nombre=i),p(i)}),n()(),a(27,"div",130)(28,"div",122)(29,"label"),r(30,"Calor\xEDas"),n(),a(31,"input",131),T("ngModelChange",function(i){m(e);let d=l();return I(d.comidaExtra.calorias,i)||(d.comidaExtra.calorias=i),p(i)}),n()(),a(32,"div",122)(33,"label"),r(34,"Prote\xEDnas (g)"),n(),a(35,"input",131),T("ngModelChange",function(i){m(e);let d=l();return I(d.comidaExtra.proteinas,i)||(d.comidaExtra.proteinas=i),p(i)}),n()()(),a(36,"div",130)(37,"div",122)(38,"label"),r(39,"Carbohidratos (g)"),n(),a(40,"input",131),T("ngModelChange",function(i){m(e);let d=l();return I(d.comidaExtra.carbohidratos,i)||(d.comidaExtra.carbohidratos=i),p(i)}),n()(),a(41,"div",122)(42,"label"),r(43,"Grasas (g)"),n(),a(44,"input",131),T("ngModelChange",function(i){m(e);let d=l();return I(d.comidaExtra.grasas,i)||(d.comidaExtra.grasas=i),p(i)}),n()()(),a(45,"div",122)(46,"label"),r(47,"Notas (opcional)"),n(),a(48,"textarea",132),T("ngModelChange",function(i){m(e);let d=l();return I(d.comidaExtra.notas,i)||(d.comidaExtra.notas=i),p(i)}),n()()(),a(49,"div",110)(50,"button",133),x("click",function(){m(e);let i=l();return p(i.cerrarModalExtra())}),r(51,"Cancelar"),n(),a(52,"button",134),x("click",function(){m(e);let i=l();return p(i.guardarComidaExtra())}),a(53,"mat-icon"),r(54,"save"),n(),r(55," Guardar "),n()()()()}if(c&2){let e=l();s(12),k("ngModel",e.comidaExtra.tipoComida),s(14),k("ngModel",e.comidaExtra.nombre),s(5),k("ngModel",e.comidaExtra.calorias),s(4),k("ngModel",e.comidaExtra.proteinas),s(5),k("ngModel",e.comidaExtra.carbohidratos),s(4),k("ngModel",e.comidaExtra.grasas),s(4),k("ngModel",e.comidaExtra.notas),s(4),F("disabled",!e.comidaExtra.nombre)}}var ue=class c{constructor(t,e,o){this.metasService=t;this.notificationService=e;this.mockData=o;this.comidasProgramadas=this.mockData.comidasProgramadas,this.planActivo=D(()=>this.mockData.planActivo())}fechaHoy=new Date().toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"});vistaActual=_("lista");cargando=_(!1);caloriasHoy=_(0);caloriasMeta=_(2200);comidasRegistradas=_(0);proteinasHoy=_(0);proteinasMeta=_(150);carbohidratosHoy=_(0);carbohidratosMeta=_(250);grasasHoy=_(0);grasasMeta=_(70);progresoCaloriasPct=D(()=>Math.min(this.caloriasHoy()/this.caloriasMeta()*100,100));progresoProteinasPct=D(()=>Math.min(this.proteinasHoy()/this.proteinasMeta()*100,100));progresoCarbohidratosPct=D(()=>Math.min(this.carbohidratosHoy()/this.carbohidratosMeta()*100,100));progresoGrasasPct=D(()=>Math.min(this.grasasHoy()/this.grasasMeta()*100,100));comidasProgramadas=_([]);fechaSeleccionada=_(new Date().toISOString().split("T")[0]);semanaOffset=_(0);diasSemana=_([]);planInfo=_(null);todasLasComidas=_([]);modalDetalleAbierto=_(!1);comidaSeleccionada=_(null);porcionesRegistrar=_(1);modalExtraAbierto=_(!1);comidaExtra={tipoComida:"SNACK",nombre:"",calorias:0,proteinas:0,carbohidratos:0,grasas:0,notas:""};planActivo;caloriasAjustadas=D(()=>{let t=this.comidaSeleccionada();if(!t)return 0;let e=t.calorias||t.comida?.calorias||0;return Math.round(e*this.porcionesRegistrar())});proximaComida=D(()=>{let t=new Date,e=t.getHours()*60+t.getMinutes(),o=this.comidasProgramadas().filter(i=>!i.completada).sort((i,d)=>{let M=this.horaAMinutos(i.horaSugerida),u=this.horaAMinutos(d.horaSugerida);return M-u});for(let i of o)if(this.horaAMinutos(i.horaSugerida)>=e-30)return i;return o[0]||null});comidasDiaSeleccionado=D(()=>{let t=this.fechaSeleccionada(),e=new Date().toISOString().split("T")[0],o=this.planInfo(),i=this.todasLasComidas();if(t===e)return this.comidasProgramadas();if(o?.fechaInicio&&i.length>0){let d=new Date(o.fechaInicio),u=new Date(t+"T12:00:00").getTime()-d.getTime(),P=Math.floor(u/(1e3*60*60*24))+1;if(P>0&&P<=(o.diasTotales||999)){let S=i.filter(O=>O.numeroDia===P);return t<e?S.map(O=>L(H({},O),{completada:!0})):S}}return[]});mesActual=D(()=>{let t=new Date;return t.setDate(t.getDate()+this.semanaOffset()*7),t.toLocaleDateString("es-ES",{month:"long",year:"numeric"})});ngOnInit(){this.cargarComidasProgramadas(),this.cargarPlanActivo(),this.generarDiasSemana()}cambiarVista(t){this.vistaActual.set(t),t==="calendario"&&this.cargarTodasLasComidasDelPlan()}cargarTodasLasComidasDelPlan(){this.metasService.obtenerCalendarioSemanal().subscribe({next:t=>{console.log("\u{1F4E5} [MisComidas] Calendario semanal:",t);let e=t.data||t;if(e&&e.dias){let o=e.dias,i=[];Array.isArray(o)&&o.forEach(d=>{(d.comidas||[]).forEach(u=>{i.push(L(H({},u),{numeroDia:d.diaPlan||d.numeroDia,fecha:d.fecha,completada:u.registrada||!1,registroId:u.registroId,comidaNombre:u.nombre||u.comidaNombre,calorias:u.calorias||0}))})}),console.log("\u{1F4E5} [MisComidas] Comidas del calendario:",i),this.todasLasComidas.set(i),this.planInfo.set({planId:e.planId||this.planActivo()?.planId,fechaInicio:e.fechaInicio,fechaFin:e.fechaFin,diasTotales:e.duracionPlanDias||7,planNombre:e.nombrePlan||this.planActivo()?.nombre||"Plan Nutricional"}),this.generarDiasSemana()}else console.log("\u26A0\uFE0F [MisComidas] Respuesta de calendario sin d\xEDas, usando fallback"),this.cargarCalendarioFallback()},error:t=>{console.log("\u26A0\uFE0F [MisComidas] Error cargando calendario semanal:",t),this.cargarCalendarioFallback()}})}cargarCalendarioFallback(){this.metasService.obtenerTodasLasComidasDelPlan().subscribe({next:t=>{console.log("\u{1F4E5} [MisComidas] Fallback - Comidas del plan:",t);let e=t.data||t;if(e&&(e.comidas||Array.isArray(e))){let o=e.comidas||e;this.todasLasComidas.set(o),e.planInfo&&this.planInfo.set(e.planInfo),this.generarDiasSemana()}else this.usarComidasMockParaCalendario()},error:()=>{this.usarComidasMockParaCalendario()}})}usarComidasMockParaCalendario(){let t=this.comidasProgramadas(),e=7,o=[];for(let i=1;i<=e;i++)t.forEach(d=>{o.push(L(H({},d),{id:d.id*100+i,numeroDia:i,completada:!1}))});this.todasLasComidas.set(o),this.planInfo.set({planId:1,fechaInicio:new Date().toISOString().split("T")[0],diasTotales:e,planNombre:"Plan de Ejemplo"}),this.generarDiasSemana()}generarDiasSemana(){let t=new Date,e=new Date(t);e.setDate(t.getDate()-t.getDay()+1+this.semanaOffset()*7);let o=[],i=["Lun","Mar","Mi\xE9","Jue","Vie","S\xE1b","Dom"],d=this.planInfo(),M=this.todasLasComidas(),u=d?.fechaInicio?new Date(d.fechaInicio):null;for(let v=0;v<7;v++){let P=new Date(e);P.setDate(e.getDate()+v);let S=P.toISOString().split("T")[0],O=S===t.toISOString().split("T")[0],y=[];if(y=M.filter(A=>A.fecha===S),y.length===0&&u&&M.length>0){let A=P.getTime()-u.getTime(),G=Math.floor(A/(1e3*60*60*24))+1;G>0&&G<=(d?.diasTotales||999)&&(y=M.filter(Ce=>Ce.numeroDia===G))}y.length===0&&O&&(y=this.comidasProgramadas()),o.push({fecha:S,numero:P.getDate(),nombreCorto:i[v],esHoy:O,comidas:y,numeroDiaPlan:this.calcularNumeroDiaPlan(P)})}this.diasSemana.set(o)}calcularNumeroDiaPlan(t){let e=this.planInfo();if(!e?.fechaInicio)return 0;let o=new Date(e.fechaInicio),i=t.getTime()-o.getTime();return Math.floor(i/(1e3*60*60*24))+1}semanaAnterior(){this.semanaOffset.update(t=>t-1),this.generarDiasSemana()}semanaSiguiente(){this.semanaOffset.update(t=>t+1),this.generarDiasSemana()}seleccionarDia(t){this.fechaSeleccionada.set(t.fecha)}calcularCaloriasDia(t){return t.comidas.filter(e=>e.completada).reduce((e,o)=>e+(o.calorias||o.comida?.calorias||0),0)}formatearFechaCompleta(t){return new Date(t+"T12:00:00").toLocaleDateString("es-ES",{weekday:"long",day:"numeric",month:"long"})}esHoraDeComida(){let t=this.proximaComida();if(!t?.horaSugerida)return!1;let e=new Date,o=e.getHours()*60+e.getMinutes(),i=this.horaAMinutos(t.horaSugerida);return Math.abs(o-i)<=15}esProximaComida(t){let e=this.proximaComida();return e&&e.id===t.id}horaAMinutos(t){if(!t)return 0;let[e,o]=t.split(":").map(Number);return e*60+(o||0)}abrirDetalleComida(t){this.comidaSeleccionada.set(t),this.porcionesRegistrar.set(t.porciones||1),this.modalDetalleAbierto.set(!0)}cerrarModalDetalle(){this.modalDetalleAbierto.set(!1),this.comidaSeleccionada.set(null)}ajustarPorciones(t){this.porcionesRegistrar.update(e=>Math.max(.5,e+t))}getColorTipoComida(t){return{DESAYUNO:"linear-gradient(135deg, #f6ad55, #ed8936)",ALMUERZO:"linear-gradient(135deg, #63b3ed, #3182ce)",CENA:"linear-gradient(135deg, #b794f4, #805ad5)",SNACK:"linear-gradient(135deg, #fbd38d, #f6ad55)",MERIENDA:"linear-gradient(135deg, #fc8181, #e53e3e)",COLACION:"linear-gradient(135deg, #68d391, #38a169)"}[t]||"linear-gradient(135deg, #48bb78, #38a169)"}registrarComida(){let t=this.comidaSeleccionada();t&&(t.completada=!0,t.porciones=this.porcionesRegistrar(),this.marcarComidaCompletada(t),this.cerrarModalDetalle())}desmarcarComida(){let t=this.comidaSeleccionada();t&&(t.completada=!1,this.marcarComidaCompletada(t),this.cerrarModalDetalle())}abrirModalComidaExtra(){this.comidaExtra={tipoComida:"SNACK",nombre:"",calorias:0,proteinas:0,carbohidratos:0,grasas:0,notas:""},this.modalExtraAbierto.set(!0)}cerrarModalExtra(){this.modalExtraAbierto.set(!1)}guardarComidaExtra(){let t=new Date().toTimeString().split(" ")[0].substring(0,5)+":00",e={nombreComida:this.comidaExtra.nombre,tipoComidaNombre:this.comidaExtra.tipoComida,calorias:this.comidaExtra.calorias||0,proteinas:this.comidaExtra.proteinas||0,carbohidratos:this.comidaExtra.carbohidratos||0,grasas:this.comidaExtra.grasas||0,notas:this.comidaExtra.notas,fecha:new Date().toISOString().split("T")[0],hora:t,porciones:1};console.log("\u{1F4E4} [MisComidas] Registrando comida extra:",e),this.metasService.registrarComidaExtra(e).subscribe({next:o=>{console.log("\u2705 [MisComidas] Comida extra registrada:",o);let i=o.data||o,d={id:i.id||i.comidaId||Date.now(),comidaId:i.comidaId,registroId:i.id,tipoComida:this.comidaExtra.tipoComida,comidaNombre:this.comidaExtra.nombre,calorias:e.calorias,proteinas:e.proteinas,carbohidratos:e.carbohidratos,grasas:e.grasas,notas:e.notas,completada:!0,esExtra:!0,porciones:1},M=[...this.comidasProgramadas(),d];this.mockData.comidasProgramadas.set(M),this.actualizarEstadisticas(),this.notificationService.showSuccess(`\u2713 ${d.comidaNombre} agregada`),this.cerrarModalExtra()},error:o=>{console.error("\u274C [MisComidas] Error registrando comida extra:",o);let i={id:Date.now(),tipoComida:this.comidaExtra.tipoComida,comidaNombre:this.comidaExtra.nombre,calorias:e.calorias,proteinas:e.proteinas,carbohidratos:e.carbohidratos,grasas:e.grasas,notas:e.notas,completada:!0,esExtra:!0,porciones:1},d=[...this.comidasProgramadas(),i];this.mockData.comidasProgramadas.set(d),this.actualizarEstadisticas(),this.notificationService.showSuccess(`\u2713 ${i.comidaNombre} agregada (local)`),this.cerrarModalExtra()}})}cargarComidasProgramadas(){this.cargando.set(!0),this.metasService.obtenerPlanHoyConEstado().subscribe({next:t=>{console.log("\u{1F4E5} [MisComidas] Plan hoy con estado y macros:",t);let e=t.data||t;if(e&&(e.comidas||e.nombrePlan)){e.nombrePlan&&this.mockData.planActivo.set({id:e.usuarioPlanId||this.planActivo()?.id,nombre:e.nombrePlan,diaActual:e.diaActual,diaPlan:e.diaPlan,duracionDias:e.duracionDias}),e.caloriasObjetivo&&this.caloriasMeta.set(e.caloriasObjetivo),e.proteinasObjetivo&&this.proteinasMeta.set(e.proteinasObjetivo),e.carbohidratosObjetivo&&this.carbohidratosMeta.set(e.carbohidratosObjetivo),e.grasasObjetivo&&this.grasasMeta.set(e.grasasObjetivo),e.caloriasConsumidas!==void 0&&this.caloriasHoy.set(e.caloriasConsumidas),e.proteinasConsumidas!==void 0&&this.proteinasHoy.set(e.proteinasConsumidas),e.carbohidratosConsumidos!==void 0&&this.carbohidratosHoy.set(e.carbohidratosConsumidos),e.carbohidratosConsumidas!==void 0&&this.carbohidratosHoy.set(e.carbohidratosConsumidas),e.grasasConsumidas!==void 0&&this.grasasHoy.set(e.grasasConsumidas);let i=(e.comidas||[]).map(d=>({id:d.comidaId||d.id,comidaId:d.comidaId||d.id,comidaNombre:d.nombre||d.comidaNombre,tipoComida:d.tipoComida,tipoComidaId:d.tipoComidaId,calorias:d.calorias||0,proteinas:d.proteinas||0,carbohidratos:d.carbohidratos||0,grasas:d.grasas||0,descripcion:d.descripcion,tiempoPreparacionMinutos:d.tiempoPreparacionMinutos,completada:d.registrada||!1,registroId:d.registroId||null,porciones:d.porciones||1,notas:d.notas,comida:{id:d.comidaId||d.id,nombre:d.nombre||d.comidaNombre,tipoComida:d.tipoComida,descripcion:d.descripcion,instrucciones:d.instrucciones,ingredientes:d.ingredientes||[],calorias:d.calorias||0,proteinas:d.proteinas||0,carbohidratos:d.carbohidratos||0,grasas:d.grasas||0},ingredientes:d.ingredientes||[]}));console.log("\u{1F4E5} [MisComidas] Comidas mapeadas:",i),this.mockData.comidasProgramadas.set(i),this.actualizarEstadisticas()}else console.warn("\u26A0\uFE0F [MisComidas] No hay comidas en el plan de hoy"),this.mockData.comidasProgramadas.set([]);this.cargando.set(!1)},error:t=>{console.error("\u274C [MisComidas] Error cargando comidas:",t),this.notificationService.showError("Error al cargar comidas del plan"),this.cargando.set(!1)}})}cargarPlanActivo(){this.metasService.obtenerPlanesActivos().subscribe({next:t=>{if(t.success&&t.data&&t.data.length>0){let e=t.data[0],o=e.plan?.objetivo||e.objetivo,i={id:e.id,planId:e.plan?.id||e.planId,nombre:e.planNombre||e.plan?.nombre||"Plan Nutricional",descripcion:e.planDescripcion||e.plan?.descripcion||"",fechaInicio:e.fechaInicio,diasTotales:e.planDuracionDias||e.plan?.duracionDias||e.diasTotales||7,caloriasObjetivo:o?.caloriasObjetivo||e.caloriasObjetivo||2200,proteinasObjetivo:o?.proteinasObjetivo||e.proteinasObjetivo||150,carbohidratosObjetivo:o?.carbohidratosObjetivo||e.carbohidratosObjetivo||250,grasasObjetivo:o?.grasasObjetivo||e.grasasObjetivo||70};console.log("\u{1F4CB} [MisComidas] Plan activo cargado:",i),this.mockData.planActivo.set(i),this.planInfo.set(i),i.caloriasObjetivo&&this.caloriasMeta.set(i.caloriasObjetivo),i.proteinasObjetivo&&this.proteinasMeta.set(i.proteinasObjetivo),i.carbohidratosObjetivo&&this.carbohidratosMeta.set(i.carbohidratosObjetivo),i.grasasObjetivo&&this.grasasMeta.set(i.grasasObjetivo)}},error:t=>console.error("Error al cargar plan activo:",t)})}marcarComidaCompletada(t){let e=t.comida?.nombre||t.comidaNombre||t.nombre||"Comida";if(t.completada){this.mockData.marcarComidaCompletada(t.id);let o=new Date().toISOString().split("T")[0],i=new Date().toTimeString().split(" ")[0].substring(0,5)+":00",d={comidaId:t.comidaId||t.comida?.id||t.id,fecha:o,hora:i,porciones:t.porciones||1},M=this.planActivo()?.id||t.usuarioPlanId;M&&(d.usuarioPlanId=M),t.tipoComidaId?d.tipoComidaId=t.tipoComidaId:t.tipoComida&&(d.tipoComidaNombre=t.tipoComida),console.log("\u{1F4E4} [MisComidas] Registrando comida:",d),this.metasService.registrarComidaConsumida(d).subscribe({next:u=>{let v=u.data||u;v.id&&(t.registroId=v.id),console.log("\u2705 [MisComidas] Comida registrada:",v),this.notificationService.showSuccess(`\u2713 ${e} registrada`),this.actualizarEstadisticas()},error:u=>{console.error("\u274C [MisComidas] Error registrando comida:",u),this.notificationService.showSuccess(`\u2713 ${e} registrada (local)`),this.actualizarEstadisticas()}})}else t.registroId?(console.log("\u{1F4E4} [MisComidas] Eliminando registro:",t.registroId),this.metasService.eliminarRegistroComida(t.registroId).subscribe({next:()=>{t.registroId=null,this.mockData.desmarcarComidaCompletada?.(t.id),this.notificationService.showSuccess(`${e} desmarcada`),this.actualizarEstadisticas()},error:o=>{console.error("\u274C [MisComidas] Error desmarcando comida:",o),t.completada=!0,this.notificationService.showError("Error al desmarcar")}})):(this.mockData.desmarcarComidaCompletada?.(t.id),this.actualizarEstadisticas())}actualizarEstadisticas(){let e=this.comidasProgramadas().filter(o=>o.completada);this.comidasRegistradas.set(e.length),this.caloriasHoy.set(e.reduce((o,i)=>o+(i.calorias||i.comida?.calorias||0),0)),this.proteinasHoy.set(e.reduce((o,i)=>o+(i.proteinas||i.comida?.proteinas||0),0)),this.carbohidratosHoy.set(e.reduce((o,i)=>o+(i.carbohidratos||i.comida?.carbohidratos||0),0)),this.grasasHoy.set(e.reduce((o,i)=>o+(i.grasas||i.comida?.grasas||0),0))}formatearTipoComida(t){return{DESAYUNO:"Desayuno",ALMUERZO:"Almuerzo",CENA:"Cena",SNACK:"Snack",MERIENDA:"Merienda",COLACION:"Colaci\xF3n",PRE_ENTRENAMIENTO:"Pre-Entreno",POST_ENTRENAMIENTO:"Post-Entreno"}[t]||t||"Comida"}static \u0275fac=function(e){return new(e||c)(R(ce),R(se),R(ge))};static \u0275cmp=Y({type:c,selectors:[["app-mis-comidas"]],decls:75,vars:26,consts:[[1,"mis-comidas-container"],[1,"page-header"],[1,"header-left"],[1,"subtitle"],[1,"header-right"],[1,"view-toggle"],[3,"click"],[1,"stats-grid"],[1,"stat-card","calorias"],[1,"stat-header"],[1,"stat-icon"],[1,"stat-label"],[1,"stat-value"],[1,"stat-progress"],[1,"progress-bar"],[1,"progress-fill"],[1,"stat-meta"],[1,"stat-card","proteinas"],[1,"progress-bar","proteinas"],[1,"stat-card","carbos"],[1,"progress-bar","carbos"],[1,"stat-card","grasas"],[1,"progress-bar","grasas"],[1,"reminder-banner",3,"urgente"],[1,"content-card"],[1,"calendario-container"],[1,"modal-overlay"],[1,"reminder-banner"],[1,"reminder-icon"],[1,"reminder-info"],[1,"reminder-title"],[1,"reminder-detail"],[1,"hora"],[1,"btn-registrar",3,"click"],[1,"card-header"],[1,"header-info"],[1,"badge-success"],[1,"header-actions"],[1,"progress-text"],[1,"btn-add-extra",3,"click"],[1,"card-content"],[1,"loading-state"],[1,"empty-state"],[1,"meals-timeline"],[1,"spinner"],[1,"empty-icon"],[1,"btn-secondary",3,"routerLink"],[1,"meal-card",3,"completada","proxima"],[1,"meal-card",3,"click"],[1,"meal-time-indicator"],[1,"time-dot"],[1,"time-line"],[1,"meal-content"],[1,"meal-header"],[1,"meal-type-time"],[1,"time"],[1,"meal-checkbox",3,"click"],["color","primary",3,"ngModelChange","change","ngModel"],[1,"meal-macros"],[1,"macro","cal"],[1,"macro","prot"],[1,"macro","carb"],[1,"macro","fat"],[1,"porciones"],[1,"meal-action"],[1,"calendario-nav"],[1,"nav-btn",3,"click"],[1,"calendario-grid"],[1,"calendario-dia",3,"hoy","seleccionado","fuera-plan"],[1,"dia-detalle"],[1,"comidas-dia"],[1,"comida-mini-card",3,"completada"],[1,"sin-comidas"],[1,"calendario-dia",3,"click"],[1,"dia-header"],[1,"dia-nombre"],[1,"dia-numero"],[1,"dia-plan"],[1,"dia-indicadores"],[1,"comidas-mini"],[1,"sin-comidas-mini"],[1,"dia-stats"],[1,"dia-calorias"],[1,"mini-dot",3,"completada","class","title"],[1,"mini-more"],[1,"mini-dot",3,"title"],[1,"comida-mini-card",3,"click"],[1,"nombre-mini"],[1,"calorias-mini"],[1,"check-mini"],[1,"modal-detalle"],[1,"modal-header"],[1,"tipo-badge-large"],[1,"btn-close",3,"click"],[1,"modal-body"],[1,"macros-grid"],[1,"macro-card","calorias"],[1,"macro-icon"],[1,"macro-value"],[1,"macro-label"],[1,"macro-card","proteinas"],[1,"macro-card","carbos"],[1,"macro-card","grasas"],[1,"seccion"],[1,"seccion","porciones-section"],[1,"porciones-control"],[1,"btn-porcion",3,"click","disabled"],[1,"porciones-valor"],[1,"btn-porcion",3,"click"],[1,"calorias-ajustadas"],[1,"modal-footer"],[1,"btn-desmarcar"],[1,"btn-registrar-full"],[1,"ingredientes-list"],[1,"cantidad"],[1,"nombre"],[1,"instrucciones"],[1,"notas"],[1,"btn-desmarcar",3,"click"],[1,"btn-registrar-full",3,"click"],[1,"modal-extra"],[1,"modal-header","extra"],[1,"form-group"],[3,"ngModelChange","ngModel"],["value","DESAYUNO"],["value","ALMUERZO"],["value","CENA"],["value","SNACK"],["value","MERIENDA"],["type","text","placeholder","Ej: Ensalada C\xE9sar",3,"ngModelChange","ngModel"],[1,"form-row"],["type","number","placeholder","0",3,"ngModelChange","ngModel"],["rows","2","placeholder","Ej: En restaurante",3,"ngModelChange","ngModel"],[1,"btn-cancelar",3,"click"],[1,"btn-guardar",3,"click","disabled"]],template:function(e,o){e&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),r(4,"\u{1F37D}\uFE0F Mis Comidas"),n(),a(5,"p",3),r(6),n()(),a(7,"div",4)(8,"div",5)(9,"button",6),x("click",function(){return o.cambiarVista("lista")}),a(10,"mat-icon"),r(11,"list"),n(),r(12," Lista "),n(),a(13,"button",6),x("click",function(){return o.cambiarVista("calendario")}),a(14,"mat-icon"),r(15,"calendar_month"),n(),r(16," Calendario "),n()()()(),a(17,"div",7)(18,"div",8)(19,"div",9)(20,"span",10),r(21,"\u{1F525}"),n(),a(22,"span",11),r(23,"Calor\xEDas"),n()(),a(24,"div",12),r(25),n(),a(26,"div",13)(27,"div",14),N(28,"div",15),n(),a(29,"span",16),r(30),n()()(),a(31,"div",17)(32,"div",9)(33,"span",10),r(34,"\u{1F969}"),n(),a(35,"span",11),r(36,"Prote\xEDnas"),n()(),a(37,"div",12),r(38),n(),a(39,"div",13)(40,"div",18),N(41,"div",15),n(),a(42,"span",16),r(43),n()()(),a(44,"div",19)(45,"div",9)(46,"span",10),r(47,"\u{1F35E}"),n(),a(48,"span",11),r(49,"Carbohidratos"),n()(),a(50,"div",12),r(51),n(),a(52,"div",13)(53,"div",20),N(54,"div",15),n(),a(55,"span",16),r(56),n()()(),a(57,"div",21)(58,"div",9)(59,"span",10),r(60,"\u{1F951}"),n(),a(61,"span",11),r(62,"Grasas"),n()(),a(63,"div",12),r(64),n(),a(65,"div",13)(66,"div",22),N(67,"div",15),n(),a(68,"span",16),r(69),n()()()(),f(70,xe,11,7,"div",23),f(71,De,17,4,"div",24),f(72,Fe,20,3,"div",25),n(),f(73,$e,63,16,"div",26),f(74,Ye,56,8,"div",26)),e&2&&(s(6),h(o.fechaHoy),s(3),w("active",o.vistaActual()==="lista"),s(4),w("active",o.vistaActual()==="calendario"),s(12),h(o.caloriasHoy()),s(3),z("width",o.progresoCaloriasPct(),"%"),s(2),g("de ",o.caloriasMeta()," kcal"),s(8),g("",o.proteinasHoy(),"g"),s(3),z("width",o.progresoProteinasPct(),"%"),s(2),g("de ",o.proteinasMeta(),"g"),s(8),g("",o.carbohidratosHoy(),"g"),s(3),z("width",o.progresoCarbohidratosPct(),"%"),s(2),g("de ",o.carbohidratosMeta(),"g"),s(8),g("",o.grasasHoy(),"g"),s(3),z("width",o.progresoGrasasPct(),"%"),s(2),g("de ",o.grasasMeta(),"g"),s(),b(o.proximaComida()?70:-1),s(),b(o.vistaActual()==="lista"?71:-1),s(),b(o.vistaActual()==="calendario"?72:-1),s(),b(o.modalDetalleAbierto()?73:-1),s(),b(o.modalExtraAbierto()?74:-1))},dependencies:[Z,q,Q,J,X,me,le,pe,de,oe,re,ee,ae,ne,te,ie],styles:[".mis-comidas-container[_ngcontent-%COMP%]{padding:1.5rem;max-width:1400px;margin:0 auto}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;flex-wrap:wrap;gap:1rem}.header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.75rem;color:#2d3748}.header-left[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{margin:.25rem 0 0;color:#718096;font-size:.95rem}.view-toggle[_ngcontent-%COMP%]{display:flex;background:#e2e8f0;border-radius:8px;padding:4px}.view-toggle[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.5rem 1rem;border:none;background:transparent;border-radius:6px;cursor:pointer;font-weight:500;color:#718096;transition:all .2s}.view-toggle[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#fff;color:#48bb78;box-shadow:0 2px 4px #0000001a}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:1rem;margin-bottom:1.5rem}.stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:1rem;box-shadow:0 2px 8px #00000014}.stat-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-bottom:.5rem}.stat-icon[_ngcontent-%COMP%]{font-size:1.25rem}.stat-label[_ngcontent-%COMP%]{color:#718096;font-size:.85rem;font-weight:500}.stat-value[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;color:#2d3748}.stat-progress[_ngcontent-%COMP%]{margin-top:.5rem}.progress-bar[_ngcontent-%COMP%]{height:6px;background:#e2e8f0;border-radius:3px;overflow:hidden;margin-bottom:.25rem}.progress-fill[_ngcontent-%COMP%]{height:100%;border-radius:3px;transition:width .3s}.stat-card.calorias[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]{background:linear-gradient(90deg,#f6ad55,#ed8936)}.stat-card.proteinas[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]{background:linear-gradient(90deg,#fc8181,#e53e3e)}.stat-card.carbos[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]{background:linear-gradient(90deg,#63b3ed,#3182ce)}.stat-card.grasas[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]{background:linear-gradient(90deg,#68d391,#38a169)}.stat-meta[_ngcontent-%COMP%]{font-size:.75rem;color:#a0aec0}.reminder-banner[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1rem 1.5rem;background:linear-gradient(135deg,#ebf8ff,#e6fffa);border-radius:12px;margin-bottom:1.5rem;border:1px solid #bee3f8}.reminder-banner.urgente[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fef3c7,#fde68a);border-color:#fbbf24;animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.8}}.reminder-icon[_ngcontent-%COMP%]{font-size:2rem}.reminder-info[_ngcontent-%COMP%]{flex:1}.reminder-title[_ngcontent-%COMP%]{font-weight:600;color:#2d3748;display:block}.reminder-detail[_ngcontent-%COMP%]{color:#718096;font-size:.9rem}.reminder-detail[_ngcontent-%COMP%]   .hora[_ngcontent-%COMP%]{color:#48bb78;font-weight:600}.btn-registrar[_ngcontent-%COMP%]{padding:.5rem 1.25rem;background:#48bb78;color:#fff;border:none;border-radius:8px;font-weight:600;cursor:pointer;transition:all .2s}.btn-registrar[_ngcontent-%COMP%]:hover{background:#38a169;transform:scale(1.02)}.content-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;box-shadow:0 4px 12px #00000014;overflow:hidden}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.25rem 1.5rem;border-bottom:1px solid #e2e8f0}.header-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.header-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;color:#2d3748}.badge-success[_ngcontent-%COMP%]{padding:.25rem .75rem;background:#c6f6d5;color:#22543d;border-radius:20px;font-size:.75rem;font-weight:600}.header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.progress-text[_ngcontent-%COMP%]{color:#718096;font-weight:600}.btn-add-extra[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.5rem 1rem;background:#edf2f7;color:#4a5568;border:none;border-radius:8px;font-weight:600;cursor:pointer;transition:all .2s}.btn-add-extra[_ngcontent-%COMP%]:hover{background:#e2e8f0}.card-content[_ngcontent-%COMP%]{padding:1.5rem}.meals-timeline[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.meal-card[_ngcontent-%COMP%]{display:flex;align-items:stretch;background:#f7fafc;border-radius:12px;overflow:hidden;cursor:pointer;transition:all .2s;border:2px solid transparent}.meal-card[_ngcontent-%COMP%]:hover{transform:translate(4px);box-shadow:0 4px 12px #0000001a}.meal-card.proxima[_ngcontent-%COMP%]{border-color:#48bb78;background:#f0fff4}.meal-card.completada[_ngcontent-%COMP%]{opacity:.7}.meal-card.completada[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{text-decoration:line-through}.meal-time-indicator[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:1rem .75rem;background:#48bb781a}.time-dot[_ngcontent-%COMP%]{width:12px;height:12px;border-radius:50%;background:#e2e8f0;border:2px solid #a0aec0}.time-dot.done[_ngcontent-%COMP%]{background:#48bb78;border-color:#48bb78}.time-line[_ngcontent-%COMP%]{flex:1;width:2px;background:#e2e8f0;margin-top:4px}.meal-content[_ngcontent-%COMP%]{flex:1;padding:1rem}.meal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem}.meal-type-time[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.type-badge[_ngcontent-%COMP%]{padding:.25rem .75rem;border-radius:20px;font-size:.75rem;font-weight:600}.tipo-desayuno[_ngcontent-%COMP%]{background:#fef5e7;color:#d68910}.tipo-almuerzo[_ngcontent-%COMP%]{background:#ebf5fb;color:#2e86de}.tipo-cena[_ngcontent-%COMP%]{background:#f4ecf7;color:#8e44ad}.tipo-snack[_ngcontent-%COMP%]{background:#fef9e7;color:#f39c12}.tipo-merienda[_ngcontent-%COMP%]{background:#fdecea;color:#e74c3c}.tipo-colacion[_ngcontent-%COMP%]{background:#e8f8f5;color:#16a085}.time[_ngcontent-%COMP%]{color:#718096;font-size:.85rem}.meal-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 .5rem;color:#2d3748;font-size:1.1rem}.meal-macros[_ngcontent-%COMP%]{display:flex;gap:.75rem;flex-wrap:wrap}.macro[_ngcontent-%COMP%]{font-size:.8rem;color:#718096}.porciones[_ngcontent-%COMP%]{margin-top:.5rem;font-size:.8rem;color:#a0aec0}.meal-action[_ngcontent-%COMP%]{display:flex;align-items:center;padding:0 .75rem;color:#a0aec0}.calendario-container[_ngcontent-%COMP%]{background:#fff;border-radius:16px;box-shadow:0 4px 12px #00000014;overflow:hidden}.calendario-nav[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem 1.5rem;background:linear-gradient(135deg,#48bb78,#38a169);color:#fff}.calendario-nav[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.25rem}.nav-btn[_ngcontent-%COMP%]{background:#fff3;border:none;border-radius:50%;width:36px;height:36px;display:flex;align-items:center;justify-content:center;cursor:pointer;color:#fff;transition:background .2s}.nav-btn[_ngcontent-%COMP%]:hover{background:#ffffff4d}.calendario-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);gap:8px;padding:1rem}.calendario-dia[_ngcontent-%COMP%]{background:#f7fafc;border-radius:10px;padding:.75rem;text-align:center;cursor:pointer;transition:all .2s;min-height:100px}.calendario-dia[_ngcontent-%COMP%]:hover{background:#edf2f7}.calendario-dia.fuera-plan[_ngcontent-%COMP%]{opacity:.5;background:#f0f0f0}.calendario-dia.hoy[_ngcontent-%COMP%]{border:2px solid #48bb78;background:#f0fff4}.calendario-dia.seleccionado[_ngcontent-%COMP%]{background:#c6f6d5}.dia-header[_ngcontent-%COMP%]{margin-bottom:.5rem}.dia-nombre[_ngcontent-%COMP%]{display:block;font-size:.7rem;color:#a0aec0;text-transform:uppercase}.dia-numero[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:#2d3748;display:block}.dia-plan[_ngcontent-%COMP%]{display:block;font-size:.6rem;color:#48bb78;font-weight:600;margin-top:2px}.comidas-mini[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:4px;margin:.5rem 0;flex-wrap:wrap}.mini-dot[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:50%;background:#e2e8f0}.mini-dot.completada[_ngcontent-%COMP%]{background:#48bb78!important}.mini-dot.tipo-desayuno[_ngcontent-%COMP%]{background:#f6ad55}.mini-dot.tipo-almuerzo[_ngcontent-%COMP%]{background:#63b3ed}.mini-dot.tipo-cena[_ngcontent-%COMP%]{background:#b794f4}.mini-dot.tipo-snack[_ngcontent-%COMP%]{background:#fbd38d}.mini-dot.tipo-merienda[_ngcontent-%COMP%]{background:#fc8181}.mini-more[_ngcontent-%COMP%]{font-size:.65rem;color:#718096}.sin-comidas-mini[_ngcontent-%COMP%]{font-size:.6rem;color:#a0aec0}.dia-stats[_ngcontent-%COMP%]{margin-top:.5rem}.dia-calorias[_ngcontent-%COMP%]{font-size:.7rem;color:#718096}.dia-detalle[_ngcontent-%COMP%]{padding:1.5rem;border-top:1px solid #e2e8f0}.dia-detalle[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 1rem;color:#2d3748}.comidas-dia[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.comida-mini-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:.75rem;background:#f7fafc;border-radius:8px;cursor:pointer;transition:all .2s}.comida-mini-card[_ngcontent-%COMP%]:hover{background:#edf2f7}.comida-mini-card.completada[_ngcontent-%COMP%]{opacity:.6}.tipo-mini[_ngcontent-%COMP%]{padding:.25rem .5rem;border-radius:4px;font-size:.7rem;font-weight:600}.nombre-mini[_ngcontent-%COMP%]{flex:1;font-size:.9rem;color:#2d3748}.calorias-mini[_ngcontent-%COMP%]{font-size:.8rem;color:#718096}.check-mini[_ngcontent-%COMP%]{color:#48bb78;font-size:1rem!important}.sin-comidas[_ngcontent-%COMP%]{text-align:center;color:#a0aec0;padding:2rem}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#0009;display:flex;align-items:center;justify-content:center;z-index:1000;padding:1rem;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.modal-detalle[_ngcontent-%COMP%]{background:#fff;border-radius:20px;width:100%;max-width:500px;max-height:90vh;overflow-y:auto;animation:_ngcontent-%COMP%_slideUp .3s ease}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.modal-header[_ngcontent-%COMP%]{padding:1.5rem;color:#fff;border-radius:20px 20px 0 0;display:flex;justify-content:space-between;align-items:flex-start}.header-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:.5rem 0 0;font-size:1.5rem}.tipo-badge-large[_ngcontent-%COMP%]{padding:.25rem .75rem;background:#fff3;border-radius:20px;font-size:.85rem}.btn-close[_ngcontent-%COMP%]{background:#fff3;border:none;border-radius:50%;width:36px;height:36px;display:flex;align-items:center;justify-content:center;cursor:pointer;color:#fff}.modal-body[_ngcontent-%COMP%]{padding:1.5rem}.macros-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:.75rem;margin-bottom:1.5rem}.macro-card[_ngcontent-%COMP%]{text-align:center;padding:1rem .5rem;background:#f7fafc;border-radius:12px}.macro-card[_ngcontent-%COMP%]   .macro-icon[_ngcontent-%COMP%]{font-size:1.5rem;display:block;margin-bottom:.25rem}.macro-card[_ngcontent-%COMP%]   .macro-value[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:#2d3748;display:block}.macro-card[_ngcontent-%COMP%]   .macro-label[_ngcontent-%COMP%]{font-size:.75rem;color:#718096}.seccion[_ngcontent-%COMP%]{margin-bottom:1.5rem}.seccion[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 .75rem;color:#2d3748;font-size:1rem}.seccion[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#4a5568;line-height:1.6}.ingredientes-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.ingredientes-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;gap:.5rem;padding:.5rem 0;border-bottom:1px solid #e2e8f0}.ingredientes-list[_ngcontent-%COMP%]   .cantidad[_ngcontent-%COMP%]{color:#48bb78;font-weight:600;min-width:80px}.ingredientes-list[_ngcontent-%COMP%]   .nombre[_ngcontent-%COMP%]{color:#4a5568}.porciones-section[_ngcontent-%COMP%]{text-align:center}.porciones-control[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:1.5rem;margin:1rem 0}.btn-porcion[_ngcontent-%COMP%]{width:44px;height:44px;border-radius:50%;border:2px solid #e2e8f0;background:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s}.btn-porcion[_ngcontent-%COMP%]:hover:not(:disabled){border-color:#48bb78;color:#48bb78}.btn-porcion[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.porciones-valor[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#2d3748}.calorias-ajustadas[_ngcontent-%COMP%]{color:#718096;font-size:.9rem}.modal-footer[_ngcontent-%COMP%]{padding:1rem 1.5rem;border-top:1px solid #e2e8f0;display:flex;gap:1rem}.btn-registrar-full[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;gap:.5rem;padding:1rem;background:linear-gradient(135deg,#48bb78,#38a169);color:#fff;border:none;border-radius:12px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .2s}.btn-registrar-full[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #48bb7866}.btn-desmarcar[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;gap:.5rem;padding:1rem;background:#fed7d7;color:#c53030;border:none;border-radius:12px;font-weight:600;cursor:pointer}.modal-extra[_ngcontent-%COMP%]{background:#fff;border-radius:20px;width:100%;max-width:450px;animation:_ngcontent-%COMP%_slideUp .3s ease}.modal-header.extra[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2)}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:600;color:#4a5568;font-size:.9rem}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid #e2e8f0;border-radius:8px;font-size:1rem;transition:border-color .2s}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#48bb78}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem}.btn-cancelar[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background:#edf2f7;color:#4a5568;border:none;border-radius:8px;font-weight:600;cursor:pointer}.btn-guardar[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem 1.5rem;background:linear-gradient(135deg,#48bb78,#38a169);color:#fff;border:none;border-radius:8px;font-weight:600;cursor:pointer}.btn-guardar[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.loading-state[_ngcontent-%COMP%]{text-align:center;padding:3rem}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #e2e8f0;border-top-color:#48bb78;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 1rem}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:3rem}.empty-icon[_ngcontent-%COMP%]{font-size:4rem;display:block;margin-bottom:1rem;opacity:.5}.btn-secondary[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background:#edf2f7;color:#4a5568;border:none;border-radius:8px;font-weight:600;cursor:pointer}.notas[_ngcontent-%COMP%]{background:#f7fafc;padding:.75rem;border-radius:8px;color:#4a5568;font-size:.9rem}@media (max-width: 1024px){.stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (max-width: 768px){.mis-comidas-container[_ngcontent-%COMP%]{padding:1rem}.stats-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.calendario-grid[_ngcontent-%COMP%]{gap:4px}.calendario-dia[_ngcontent-%COMP%]{min-height:80px;padding:.5rem}.macros-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};export{ue as MisComidasComponent};
