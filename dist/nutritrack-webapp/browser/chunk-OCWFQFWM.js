import{a as $}from"./chunk-LPBBENYK.js";import{a as W}from"./chunk-73PQWT7O.js";import{a as B}from"./chunk-FAQLDPXB.js";import{a as q}from"./chunk-AVXLCIQN.js";import{b as L,c as F,g as I,j as T,p as z,q as A,r as j,w as V}from"./chunk-GRSFFSFU.js";import"./chunk-Q53AFBXZ.js";import{e as D}from"./chunk-ONQJZTIX.js";import"./chunk-N5IZLMDI.js";import{$b as R,Bb as p,Db as g,Ec as N,Ma as s,Qb as k,Rb as o,Sa as u,Sb as f,Tb as C,Vb as b,Wb as v,Xb as M,Za as y,_b as E,ba as O,ca as S,ma as _,mb as c,nb as m,pb as x,qb as h,rb as P,sb as i,tb as n,zb as w}from"./chunk-D6HZ3QFW.js";import"./chunk-2VMXMS7J.js";var G=()=>["/metas/mis-asignaciones"],H=a=>["/metas/rutinas",a],Z=(a,e)=>e.id;function J(a,e){a&1&&(i(0,"div",15)(1,"p"),o(2,"Cargando rutinas..."),n()())}function K(a,e){a&1&&(i(0,"div",16)(1,"p"),o(2,"No se encontraron rutinas con los filtros seleccionados"),n()())}function Q(a,e){a&1&&(i(0,"span",22),o(1,"Disponible"),n())}function U(a,e){a&1&&(i(0,"span",23),o(1,"No Disponible"),n())}function X(a,e){if(a&1&&(i(0,"span",32),o(1),n()),a&2){let t=e.$implicit;s(),f(t.nombre)}}function ee(a,e){if(a&1&&(i(0,"div",29),x(1,X,2,1,"span",32,Z),n()),a&2){let t=g().$implicit;s(),h(t.etiquetas)}}function te(a,e){if(a&1){let t=w();i(0,"button",33),p("click",function(){O(t);let d=g().$implicit,l=g(2);return S(l.activarRutina(d))}),o(1," \u{1F680} Activar Rutina "),n(),i(2,"button",34),o(3," \u{1F441}\uFE0F Ver Detalle "),n()}if(a&2){let t=g().$implicit;s(2),P("routerLink",R(1,H,t.id))}}function ne(a,e){a&1&&(i(0,"button",31),o(1," No Disponible "),n())}function ie(a,e){if(a&1&&(i(0,"div",18)(1,"div",19)(2,"h3"),o(3),n(),i(4,"div",20)(5,"span",21),o(6),n(),c(7,Q,2,0,"span",22)(8,U,2,0,"span",23),n()(),i(9,"p",24),o(10),n(),i(11,"div",25)(12,"div",26)(13,"span",27),o(14,"Duraci\xF3n:"),n(),i(15,"span",28),o(16),n()(),i(17,"div",26)(18,"span",27),o(19,"Ejercicios:"),n(),i(20,"span",28),o(21),n()(),i(22,"div",26)(23,"span",27),o(24,"Patr\xF3n:"),n(),i(25,"span",28),o(26),n()()(),c(27,ee,3,0,"div",29),i(28,"div",30),c(29,te,4,3)(30,ne,2,0,"button",31),n()()),a&2){let t=e.$implicit,r=g(2);s(3),f(t.nombre),s(2),k("nivel-"+t.nivelDificultad.toLowerCase()),s(),C(" ",r.formatearNivel(t.nivelDificultad)," "),s(),m(t.activo?7:8),s(3),f(t.descripcion),s(6),C("",t.duracionSemanas," semanas"),s(5),f(t.totalEjerciciosProgramados||0),s(5),C("",t.patronSemanas," semana(s)"),s(),m(t.etiquetas&&t.etiquetas.length>0?27:-1),s(2),m(t.activo?29:30)}}function ae(a,e){if(a&1&&(i(0,"div",17),x(1,ie,31,11,"div",18,Z),n()),a&2){let t=g();s(),h(t.rutinasFiltradas())}}var Y=class a{constructor(e,t,r,d){this.catalogoService=e;this.metasService=t;this.notificationService=r;this.mockData=d}loading=_(!1);filtroNombre="";filtroNivel="";soloSugeridos=!1;rutinas=_([]);rutinasFiltradas=_([]);ngOnInit(){this.cargarRutinas()}cargarRutinas(){this.loading.set(!0),this.rutinas.set(this.mockData.rutinasDisponibles()),this.filtrarRutinas(),this.loading.set(!1),this.catalogoService.verCatalogoRutinas(this.soloSugeridos,0,100).subscribe({next:e=>{e.success&&e.data&&(this.rutinas.set(e.data.content||[]),this.filtrarRutinas())},error:()=>{this.notificationService.showSuccess("Modo demo: rutinas cargadas sin conexi\xF3n")}})}filtrarRutinas(){let e=this.rutinas();if(this.filtroNombre){let t=this.filtroNombre.toLowerCase();e=e.filter(r=>r.nombre.toLowerCase().includes(t)||r.descripcion.toLowerCase().includes(t))}this.filtroNivel&&(e=e.filter(t=>t.nivelDificultad===this.filtroNivel)),this.rutinasFiltradas.set(e)}activarRutina(e){this.mockData.activarRutina(e.id),this.metasService.activarRutina({rutinaId:e.id}).subscribe({next:t=>{t.success?this.notificationService.showSuccess(`Rutina "${e.nombre}" activada exitosamente`):this.notificationService.showSuccess(`Rutina "${e.nombre}" activada (demo)`)},error:()=>{this.notificationService.showSuccess(`Rutina "${e.nombre}" activada (demo)`)}})}formatearNivel(e){return{PRINCIPIANTE:"Principiante",INTERMEDIO:"Intermedio",AVANZADO:"Avanzado"}[e]||e}static \u0275fac=function(t){return new(t||a)(u($),u(W),u(q),u(B))};static \u0275cmp=y({type:a,selectors:[["app-catalogo-lista-rutinas"]],decls:28,vars:8,consts:[[1,"catalogo-rutinas-container"],[1,"header"],[1,"btn-back",3,"routerLink"],[1,"subtitle"],[1,"filters"],[1,"search-box"],["type","text","placeholder","Buscar por nombre...",3,"ngModelChange","ngModel"],[1,"filter-nivel"],[3,"ngModelChange","ngModel"],["value",""],["value","PRINCIPIANTE"],["value","INTERMEDIO"],["value","AVANZADO"],[1,"filter-sugeridos"],["type","checkbox",3,"ngModelChange","ngModel"],[1,"loading"],[1,"empty-state"],[1,"rutinas-grid"],[1,"rutina-card"],[1,"rutina-header"],[1,"badges"],[1,"badge-nivel"],[1,"estado-badge","estado-disponible"],[1,"estado-badge","estado-inactivo"],[1,"rutina-description"],[1,"rutina-stats"],[1,"stat"],[1,"stat-label"],[1,"stat-value"],[1,"rutina-tags"],[1,"rutina-actions"],["disabled","",1,"btn-disabled"],[1,"tag"],[1,"btn-activate",3,"click"],[1,"btn-primary",3,"routerLink"]],template:function(t,r){t&1&&(i(0,"div",0)(1,"div",1)(2,"button",2),o(3," \u2190 Volver a Mis Asignaciones "),n(),i(4,"h1"),o(5,"\u{1F3CB}\uFE0F\u200D\u2642\uFE0F Cat\xE1logo de Rutinas de Ejercicio"),n(),i(6,"p",3),o(7,"Explora y activa rutinas personalizadas seg\xFAn tu objetivo y nivel"),n()(),i(8,"div",4)(9,"div",5)(10,"input",6),M("ngModelChange",function(l){return v(r.filtroNombre,l)||(r.filtroNombre=l),l}),p("ngModelChange",function(){return r.filtrarRutinas()}),n()(),i(11,"div",7)(12,"select",8),M("ngModelChange",function(l){return v(r.filtroNivel,l)||(r.filtroNivel=l),l}),p("ngModelChange",function(){return r.filtrarRutinas()}),i(13,"option",9),o(14,"Todos los niveles"),n(),i(15,"option",10),o(16,"Principiante"),n(),i(17,"option",11),o(18,"Intermedio"),n(),i(19,"option",12),o(20,"Avanzado"),n()()(),i(21,"div",13)(22,"label")(23,"input",14),M("ngModelChange",function(l){return v(r.soloSugeridos,l)||(r.soloSugeridos=l),l}),p("ngModelChange",function(){return r.cargarRutinas()}),n(),o(24," Solo rutinas sugeridas para mi objetivo "),n()()(),c(25,J,3,0,"div",15),c(26,K,3,0,"div",16),c(27,ae,3,0,"div",17),n()),t&2&&(s(2),P("routerLink",E(7,G)),s(8),b("ngModel",r.filtroNombre),s(2),b("ngModel",r.filtroNivel),s(11),b("ngModel",r.soloSugeridos),s(2),m(r.loading()?25:-1),s(),m(!r.loading()&&r.rutinasFiltradas().length===0?26:-1),s(),m(!r.loading()&&r.rutinasFiltradas().length>0?27:-1))},dependencies:[N,D,V,A,j,F,L,z,I,T],styles:[".catalogo-rutinas-container[_ngcontent-%COMP%]{padding:2rem;max-width:1400px;margin:0 auto}.header[_ngcontent-%COMP%]{margin-bottom:2rem;text-align:center;position:relative}.btn-back[_ngcontent-%COMP%]{position:absolute;left:0;top:0;padding:.625rem 1.25rem;background:#edf2f7;color:#4a5568;border:none;border-radius:8px;font-weight:600;cursor:pointer;font-size:.875rem;transition:all .2s}.btn-back[_ngcontent-%COMP%]:hover{background:#e2e8f0;transform:translate(-2px)}h1[_ngcontent-%COMP%]{font-size:2.5rem;color:#2d3748;margin:0 0 .5rem}.subtitle[_ngcontent-%COMP%]{color:#718096;font-size:1.125rem;margin:0}.filters[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:2rem;align-items:center;flex-wrap:wrap}.search-box[_ngcontent-%COMP%]{flex:1;min-width:250px}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid #e2e8f0;border-radius:8px;font-size:1rem}.filter-nivel[_ngcontent-%COMP%], .filter-estado[_ngcontent-%COMP%]{min-width:200px}.filter-nivel[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .filter-estado[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid #e2e8f0;border-radius:8px;font-size:1rem;background-color:#fff}.rutinas-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:1.5rem}.rutina-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:1.5rem;box-shadow:0 2px 8px #0000001a;transition:transform .2s,box-shadow .2s;display:flex;flex-direction:column}.rutina-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 4px 16px #00000026}.rutina-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:start;margin-bottom:1rem;gap:1rem}.rutina-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;color:#2d3748;flex:1}.badges[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;align-items:flex-end}.badge-nivel[_ngcontent-%COMP%], .estado-badge[_ngcontent-%COMP%]{padding:.25rem .75rem;border-radius:20px;font-size:.75rem;font-weight:600;white-space:nowrap}.badge-nivel.nivel-principiante[_ngcontent-%COMP%]{background:#c6f6d5;color:#22543d}.badge-nivel.nivel-intermedio[_ngcontent-%COMP%]{background:#bee3f8;color:#2c5282}.badge-nivel.nivel-avanzado[_ngcontent-%COMP%]{background:#fbd38d;color:#7c2d12}.estado-badge.estado-activo[_ngcontent-%COMP%]{background:#c6f6d5;color:#22543d}.estado-badge.estado-pausado[_ngcontent-%COMP%]{background:#bee3f8;color:#2c5282}.estado-badge.estado-completado[_ngcontent-%COMP%]{background:#c6f6d5;color:#22543d}.estado-badge.estado-cancelado[_ngcontent-%COMP%]{background:#fed7d7;color:#742a2a}.estado-badge.estado-disponible[_ngcontent-%COMP%]{background:#48bb78;color:#fff}.rutina-description[_ngcontent-%COMP%]{color:#718096;margin-bottom:1rem;line-height:1.5}.rutina-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:.75rem;margin-bottom:1rem;padding:1rem;background:#f7fafc;border-radius:8px}.stat[_ngcontent-%COMP%]{display:flex;flex-direction:column}.stat-label[_ngcontent-%COMP%]{font-size:.875rem;color:#718096;margin-bottom:.25rem}.stat-value[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#2d3748}.progress-section[_ngcontent-%COMP%]{margin-bottom:1rem}.progress-text[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem;font-size:.875rem;color:#718096}.percentage[_ngcontent-%COMP%]{font-weight:600;color:#2d3748}.progress-bar[_ngcontent-%COMP%]{width:100%;height:8px;background:#e2e8f0;border-radius:10px;overflow:hidden}.progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#48bb78,#38a169);transition:width .3s ease}.rutina-etiquetas[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;margin-bottom:1rem}.etiqueta[_ngcontent-%COMP%]{padding:.25rem .75rem;background:#edf2f7;color:#4a5568;border-radius:20px;font-size:.875rem}.rutina-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;flex-wrap:wrap;margin-top:auto}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%], .btn-danger[_ngcontent-%COMP%], .btn-activate[_ngcontent-%COMP%]{padding:.5rem 1rem;border:none;border-radius:8px;font-weight:600;cursor:pointer;transition:all .2s;font-size:.75rem;flex:1;min-width:90px}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #667eea66}.btn-activate[_ngcontent-%COMP%]{background:#48bb78;color:#fff}.btn-activate[_ngcontent-%COMP%]:hover{background:#38a169}.btn-secondary[_ngcontent-%COMP%]{background:#edf2f7;color:#4a5568}.btn-secondary[_ngcontent-%COMP%]:hover{background:#e2e8f0}.btn-danger[_ngcontent-%COMP%]{background:#fed7d7;color:#742a2a}.btn-danger[_ngcontent-%COMP%]:hover{background:#fc8181}.loading[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{text-align:center;padding:3rem;color:#718096}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.125rem}.rutina-tags[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;margin-top:1rem}.tag[_ngcontent-%COMP%]{padding:.25rem .75rem;background:#e6f7ff;color:#06c;border-radius:12px;font-size:.875rem;font-weight:500}.btn-disabled[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background:#cbd5e0;color:#718096;border:none;border-radius:8px;cursor:not-allowed}.estado-inactivo[_ngcontent-%COMP%]{background:#fed7d7;color:#c53030}.filter-sugeridos[_ngcontent-%COMP%]{display:flex;align-items:center;padding:.5rem 1rem;background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a}.filter-sugeridos[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;cursor:pointer;font-size:.95rem;color:#4a5568}.filter-sugeridos[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:18px;height:18px;cursor:pointer}"]})};export{Y as MetasListaRutinasComponent};
