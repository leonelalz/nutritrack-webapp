import{a as X}from"./chunk-56B7C5MF.js";import{A as z,z as I}from"./chunk-6AXQUQX5.js";import{a as W}from"./chunk-OBWTC55X.js";import{c as T,e as c,g as V,h as j,k as A,l as G,m as B,o as L,p as $,q as Y,r as Z,s as H,t as J,v as K,x as Q}from"./chunk-M75YHKAC.js";import{a as U}from"./chunk-F5B3K5RO.js";import"./chunk-6ULEJF3H.js";import{c as D,d as F}from"./chunk-LBN5CU62.js";import"./chunk-NZVHEJ25.js";import{Bb as k,Db as _,Fb as C,Kc as R,Na as l,Rb as h,Ta as s,Tb as t,Ub as N,Vb as w,_a as O,ca as M,da as P,na as u,nb as b,ob as v,rb as q,sb as y,tb as p,ub as e,vb as n,wb as g}from"./chunk-N5FZ7NRP.js";import{a as S,b as E}from"./chunk-2VMXMS7J.js";var te=(a,o)=>o.id;function ne(a,o){a&1&&(e(0,"span",12),t(1,"El nombre es obligatorio"),n())}function ie(a,o){a&1&&(e(0,"div",28),t(1,"Cargando etiquetas..."),n())}function re(a,o){if(a&1){let r=k();e(0,"label",33)(1,"input",34),_("change",function(){let m=M(r).$implicit,d=C(2);return P(d.toggleEtiqueta(m.id))}),n(),e(2,"span",35),t(3),n()()}if(a&2){let r=o.$implicit,i=C(2);l(),p("checked",i.etiquetasSeleccionadas().includes(r.id)),l(2),N(r.nombre)}}function oe(a,o){if(a&1&&(e(0,"div",29),q(1,re,4,2,"label",33,te),n()),a&2){let r=C();l(),y(r.etiquetas())}}var ee=class a{constructor(o,r,i,m,d){this.fb=o;this.rutinaService=r;this.etiquetaService=i;this.notificationService=m;this.router=d;this.inicializarFormulario()}formulario;guardando=u(!1);cargandoEtiquetas=u(!1);etiquetas=u([]);etiquetasSeleccionadas=u([]);ngOnInit(){this.cargarEtiquetas()}inicializarFormulario(){this.formulario=this.fb.group({nombre:["",[c.required,c.minLength(5)]],descripcion:["",[c.required,c.minLength(10)]],duracionSemanas:[4,[c.required,c.min(1),c.max(52)]],patronSemanas:[1,[c.required,c.min(1)]],nivelDificultad:["",c.required]})}cargarEtiquetas(){this.cargandoEtiquetas.set(!0),this.etiquetaService.listar(0,1e3).subscribe({next:o=>{this.cargandoEtiquetas.set(!1),this.etiquetas.set(o.data.content)},error:()=>{this.cargandoEtiquetas.set(!1),this.notificationService.showError("Error al cargar etiquetas")}})}toggleEtiqueta(o){let r=this.etiquetasSeleccionadas();r.includes(o)?this.etiquetasSeleccionadas.set(r.filter(i=>i!==o)):this.etiquetasSeleccionadas.set([...r,o])}guardar(){if(this.formulario.invalid){this.formulario.markAllAsTouched(),this.notificationService.showError("Por favor completa todos los campos requeridos");return}this.guardando.set(!0);let o=E(S({},this.formulario.value),{etiquetaIds:this.etiquetasSeleccionadas()});this.rutinaService.crearRutina(o).subscribe({next:r=>{this.guardando.set(!1),r.success&&(this.notificationService.showSuccess("Rutina creada exitosamente"),this.router.navigate(["/admin/rutinas"]))},error:r=>{this.guardando.set(!1),r.status===409?this.notificationService.showError("Ya existe una rutina con ese nombre (RN11)"):this.notificationService.showError("Error al crear rutina")}})}static \u0275fac=function(r){return new(r||a)(s(K),s(X),s(W),s(U),s(D))};static \u0275cmp=O({type:a,selectors:[["app-crear-rutina"]],decls:73,vars:11,consts:[[1,"crear-rutina-container"],[1,"page-header"],[1,"header-content"],[1,"page-title"],[1,"page-subtitle"],["routerLink","/admin/rutinas",1,"btn-link"],[1,"rutina-form",3,"ngSubmit","formGroup"],[1,"form-section"],[1,"form-group"],["for","nombre"],[1,"required"],["id","nombre","type","text","formControlName","nombre","placeholder","Ej: Rutina Principiante - 4 semanas"],[1,"error-text"],[1,"help-text"],["for","descripcion"],["id","descripcion","formControlName","descripcion","rows","4","placeholder","Describe los objetivos y caracter\xEDsticas de la rutina..."],[1,"form-row"],["for","duracionSemanas"],["id","duracionSemanas","type","number","formControlName","duracionSemanas","min","1","max","52"],["for","patronSemanas"],["id","patronSemanas","type","number","formControlName","patronSemanas","min","1",3,"max"],["for","nivelDificultad"],["id","nivelDificultad","formControlName","nivelDificultad"],["value",""],["value","PRINCIPIANTE"],["value","INTERMEDIO"],["value","AVANZADO"],[1,"section-description"],[1,"loading"],[1,"etiquetas-grid"],[1,"form-actions"],["type","button","routerLink","/admin/rutinas",1,"btn-secondary"],["type","submit",1,"btn-primary",3,"disabled"],[1,"checkbox-card"],["type","checkbox",3,"change","checked"],[1,"checkbox-label"]],template:function(r,i){if(r&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3)(4,"mat-icon"),t(5,"fitness_center"),n(),t(6," Crear Rutina de Ejercicio "),n(),e(7,"p",4),t(8,"Crea una nueva rutina de ejercicios personalizada"),n()(),e(9,"button",5),t(10,"\u2190 Volver a rutinas"),n()(),e(11,"form",6),_("ngSubmit",function(){return i.guardar()}),e(12,"div",7)(13,"h2"),t(14,"Informaci\xF3n B\xE1sica"),n(),e(15,"div",8)(16,"label",9),t(17,"Nombre de la Rutina "),e(18,"span",10),t(19,"*"),n()(),g(20,"input",11),b(21,ne,2,0,"span",12),e(22,"small",13),t(23,"El nombre debe ser \xFAnico (RN11)"),n()(),e(24,"div",8)(25,"label",14),t(26,"Descripci\xF3n "),e(27,"span",10),t(28,"*"),n()(),g(29,"textarea",15),n(),e(30,"div",16)(31,"div",8)(32,"label",17),t(33,"Duraci\xF3n Total (semanas) "),e(34,"span",10),t(35,"*"),n()(),g(36,"input",18),e(37,"small",13),t(38,"Duraci\xF3n total de la rutina"),n()(),e(39,"div",8)(40,"label",19),t(41,"Patr\xF3n Base (semanas) "),e(42,"span",10),t(43,"*"),n()(),g(44,"input",20),e(45,"small",13),t(46,"Semanas del patr\xF3n que se repite"),n()()(),e(47,"div",8)(48,"label",21),t(49,"Nivel de Dificultad "),e(50,"span",10),t(51,"*"),n()(),e(52,"select",22)(53,"option",23),t(54,"Selecciona un nivel"),n(),e(55,"option",24),t(56,"Principiante"),n(),e(57,"option",25),t(58,"Intermedio"),n(),e(59,"option",26),t(60,"Avanzado"),n()()()(),e(61,"div",7)(62,"h2"),t(63,"Etiquetas"),n(),e(64,"p",27),t(65,"Selecciona las etiquetas que aplican a esta rutina"),n(),b(66,ie,2,0,"div",28),b(67,oe,3,0,"div",29),n(),e(68,"div",30)(69,"button",31),t(70," Cancelar "),n(),e(71,"button",32),t(72),n()()()()),r&2){let m,d,f,x;l(11),p("formGroup",i.formulario),l(9),h("error",((m=i.formulario.get("nombre"))==null?null:m.invalid)&&((m=i.formulario.get("nombre"))==null?null:m.touched)),l(),v((d=i.formulario.get("nombre"))!=null&&d.hasError("required")&&((d=i.formulario.get("nombre"))!=null&&d.touched)?21:-1),l(8),h("error",((f=i.formulario.get("descripcion"))==null?null:f.invalid)&&((f=i.formulario.get("descripcion"))==null?null:f.touched)),l(15),p("max",((x=i.formulario.get("duracionSemanas"))==null?null:x.value)||52),l(22),v(i.cargandoEtiquetas()?66:-1),l(),v(!i.cargandoEtiquetas()&&i.etiquetas().length>0?67:-1),l(4),p("disabled",i.formulario.invalid||i.guardando()),l(),w(" ",i.guardando()?"Guardando...":"Crear Rutina"," ")}},dependencies:[R,F,Q,A,Y,Z,T,G,$,V,j,J,H,B,L,z,I],styles:[".crear-rutina-container[_ngcontent-%COMP%]{padding:2rem;max-width:900px;margin:0 auto}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem;padding-bottom:1.5rem;border-bottom:2px solid #e2e8f0}.header-content[_ngcontent-%COMP%]{flex:1}.page-title[_ngcontent-%COMP%]{font-size:2rem;color:#2d3748;margin:0 0 .5rem;display:flex;align-items:center;gap:.75rem}.page-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#28a745;font-size:2rem;width:2rem;height:2rem}.page-subtitle[_ngcontent-%COMP%]{color:#718096;margin:0;font-size:1rem}.btn-link[_ngcontent-%COMP%]{background:none;border:none;color:#28a745;font-weight:600;cursor:pointer;font-size:1rem;transition:color .2s}.btn-link[_ngcontent-%COMP%]:hover{color:#218838}.rutina-form[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:2rem;box-shadow:0 2px 8px #0000001a}.form-section[_ngcontent-%COMP%]{margin-bottom:2rem;padding-bottom:2rem;border-bottom:1px solid #e2e8f0}.form-section[_ngcontent-%COMP%]:last-of-type{border-bottom:none}.form-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem;color:#2d3748;margin-bottom:.5rem}.section-description[_ngcontent-%COMP%]{color:#718096;margin-bottom:1rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem}label[_ngcontent-%COMP%]{display:block;font-weight:600;color:#4a5568;margin-bottom:.5rem}.required[_ngcontent-%COMP%]{color:#e53e3e}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid #e2e8f0;border-radius:8px;font-size:1rem;transition:border-color .2s}input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea}input.error[_ngcontent-%COMP%], select.error[_ngcontent-%COMP%], textarea.error[_ngcontent-%COMP%]{border-color:#fc8181}.error-text[_ngcontent-%COMP%]{display:block;color:#e53e3e;font-size:.875rem;margin-top:.25rem}.help-text[_ngcontent-%COMP%]{display:block;color:#718096;font-size:.875rem;margin-top:.25rem}.etiquetas-grid[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.75rem;padding:1rem;background:#f8f9fa;border-radius:8px;min-height:60px}.checkbox-card[_ngcontent-%COMP%]{display:flex;align-items:center;padding:.5rem 1rem;border:2px solid #dee2e6;background:#fff;border-radius:20px;cursor:pointer;transition:all .2s;-webkit-user-select:none;user-select:none}.checkbox-card[_ngcontent-%COMP%]:hover{border-color:#28a745;background:#e8f5e8}.checkbox-card[_ngcontent-%COMP%]:has(input[type=checkbox]:checked){background:linear-gradient(159deg,#28a745,#20c997);border-color:transparent;color:#fff}.checkbox-card[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:auto;margin-right:.5rem;cursor:pointer}.checkbox-label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600}.form-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:flex-end;padding-top:2rem}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]{padding:.75rem 2rem;border:none;border-radius:8px;font-weight:600;cursor:pointer;transition:all .2s;font-size:1rem}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 4px 12px #667eea66}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-secondary[_ngcontent-%COMP%]{background:#edf2f7;color:#4a5568}.btn-secondary[_ngcontent-%COMP%]:hover{background:#e2e8f0}.loading[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:#718096}"]})};export{ee as CrearRutinaComponent};
