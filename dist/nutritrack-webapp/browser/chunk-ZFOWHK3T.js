import{a as Y,b as W}from"./chunk-AERAWHYX.js";import{a as B}from"./chunk-73PQWT7O.js";import{a as K}from"./chunk-FAQLDPXB.js";import"./chunk-VRXVPH7L.js";import{o as R}from"./chunk-IEOKP2HD.js";import{A as H}from"./chunk-7NAIVTKU.js";import{a as U}from"./chunk-AVXLCIQN.js";import{g as L,j as $,w as V}from"./chunk-GRSFFSFU.js";import"./chunk-Q53AFBXZ.js";import{e as j}from"./chunk-ONQJZTIX.js";import"./chunk-N5IZLMDI.js";import{Bb as E,Db as s,Ec as F,Ma as r,Pb as k,Qb as w,Rb as o,Sa as _,Sb as f,Tb as C,Ub as D,Vb as N,Wb as z,Xb as A,Yb as I,Za as P,_b as b,ba as u,ca as x,ec as T,ma as l,mb as g,nb as p,pb as O,qb as y,rb as M,sb as i,tb as a,zb as S}from"./chunk-D6HZ3QFW.js";import{a as v,b as h}from"./chunk-2VMXMS7J.js";var q=()=>["/metas/planes"],G=(n,t)=>t.id;function J(n,t){if(n&1&&(i(0,"span",16),o(1),a()),n&2){let e=s();r(),f(e.planActivo().nombre)}}function Q(n,t){n&1&&(i(0,"a",17),o(1,"Activar Plan"),a()),n&2&&M("routerLink",b(1,q))}function X(n,t){n&1&&(i(0,"div",19)(1,"p"),o(2,"Cargando..."),a()())}function ee(n,t){n&1&&(i(0,"div",20)(1,"span",22),o(2,"\u{1F37D}\uFE0F"),a(),i(3,"p"),o(4,"No tienes comidas programadas"),a(),i(5,"button",23),o(6,"Activar un Plan"),a()()),n&2&&(r(5),M("routerLink",b(1,q)))}function te(n,t){if(n&1&&(i(0,"span",30),o(1),a()),n&2){let e=s().$implicit;r(),f(e.horaSugerida)}}function ne(n,t){if(n&1&&(i(0,"span",32),o(1),a()),n&2){let e=s().$implicit;r(),C("",e.porciones," porci\xF3n(es)")}}function ae(n,t){if(n&1&&(i(0,"span",32),o(1),a()),n&2){let e=s().$implicit;r(),C("\u{1F525} ",e.calorias," kcal")}}function ie(n,t){if(n&1&&(i(0,"p",33),o(1),a()),n&2){let e=s().$implicit;r(),f(e.notas)}}function oe(n,t){if(n&1){let e=S();i(0,"div",25)(1,"div",26)(2,"mat-checkbox",27),A("ngModelChange",function(d){let m=u(e).$implicit;return z(m.completada,d)||(m.completada=d),x(d)}),E("change",function(){let d=u(e).$implicit,m=s(2);return x(m.marcarComidaCompletada(d))}),a()(),i(3,"div",28)(4,"div",29)(5,"span"),o(6),a(),g(7,te,2,1,"span",30),a(),i(8,"h4"),o(9),a(),i(10,"div",31),g(11,ne,2,1,"span",32),g(12,ae,2,1,"span",32),a(),g(13,ie,2,1,"p",33),a()()}if(n&2){let e=t.$implicit,c=s(2);k("completada",e.completada),r(2),N("ngModel",e.completada),r(3),w(I("type-badge tipo-",e.tipoComida.toLowerCase())),r(),C(" ",c.formatearTipoComida(e.tipoComida)," "),r(),p(e.horaSugerida?7:-1),r(2),f(e.comidaNombre),r(2),p(e.porciones?11:-1),r(),p(e.calorias?12:-1),r(),p(e.notas?13:-1)}}function re(n,t){if(n&1&&(i(0,"div",21),O(1,oe,14,12,"div",24,G),a()),n&2){let e=s();r(),y(e.comidasProgramadas())}}var Z=class n{constructor(t,e,c){this.metasService=t;this.notificationService=e;this.mockData=c;this.comidasProgramadas=this.mockData.comidasProgramadas,this.planActivo=T(()=>this.mockData.planActivo())}fechaHoy=new Date().toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"});cargando=l(!1);caloriasHoy=l(0);caloriasMeta=l(2200);comidasRegistradas=l(0);hidratacion=l(0);comidasProgramadas=l([]);comidasRegistradasHoy=l([]);planActivo;ngOnInit(){this.cargarComidasProgramadas(),this.cargarPlanActivo()}cargarComidasProgramadas(){this.cargando.set(!0),this.metasService.obtenerComidasProgramadasHoy().subscribe({next:t=>{if(t.success&&t.data){let e=t.data.map(c=>h(v({},c),{completada:!1}));this.mockData.comidasProgramadas.set(e),this.actualizarEstadisticas(),this.cargando.set(!1)}else this.actualizarEstadisticas(),this.cargando.set(!1)},error:()=>{this.actualizarEstadisticas(),this.notificationService.showSuccess("Modo demo: comidas cargadas sin conexi\xF3n"),this.cargando.set(!1)}})}cargarPlanActivo(){this.metasService.obtenerPlanesActivos().subscribe({next:t=>{if(t.success&&t.data&&t.data.length>0){let e=t.data[0];this.planActivo.set({nombre:e.planNombre||"Plan Nutricional",descripcion:e.planDescripcion||"",duracion:e.diasTotales||0,diaActual:e.diaActual||0,caloriasObjetivo:e.caloriasObjetivo||0,proteinasObjetivo:e.proteinasObjetivo||0,carbohidratosObjetivo:e.carbohidratosObjetivo||0,grasasObjetivo:e.grasasObjetivo||0}),e.caloriasObjetivo&&this.caloriasMeta.set(e.caloriasObjetivo)}},error:t=>{console.error("Error al cargar plan activo:",t)}})}marcarComidaCompletada(t){if(t.completada){this.mockData.marcarComidaCompletada(t.id);let e=new Date().toISOString().split("T")[0],c=new Date().toTimeString().split(" ")[0].substring(0,5);this.metasService.registrarComidaConsumida({planComidaId:t.id,fecha:e,hora:c}).subscribe({next:d=>{let m=t.comida?.nombre||t.comidaNombre||"Comida";this.notificationService.showSuccess(`\u2713 ${m} registrada`)},error:()=>{let d=t.comida?.nombre||t.comidaNombre||"Comida";this.notificationService.showSuccess(`\u2713 ${d} registrada (demo)`)}}),this.actualizarEstadisticas()}}actualizarEstadisticas(){let t=this.comidasProgramadas(),e=t.filter(d=>d.completada).length;this.comidasRegistradas.set(e);let c=t.filter(d=>d.completada).reduce((d,m)=>d+(m.calorias||0),0);this.caloriasHoy.set(c)}formatearTipoComida(t){return{DESAYUNO:"Desayuno",ALMUERZO:"Almuerzo",CENA:"Cena",SNACK:"Snack",MERIENDA:"Merienda",COLACION:"Colaci\xF3n",PRE_ENTRENAMIENTO:"Pre-Entrenamiento",POST_ENTRENAMIENTO:"Post-Entrenamiento"}[t]||t}loadComidasHoy(){}loadPlanActivo(){}static \u0275fac=function(e){return new(e||n)(_(B),_(U),_(K))};static \u0275cmp=P({type:n,selectors:[["app-mis-comidas"]],decls:42,vars:7,consts:[[1,"mis-comidas-container"],[1,"page-header"],[1,"header-content"],[1,"page-title"],[1,"icon"],[1,"page-subtitle"],[1,"stats-grid"],[1,"stat-card"],[1,"stat-header"],[1,"stat-icon"],[1,"stat-label"],[1,"stat-value"],[1,"stat-footer"],[1,"stat-meta"],[1,"content-card"],[1,"card-header"],[1,"badge-success"],[1,"link-primary",3,"routerLink"],[1,"card-content"],[1,"loading-state"],[1,"empty-state"],[1,"meals-list"],[1,"empty-icon"],[1,"btn-secondary",3,"routerLink"],[1,"meal-item",3,"completada"],[1,"meal-item"],[1,"meal-checkbox"],["color","primary",3,"ngModelChange","change","ngModel"],[1,"meal-info"],[1,"meal-header"],[1,"time"],[1,"meal-details"],[1,"detail"],[1,"notas"]],template:function(e,c){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3)(4,"span",4),o(5,"\u{1F37D}\uFE0F"),a(),o(6," Mis Comidas "),a(),i(7,"p",5),o(8),a()()(),i(9,"div",6)(10,"div",7)(11,"div",8)(12,"span",9),o(13,"\u{1F525}"),a(),i(14,"span",10),o(15,"Calor\xEDas Hoy"),a()(),i(16,"div",11),o(17),a(),i(18,"div",12)(19,"span",13),o(20),a()()(),i(21,"div",7)(22,"div",8)(23,"span",9),o(24,"\u2705"),a(),i(25,"span",10),o(26,"Completadas"),a()(),i(27,"div",11),o(28),a(),i(29,"div",12)(30,"span",13),o(31,"comidas del plan"),a()()()(),i(32,"div",14)(33,"div",15)(34,"h2"),o(35,"\u{1F3AF} Comidas Programadas"),a(),g(36,J,2,1,"span",16)(37,Q,2,2,"a",17),a(),i(38,"div",18),g(39,X,3,0,"div",19)(40,ee,7,2,"div",20)(41,re,3,0,"div",21),a()()()),e&2&&(r(8),f(c.fechaHoy),r(9),f(c.caloriasHoy()),r(3),C("de ",c.caloriasMeta()," kcal"),r(8),D("",c.comidasRegistradas(),"/",c.comidasProgramadas().length),r(8),p(c.planActivo()?36:37),r(3),p(c.cargando()?39:c.comidasProgramadas().length===0?40:41))},dependencies:[F,j,H,R,W,Y,V,L,$],styles:[".mis-comidas-container[_ngcontent-%COMP%]{padding:2rem;max-width:1400px;margin:0 auto}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem;gap:2rem;flex-wrap:wrap}.header-content[_ngcontent-%COMP%]{flex:1}.page-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;margin:0 0 .5rem;font-size:2rem;font-weight:700;color:#2d3748}.page-title[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:2.5rem}.page-subtitle[_ngcontent-%COMP%]{margin:0;color:#718096;font-size:1.1rem}.btn-add[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.875rem 1.5rem;background:linear-gradient(135deg,#48bb78,#38a169);color:#fff;border:none;border-radius:10px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 6px #48bb784d}.btn-add[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 12px #48bb7866}.btn-add[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:1.25rem}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:1.5rem;margin-bottom:2rem}.stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:1.5rem;box-shadow:0 2px 8px #0000001a;transition:transform .2s}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 4px 12px #00000026}.stat-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;margin-bottom:1rem}.stat-icon[_ngcontent-%COMP%]{font-size:1.75rem}.stat-label[_ngcontent-%COMP%]{color:#718096;font-size:.95rem;font-weight:600}.stat-value[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;color:#2d3748;margin-bottom:.5rem}.stat-footer[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.stat-meta[_ngcontent-%COMP%]{color:#a0aec0;font-size:.875rem}.progress-bar[_ngcontent-%COMP%]{height:6px;background:#e2e8f0;border-radius:3px;overflow:hidden}.progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#48bb78,#38a169);transition:width .3s ease}.content-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(450px,1fr));gap:1.5rem}.content-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000001a;overflow:hidden}.card-header[_ngcontent-%COMP%]{padding:1.5rem;border-bottom:1px solid #e2e8f0;display:flex;justify-content:space-between;align-items:center}.card-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;font-weight:700;color:#2d3748}.date[_ngcontent-%COMP%]{color:#718096;font-size:.95rem}.link-see-all[_ngcontent-%COMP%]{color:#48bb78;font-size:.95rem;font-weight:600;text-decoration:none;transition:color .2s}.link-see-all[_ngcontent-%COMP%]:hover{color:#38a169}.card-content[_ngcontent-%COMP%]{padding:1.5rem}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:3rem 2rem;color:#a0aec0}.empty-icon[_ngcontent-%COMP%]{font-size:4rem;display:block;margin-bottom:1rem;opacity:.5}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 1.5rem;font-size:1.1rem}.btn-secondary[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background:#edf2f7;color:#4a5568;border:none;border-radius:8px;font-weight:600;cursor:pointer;transition:all .2s}.btn-secondary[_ngcontent-%COMP%]:hover{background:#e2e8f0;transform:translateY(-2px)}.meals-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.meal-item[_ngcontent-%COMP%]{display:flex;gap:1rem;padding:1rem;background:#f7fafc;border-radius:8px;border-left:4px solid #48bb78}.meal-time[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;min-width:80px}.time[_ngcontent-%COMP%]{font-weight:700;color:#2d3748}.type-badge[_ngcontent-%COMP%]{padding:.25rem .5rem;background:#48bb78;color:#fff;border-radius:4px;font-size:.75rem;font-weight:600;text-align:center}.meal-info[_ngcontent-%COMP%]{flex:1}.meal-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 .5rem;color:#2d3748;font-size:1.1rem}.meal-nutrients[_ngcontent-%COMP%]{display:flex;gap:.75rem;flex-wrap:wrap}.nutrient[_ngcontent-%COMP%]{padding:.25rem .75rem;background:#fff;border:1px solid #e2e8f0;border-radius:4px;font-size:.875rem;color:#4a5568}.plan-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.plan-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:start;gap:1rem}.plan-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#2d3748;font-size:1.25rem}.plan-badge[_ngcontent-%COMP%]{padding:.25rem .75rem;background:linear-gradient(135deg,#48bb78,#38a169);color:#fff;border-radius:20px;font-size:.75rem;font-weight:600}.plan-description[_ngcontent-%COMP%]{margin:0;color:#718096;line-height:1.6}.plan-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:1rem;padding:1rem;background:#f7fafc;border-radius:8px}.plan-stat[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.plan-stat[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#718096;font-size:.875rem}.plan-stat[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#2d3748;font-weight:700}.plan-macros[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 1rem;color:#2d3748;font-size:1rem}.macro-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:.75rem}.macro-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem;padding:.75rem;background:#f7fafc;border-radius:6px}.macro-label[_ngcontent-%COMP%]{color:#718096;font-size:.875rem}.macro-value[_ngcontent-%COMP%]{color:#2d3748;font-weight:700}.meal-checkbox[_ngcontent-%COMP%]{display:flex;align-items:center;margin-right:1rem}.meal-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:1rem}.meal-item.completada[_ngcontent-%COMP%]{opacity:.6;background:#f0fff4}.meal-item.completada[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{text-decoration:line-through}.tipo-desayuno[_ngcontent-%COMP%]{background:#fef5e7;color:#d68910}.tipo-almuerzo[_ngcontent-%COMP%]{background:#ebf5fb;color:#2e86de}.tipo-cena[_ngcontent-%COMP%]{background:#f4ecf7;color:#8e44ad}.tipo-snack[_ngcontent-%COMP%]{background:#fef9e7;color:#f39c12}.tipo-merienda[_ngcontent-%COMP%]{background:#fdecea;color:#e74c3c}.tipo-colacion[_ngcontent-%COMP%]{background:#e8f8f5;color:#16a085}.porciones[_ngcontent-%COMP%]{margin:.25rem 0;color:#718096;font-size:.875rem}.notas[_ngcontent-%COMP%]{margin:.5rem 0 0;padding:.5rem;background:#f7fafc;border-radius:6px;color:#4a5568;font-size:.875rem}.loading-state[_ngcontent-%COMP%]{text-align:center;padding:3rem;color:#718096}@media (max-width: 768px){.mis-comidas-container[_ngcontent-%COMP%]{padding:1rem}.content-grid[_ngcontent-%COMP%], .stats-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};export{Z as MisComidasComponent};
