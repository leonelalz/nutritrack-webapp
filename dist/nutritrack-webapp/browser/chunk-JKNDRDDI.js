import{a as tt,b as et,c as nt}from"./chunk-R7JGX3WZ.js";import{c as Q}from"./chunk-6H7SMGZH.js";import{a as X,c as Z,e as G,f as H,g as J,j as K}from"./chunk-M6FO7V5J.js";import{a as Y}from"./chunk-EILS3RIY.js";import{a as W,b as $}from"./chunk-AERAWHYX.js";import"./chunk-3ERIXVYS.js";import"./chunk-VRXVPH7L.js";import{n as z,o as A}from"./chunk-IEOKP2HD.js";import{A as T,z as D}from"./chunk-7NAIVTKU.js";import{a as U}from"./chunk-AVXLCIQN.js";import{c as q,g as j,j as V,w as B}from"./chunk-GRSFFSFU.js";import"./chunk-Q53AFBXZ.js";import{d as F,e as L}from"./chunk-ONQJZTIX.js";import"./chunk-N5IZLMDI.js";import{$b as w,Bb as f,Db as l,Ec as N,Ma as c,Pb as O,Rb as a,Sa as _,Sb as C,Tb as p,Vb as E,Wb as S,Xb as R,Za as y,ba as v,ca as h,lb as k,ma as g,mb as m,nb as u,pb as x,qb as M,rb as b,sb as n,tb as e,ub as I,zb as P}from"./chunk-D6HZ3QFW.js";import"./chunk-2VMXMS7J.js";var ot=i=>["/admin/rutinas",i,"editar"],rt=i=>["/admin/rutinas",i,"ejercicios"],at=(i,o)=>o.id;function ct(i,o){i&1&&(n(0,"div",12)(1,"mat-icon"),a(2,"hourglass_empty"),e(),n(3,"p"),a(4,"Cargando rutinas..."),e()())}function st(i,o){i&1&&(n(0,"mat-card")(1,"mat-card-content")(2,"div",14)(3,"mat-icon",15),a(4,"fitness_center"),e(),n(5,"h3"),a(6,"No hay rutinas registradas"),e(),n(7,"p"),a(8,"Comienza creando tu primera rutina de ejercicio para el sistema"),e(),n(9,"button",5)(10,"mat-icon"),a(11,"add"),e(),a(12," Crear Primera Rutina "),e()()()())}function lt(i,o){if(i&1&&(n(0,"div",22),a(1),e()),i&2){let t=l().$implicit;c(),C(t.descripcion)}}function dt(i,o){if(i&1&&(n(0,"span",34),a(1),e()),i&2){let t=o.$implicit;c(),C(t.nombre)}}function mt(i,o){if(i&1&&(n(0,"span",35),a(1),e()),i&2){let t=l(2).$implicit;c(),p("+",t.etiquetas.length-2)}}function ut(i,o){if(i&1&&(n(0,"div",25),x(1,dt,2,1,"span",34,at),m(3,mt,2,1,"span",35),e()),i&2){let t=l().$implicit;c(),M(t.etiquetas.slice(0,2)),c(2),u(t.etiquetas.length>2?3:-1)}}function gt(i,o){i&1&&(n(0,"span",26),a(1,"Sin etiquetas"),e())}function pt(i,o){if(i&1){let t=P();n(0,"button",36),f("click",function(){v(t);let d=l().$implicit,s=l(2);return h(s.confirmarEliminar(d))}),n(1,"mat-icon"),a(2,"delete"),e()()}if(i&2){let t=l().$implicit;b("disabled",t.numeroUsuariosActivos&&t.numeroUsuariosActivos>0)}}function ft(i,o){if(i&1){let t=P();n(0,"button",37),f("click",function(){v(t);let d=l().$implicit,s=l(2);return h(s.activarRutina(d))}),n(1,"mat-icon"),a(2,"toggle_on"),e()()}}function _t(i,o){if(i&1&&(n(0,"tr",19)(1,"td",20)(2,"div",21),a(3),e(),m(4,lt,2,1,"div",22),e(),n(5,"td")(6,"span",23),a(7),e()(),n(8,"td")(9,"span",24),a(10),e()(),n(11,"td"),m(12,ut,4,1,"div",25)(13,gt,2,0,"span",26),e(),n(14,"td")(15,"span",27),a(16),e()(),n(17,"td",28),a(18),e(),n(19,"td",29)(20,"button",30)(21,"mat-icon"),a(22,"edit"),e()(),n(23,"button",31)(24,"mat-icon"),a(25,"fitness_center"),e()(),m(26,pt,3,1,"button",32)(27,ft,3,0,"button",33),e()()),i&2){let t=o.$implicit,r=l(2);O("inactive",!t.activo),c(3),C(t.nombre),c(),u(t.descripcion?4:-1),c(3),p("",t.duracionSemanas," Semanas"),c(2),k("data-nivel",t.nivelDificultad),c(),p(" ",r.formatearNivel(t.nivelDificultad)," "),c(2),u(t.etiquetas&&t.etiquetas.length>0?12:13),c(3),O("active",t.activo)("inactive",!t.activo),c(),p(" ",t.activo?"Activa":"Inactiva"," "),c(2),p(" ",r.formatearFecha(t.createdAt)," "),c(2),b("routerLink",w(17,ot,t.id)),c(3),b("routerLink",w(19,rt,t.id)),c(3),u(t.activo?26:27)}}function bt(i,o){if(i&1&&(n(0,"div",13)(1,"table",16)(2,"thead")(3,"tr")(4,"th"),a(5,"Nombre de la Rutina"),e(),n(6,"th"),a(7,"Duraci\xF3n"),e(),n(8,"th"),a(9,"Nivel"),e(),n(10,"th"),a(11,"Etiquetas"),e(),n(12,"th"),a(13,"Estado"),e(),n(14,"th"),a(15,"Creaci\xF3n"),e(),I(16,"th",17),e()(),n(17,"tbody"),x(18,_t,28,21,"tr",18,at),e()()()),i&2){let t=l();c(18),M(t.rutinasFiltradas())}}var it=class i{constructor(o,t,r){this.rutinaService=o;this.notificationService=t;this.router=r}loading=g(!1);isDeleting=g(!1);mostrarInactivas=g(!1);filtroNombre=g("");rutinasFiltradas=g([]);ngOnInit(){this.cargarRutinas()}cargarRutinas(){this.loading.set(!0),(this.mostrarInactivas()?this.rutinaService.obtenerRutinas():this.rutinaService.obtenerRutinasActivas()).subscribe({next:t=>{this.loading.set(!1),t.success&&t.data&&this.rutinasFiltradas.set(this.rutinaService.rutinas())},error:()=>{this.loading.set(!1),this.notificationService.showError("Error al cargar rutinas")}})}filtrarRutinas(){let o=this.filtroNombre().trim();if(!o){this.cargarRutinas();return}this.loading.set(!0),this.rutinaService.buscarRutinas(o).subscribe({next:t=>{this.loading.set(!1),t.success&&t.data&&this.rutinasFiltradas.set(this.rutinaService.rutinas())},error:()=>{this.loading.set(!1),this.notificationService.showError("Error al buscar rutinas")}})}confirmarEliminar(o){confirm(`\xBFEst\xE1s seguro de que deseas desactivar la rutina "${o.nombre}"?

La rutina quedar\xE1 inactiva pero podr\xE1s reactivarla m\xE1s tarde.`)&&(this.isDeleting.set(!0),this.rutinaService.desactivarRutina(o.id).subscribe({next:r=>{console.log("Rutina desactivada - Response:",r),this.notificationService.showSuccess("Rutina desactivada correctamente"),this.cargarRutinas()},error:r=>{console.error("Error al desactivar rutina:",r);let d=r.error?.message||r.error?.error||r.message||"Error al desactivar la rutina";console.log("Error message extracted:",d),this.notificationService.showError(d)},complete:()=>this.isDeleting.set(!1)}))}activarRutina(o){this.isDeleting.set(!0),this.rutinaService.activarRutina(o.id).subscribe({next:t=>{console.log("Rutina activada - Response:",t),this.notificationService.showSuccess("Rutina activada correctamente"),this.cargarRutinas()},error:t=>{console.error("Error al activar rutina:",t);let r=t.error?.message||t.error?.error||t.message||"Error al activar la rutina";console.log("Error message extracted:",r),this.notificationService.showError(r)},complete:()=>this.isDeleting.set(!1)})}formatearFecha(o){return o?new Date(o).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"}):"-"}formatearNivel(o){return{PRINCIPIANTE:"Principiante",INTERMEDIO:"Intermedio",AVANZADO:"Avanzado",EXPERTO:"Experto"}[o]||o}static \u0275fac=function(t){return new(t||i)(_(Y),_(U),_(F))};static \u0275cmp=y({type:i,selectors:[["app-lista-rutinas"]],decls:27,vars:5,consts:[[1,"page-container"],[1,"page-header"],[1,"header-content"],[1,"page-title"],[1,"page-subtitle"],["mat-raised-button","","color","primary","routerLink","/admin/rutinas/crear"],[1,"filters-card"],[1,"filters"],["appearance","outline",1,"search-field"],["matInput","","placeholder","Buscar por nombre...",3,"ngModelChange","ngModel"],["matPrefix",""],[3,"ngModelChange","ngModel"],[1,"loading-state"],[1,"table-container"],[1,"empty-state"],[1,"empty-icon"],[1,"rutinas-table"],[1,"actions-column"],[1,"rutina-row",3,"inactive"],[1,"rutina-row"],[1,"rutina-name-cell"],[1,"rutina-name"],[1,"rutina-desc"],[1,"duration-badge"],[1,"nivel-badge"],[1,"etiquetas-cell"],[1,"text-muted"],[1,"status-badge"],[1,"date-cell"],[1,"actions-cell"],["title","Editar rutina",1,"btn-icon",3,"routerLink"],["title","Agregar y organizar ejercicios (Drag & Drop)",1,"btn-icon","btn-ejercicios",3,"routerLink"],["title","Eliminar rutina",1,"btn-icon","btn-delete",3,"disabled"],["title","Activar rutina",1,"btn-icon","btn-success"],[1,"etiqueta-badge"],[1,"etiqueta-more"],["title","Eliminar rutina",1,"btn-icon","btn-delete",3,"click","disabled"],["title","Activar rutina",1,"btn-icon","btn-success",3,"click"]],template:function(t,r){t&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3)(4,"mat-icon"),a(5,"fitness_center"),e(),a(6," Gesti\xF3n de Rutinas de Ejercicio "),e(),n(7,"p",4),a(8,"Crea, edita y gestiona todas las rutinas de ejercicio desde aqu\xED."),e()(),n(9,"button",5)(10,"mat-icon"),a(11,"add"),e(),a(12," Crear Nueva Rutina "),e()(),n(13,"mat-card",6)(14,"mat-card-content")(15,"div",7)(16,"mat-form-field",8)(17,"mat-label"),a(18,"Buscar rutinas"),e(),n(19,"input",9),R("ngModelChange",function(s){return S(r.filtroNombre,s)||(r.filtroNombre=s),s}),f("ngModelChange",function(){return r.filtrarRutinas()}),e(),n(20,"mat-icon",10),a(21,"search"),e()(),n(22,"mat-checkbox",11),R("ngModelChange",function(s){return S(r.mostrarInactivas,s)||(r.mostrarInactivas=s),s}),f("ngModelChange",function(){return r.cargarRutinas()}),a(23," Mostrar rutinas inactivas "),e()()()(),m(24,ct,5,0,"div",12),m(25,st,13,0,"mat-card"),m(26,bt,20,0,"div",13),e()),t&2&&(c(19),E("ngModel",r.filtroNombre),c(3),E("ngModel",r.mostrarInactivas),c(2),u(r.loading()?24:-1),c(),u(!r.loading()&&r.rutinasFiltradas().length===0?25:-1),c(),u(!r.loading()&&r.rutinasFiltradas().length>0?26:-1))},dependencies:[N,L,B,q,j,V,G,X,Z,A,z,T,D,nt,et,K,H,J,tt,$,W,Q],styles:[".page-container[_ngcontent-%COMP%]{padding:2rem;max-width:1400px;margin:0 auto;min-height:100vh;background:#f8f9fa}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem;gap:2rem}.header-content[_ngcontent-%COMP%]{flex:1}.page-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;margin:0 0 .5rem;font-size:2rem;font-weight:700;color:#2d3748}.page-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:2rem;width:2rem;height:2rem;color:#667eea}.page-subtitle[_ngcontent-%COMP%]{margin:0;color:#718096;font-size:1rem}.filters-card[_ngcontent-%COMP%]{margin-bottom:2rem;border-radius:12px;box-shadow:0 2px 8px #0000001a}.filters[_ngcontent-%COMP%]{display:flex;gap:1.5rem;align-items:center;flex-wrap:wrap}.search-field[_ngcontent-%COMP%]{flex:1;min-width:300px}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000001a;overflow:hidden}.rutinas-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.rutinas-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.rutinas-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:1rem;text-align:left;font-weight:600;font-size:.875rem;letter-spacing:.05em;text-transform:uppercase}.rutinas-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #e2e8f0;transition:background .2s}.rutinas-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f7fafc}.rutinas-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.inactive[_ngcontent-%COMP%]{opacity:.6}.rutinas-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;color:#4a5568}.rutina-name-cell[_ngcontent-%COMP%]{font-weight:600;color:#2d3748;max-width:300px}.rutina-name[_ngcontent-%COMP%]{font-size:1rem;margin-bottom:.25rem}.rutina-desc[_ngcontent-%COMP%]{font-size:.875rem;color:#718096;font-weight:400;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.duration-badge[_ngcontent-%COMP%]{display:inline-block;padding:.375rem .75rem;background:#ebf8ff;color:#2c5282;border-radius:6px;font-size:.875rem;font-weight:600}.nivel-badge[_ngcontent-%COMP%]{display:inline-block;padding:.375rem .75rem;border-radius:6px;font-size:.875rem;font-weight:600}.nivel-badge[data-nivel=PRINCIPIANTE][_ngcontent-%COMP%]{background:#c6f6d5;color:#22543d}.nivel-badge[data-nivel=INTERMEDIO][_ngcontent-%COMP%]{background:#feebc8;color:#7c2d12}.nivel-badge[data-nivel=AVANZADO][_ngcontent-%COMP%]{background:#fed7d7;color:#742a2a}.nivel-badge[data-nivel=EXPERTO][_ngcontent-%COMP%]{background:#e9d8fd;color:#44337a}.etiquetas-cell[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.375rem}.etiqueta-badge[_ngcontent-%COMP%]{display:inline-block;padding:.25rem .625rem;background:#faf5ff;color:#6b46c1;border-radius:12px;font-size:.75rem;font-weight:600}.etiqueta-more[_ngcontent-%COMP%]{display:inline-block;padding:.25rem .5rem;background:#e2e8f0;color:#4a5568;border-radius:12px;font-size:.75rem;font-weight:600}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:.375rem .75rem;border-radius:6px;font-size:.875rem;font-weight:600;text-transform:capitalize}.status-badge.active[_ngcontent-%COMP%]{background:#c6f6d5;color:#22543d}.status-badge.inactive[_ngcontent-%COMP%]{background:#fed7d7;color:#742a2a}.date-cell[_ngcontent-%COMP%]{color:#718096;font-size:.875rem;white-space:nowrap}.text-muted[_ngcontent-%COMP%]{color:#a0aec0;font-style:italic}.actions-column[_ngcontent-%COMP%]{width:150px;text-align:right}.actions-cell[_ngcontent-%COMP%]{display:flex;gap:.5rem;justify-content:flex-end;align-items:center}.btn-icon[_ngcontent-%COMP%]{width:36px;height:36px;min-width:36px;padding:0;border:none;background:transparent;color:#4a5568;border-radius:6px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s}.btn-icon[_ngcontent-%COMP%]:hover:not(:disabled){background:#edf2f7;color:#2d3748}.btn-icon[_ngcontent-%COMP%]:disabled{opacity:.3;cursor:not-allowed}.btn-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.btn-icon.btn-delete[_ngcontent-%COMP%]{color:#e53e3e}.btn-icon.btn-delete[_ngcontent-%COMP%]:hover:not(:disabled){background:#fff5f5}.btn-icon.btn-success[_ngcontent-%COMP%]{color:#38a169}.btn-icon.btn-success[_ngcontent-%COMP%]:hover:not(:disabled){background:#f0fff4}.btn-icon.btn-ejercicios[_ngcontent-%COMP%]{color:#667eea;background:#f0f4ff;font-weight:600}.btn-icon.btn-ejercicios[_ngcontent-%COMP%]:hover:not(:disabled){background:#667eea;color:#fff;transform:scale(1.05)}.btn-icon.btn-ejercicios[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-weight:700}.loading-state[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem;background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000001a}.loading-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:3rem;width:3rem;height:3rem;color:#cbd5e0;margin-bottom:1rem;animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.5}}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#718096;font-size:1rem}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem}.empty-icon[_ngcontent-%COMP%]{font-size:4rem;width:4rem;height:4rem;color:#cbd5e0;margin:0 auto 1.5rem}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .5rem;font-size:1.5rem;font-weight:600;color:#2d3748}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#718096;margin-bottom:2rem;font-size:1rem}@media (max-width: 1024px){.table-container[_ngcontent-%COMP%]{overflow-x:auto}.rutinas-table[_ngcontent-%COMP%]{min-width:900px}}@media (max-width: 768px){.page-container[_ngcontent-%COMP%]{padding:1rem}.page-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:1rem}.page-title[_ngcontent-%COMP%]{font-size:1.5rem}.filters[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.search-field[_ngcontent-%COMP%]{width:100%}}"]})};export{it as ListaRutinasComponent};
