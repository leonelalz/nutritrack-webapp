import{a as y}from"./chunk-KI3L427B.js";import{b as E,c as F,e as C,g as k,h as D,k as z,m as L,o as N,v as T,x as A}from"./chunk-M75YHKAC.js";import{a as j}from"./chunk-ILKCMMAD.js";import"./chunk-6ULEJF3H.js";import{c as O,d as S}from"./chunk-LBN5CU62.js";import"./chunk-NZVHEJ25.js";import{Db as b,Fb as h,Kc as w,Na as d,Rb as v,Tb as n,Ub as P,Z as m,_a as M,na as g,nb as s,ob as p,tb as _,ub as e,vb as t,wb as u}from"./chunk-N5FZ7NRP.js";import"./chunk-2VMXMS7J.js";function R(o,a){o&1&&n(0," El correo es requerido ")}function I(o,a){o&1&&n(0," Ingresa un correo v\xE1lido ")}function G(o,a){if(o&1&&(e(0,"span",20),s(1,R,1,0)(2,I,1,0),t()),o&2){let r,i=h();d(),p(!((r=i.loginForm.get("email"))==null||r.errors==null)&&r.errors.required?1:!((r=i.loginForm.get("email"))==null||r.errors==null)&&r.errors.email?2:-1)}}function B(o,a){o&1&&n(0," \u{1F441}\uFE0F ")}function V(o,a){o&1&&n(0," \u{1F441}\uFE0F\u200D\u{1F5E8}\uFE0F ")}function Y(o,a){o&1&&(e(0,"span",20),n(1,"La contrase\xF1a es requerida"),t())}function H(o,a){if(o&1&&(e(0,"div",28)(1,"span",32),n(2,"\u26A0\uFE0F"),t(),e(3,"span"),n(4),t()()),o&2){let r=h();d(4),P(r.errorMessage())}}function J(o,a){o&1&&(u(0,"span",33),e(1,"span"),n(2,"Ingresando..."),t())}function K(o,a){o&1&&(e(0,"span"),n(1,"Iniciar Sesi\xF3n"),t())}var q=class o{fb=m(T);authService=m(y);router=m(O);perfilService=m(j);loading=g(!1);errorMessage=g("");showPassword=g(!1);emailFocused=g(!1);loginForm=this.fb.group({email:["",[C.required,C.email]],password:["",C.required],rememberMe:[!1]});togglePassword(){this.showPassword.update(a=>!a)}onSubmit(){if(this.loginForm.valid){this.loading.set(!0),this.errorMessage.set("");let a={email:this.loginForm.value.email,password:this.loginForm.value.password};this.authService.login(a).subscribe({next:()=>{this.perfilService.obtenerPerfilSalud().subscribe(r=>{if(this.authService.isAdmin())this.router.navigate(["/admin/dashboard"]);else{let l=r.data;if(!l||!l.objetivoActual||!l.nivelActividadActual){this.router.navigate(["/onboarding"]);return}this.router.navigate(["/dashboard"])}})},error:()=>{this.errorMessage.set("Credenciales incorrectas. Por favor, verifica tus datos."),this.loading.set(!1)}})}}static \u0275fac=function(r){return new(r||o)};static \u0275cmp=M({type:o,selectors:[["app-login"]],decls:79,vars:14,consts:[[1,"login-container"],[1,"login-wrapper"],[1,"login-sidebar"],[1,"pattern-overlay"],[1,"sidebar-content"],[1,"brand-header"],[1,"brand-icon"],[1,"brand-name"],[1,"sidebar-info"],[1,"sidebar-title"],[1,"sidebar-description"],[1,"features-list"],[1,"feature-item"],[1,"feature-icon"],[1,"login-form-container"],[1,"form-header"],[3,"ngSubmit","formGroup"],[1,"form-content"],[1,"form-group"],["type","email","formControlName","email","placeholder","tu@email.com",1,"form-input",3,"focus","blur"],[1,"error-text"],[1,"password-wrapper"],["formControlName","password","placeholder","Tu contrase\xF1a",1,"form-input",3,"type"],["type","button",1,"toggle-password",3,"click"],[1,"form-options"],[1,"remember-me"],["type","checkbox","formControlName","rememberMe"],["href","#",1,"forgot-password"],[1,"alert-error"],["type","submit",1,"btn-primary",3,"disabled"],[1,"register-link"],["routerLink","/register"],[1,"alert-icon"],[1,"spinner"]],template:function(r,i){if(r&1&&(e(0,"div",0)(1,"div",1)(2,"div",2),u(3,"div",3),e(4,"div",4)(5,"div",5)(6,"div",6),n(7,"\u{1F957}"),t(),e(8,"h2",7),n(9,"Nutritrack"),t()(),e(10,"div",8)(11,"h3",9),n(12,"\xA1Bienvenido de vuelta!"),t(),e(13,"p",10),n(14," Contin\xFAa tu viaje hacia una vida m\xE1s saludable con el seguimiento nutricional m\xE1s completo. "),t()(),e(15,"div",11)(16,"div",12)(17,"div",13),n(18,"\u2713"),t(),e(19,"span"),n(20,"Seguimiento completo de calor\xEDas y nutrientes"),t()(),e(21,"div",12)(22,"div",13),n(23,"\u2713"),t(),e(24,"span"),n(25,"An\xE1lisis personalizado de tu progreso"),t()(),e(26,"div",12)(27,"div",13),n(28,"\u2713"),t(),e(29,"span"),n(30,"Base de datos con miles de alimentos"),t()(),e(31,"div",12)(32,"div",13),n(33,"\u2713"),t(),e(34,"span"),n(35,"Reportes detallados y metas personalizadas"),t()(),e(36,"div",12)(37,"div",13),n(38,"\u2713"),t(),e(39,"span"),n(40,"Sincronizaci\xF3n en todos tus dispositivos"),t()()()()(),e(41,"div",14)(42,"div",15)(43,"h1"),n(44,"Iniciar Sesi\xF3n"),t(),e(45,"p"),n(46,"Ingresa tus credenciales para acceder a tu cuenta"),t()(),e(47,"form",16),b("ngSubmit",function(){return i.onSubmit()}),e(48,"div",17)(49,"div",18)(50,"label"),n(51,"Correo Electr\xF3nico"),t(),e(52,"input",19),b("focus",function(){return i.emailFocused.set(!0)})("blur",function(){return i.emailFocused.set(!1)}),t(),s(53,G,3,1,"span",20),t(),e(54,"div",18)(55,"label"),n(56,"Contrase\xF1a"),t(),e(57,"div",21),u(58,"input",22),e(59,"button",23),b("click",function(){return i.togglePassword()}),s(60,B,1,0)(61,V,1,0),t()(),s(62,Y,2,0,"span",20),t(),e(63,"div",24)(64,"label",25),u(65,"input",26),e(66,"span"),n(67,"Recordarme"),t()(),e(68,"a",27),n(69,"\xBFOlvidaste tu contrase\xF1a?"),t()()(),s(70,H,5,1,"div",28),e(71,"button",29),s(72,J,3,0)(73,K,2,0,"span"),t(),e(74,"div",30)(75,"span"),n(76,"\xBFNo tienes una cuenta?"),t(),e(77,"a",31),n(78,"Reg\xEDstrate aqu\xED"),t()()()()()()),r&2){let l,c,f,x;d(47),_("formGroup",i.loginForm),d(5),v("focused",i.emailFocused())("error",((l=i.loginForm.get("email"))==null?null:l.invalid)&&((l=i.loginForm.get("email"))==null?null:l.touched)),d(),p((c=i.loginForm.get("email"))!=null&&c.invalid&&((c=i.loginForm.get("email"))!=null&&c.touched)?53:-1),d(5),v("error",((f=i.loginForm.get("password"))==null?null:f.invalid)&&((f=i.loginForm.get("password"))==null?null:f.touched)),_("type",i.showPassword()?"text":"password"),d(2),p(i.showPassword()?60:61),d(2),p((x=i.loginForm.get("password"))!=null&&x.invalid&&((x=i.loginForm.get("password"))!=null&&x.touched)?62:-1),d(8),p(i.errorMessage()?70:-1),d(),_("disabled",i.loginForm.invalid||i.loading()),d(),p(i.loading()?72:73)}},dependencies:[w,A,z,F,E,k,D,L,N,S],styles:['.login-container[_ngcontent-%COMP%]{min-height:100vh;padding:100px 32px;display:flex;justify-content:center;align-items:center}.login-wrapper[_ngcontent-%COMP%]{width:100%;max-width:900px;min-height:600px;background:#fff;box-shadow:0 20px 40px #0000001a;border-radius:20px;display:grid;grid-template-columns:1fr 1fr;overflow:hidden}.login-sidebar[_ngcontent-%COMP%]{background:linear-gradient(123deg,#28a745,#20c997);padding:60px 40px;position:relative;overflow:hidden}.pattern-overlay[_ngcontent-%COMP%]{position:absolute;top:-347px;left:-225px;width:900px;height:1388px;pointer-events:none}.pattern-overlay[_ngcontent-%COMP%]:before, .pattern-overlay[_ngcontent-%COMP%]:after{content:"";position:absolute;background:#ffffff1a}.pattern-overlay[_ngcontent-%COMP%]:before{width:36px;height:36px;top:509px;left:387px}.pattern-overlay[_ngcontent-%COMP%]:after{width:27px;height:27px;top:693px;left:931px;background:#ffffff26}.sidebar-content[_ngcontent-%COMP%]{position:relative;z-index:1;display:flex;flex-direction:column;gap:24px}.brand-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.brand-icon[_ngcontent-%COMP%]{width:50px;height:50px;background:#fff3;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:40px}.brand-name[_ngcontent-%COMP%]{color:#fff;font-size:36px;font-weight:700;margin:0}.sidebar-info[_ngcontent-%COMP%]{margin-top:20px}.sidebar-title[_ngcontent-%COMP%]{color:#fff;font-size:24px;font-weight:700;line-height:1.3;margin:0 0 16px}.sidebar-description[_ngcontent-%COMP%]{color:#fff;font-size:16px;line-height:1.5;opacity:.9;margin:0}.features-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px;margin-top:40px}.feature-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;color:#fff;font-size:14px}.feature-icon[_ngcontent-%COMP%]{width:24px;height:24px;background:#fff3;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:14px;font-weight:700;flex-shrink:0}.login-form-container[_ngcontent-%COMP%]{padding:60px 40px;display:flex;flex-direction:column;justify-content:center}.form-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:32px}.form-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#333;font-size:28px;font-weight:700;margin:0 0 8px}.form-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6c757d;font-size:14px;margin:0}.form-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;margin-bottom:24px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}label[_ngcontent-%COMP%]{color:#333;font-size:14px;font-weight:700}.form-input[_ngcontent-%COMP%]{width:100%;padding:16px 18px;background:#f8f9fa;border:2px solid #E9ECEF;border-radius:12px;font-size:15px;color:#333;transition:all .3s ease;box-sizing:border-box}.form-input[_ngcontent-%COMP%]::placeholder{color:#757575}.form-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#28a745;background:#fff;box-shadow:0 0 0 3px #28a7451a}.form-input.focused[_ngcontent-%COMP%]{border-color:#28a745;background:#fff;box-shadow:0 0 0 3px #28a7451a}.form-input.error[_ngcontent-%COMP%]{border-color:#dc3545}.password-wrapper[_ngcontent-%COMP%]{position:relative}.toggle-password[_ngcontent-%COMP%]{position:absolute;right:12px;top:50%;transform:translateY(-50%);background:none;border:none;cursor:pointer;font-size:18px;padding:4px;color:#6c757d}.error-text[_ngcontent-%COMP%]{color:#dc3545;font-size:12px;font-weight:500;margin-top:-4px}.form-options[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.remember-me[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer;color:#333;font-size:14px;font-weight:400}.remember-me[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:13px;height:13px;border:1px solid #767676;border-radius:2.5px;cursor:pointer}.forgot-password[_ngcontent-%COMP%]{color:#28a745;text-decoration:none;font-size:14px;font-weight:500;transition:color .3s ease}.forgot-password[_ngcontent-%COMP%]:hover{color:#20c997;text-decoration:underline}.alert-error[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:14px 18px;background:#ffe5e8;border:1px solid #FFCCD3;border-radius:12px;color:#dc3545;font-size:13px;margin-bottom:20px}.alert-icon[_ngcontent-%COMP%]{font-size:20px}.btn-primary[_ngcontent-%COMP%]{width:100%;padding:14px;background:linear-gradient(173deg,#28a745,#20c997);color:#fff;border:none;border-radius:12px;font-size:16px;font-weight:700;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;gap:8px;margin-bottom:24px}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 8px 16px #28a7454d}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.spinner[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid white;border-top-color:transparent;border-radius:50%;animation:_ngcontent-%COMP%_spin .6s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.register-link[_ngcontent-%COMP%]{text-align:center;color:#6c757d;font-size:14px}.register-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#28a745;text-decoration:none;font-weight:700;margin-left:4px}.register-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}@media (max-width: 992px){.login-wrapper[_ngcontent-%COMP%]{grid-template-columns:1fr;max-width:500px}.login-sidebar[_ngcontent-%COMP%]{display:none}}@media (max-width: 640px){.login-container[_ngcontent-%COMP%]{padding:40px 16px}.login-form-container[_ngcontent-%COMP%]{padding:40px 24px}.form-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px}}']})};export{q as LoginComponent};
