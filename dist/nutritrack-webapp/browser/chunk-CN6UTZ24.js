import{a as A}from"./chunk-Y4ECP4HO.js";import{a as q}from"./chunk-SMVVNKRT.js";import{c as O,e as c,g as N,h as w,k as D,l as I,m as F,n as j,o as G,t as k,u as R,w as V}from"./chunk-2VZLF2MU.js";import"./chunk-6LZ2YNEV.js";import{d as _,f as M,g as y}from"./chunk-7Q5XKRGT.js";import{$ as v,Ka as l,Mb as n,Ob as S,Pa as a,Va as x,aa as C,ib as u,jb as p,ka as s,nb as f,ob as i,pb as e,qb as d,ub as h,wb as P,xc as E,yb as g}from"./chunk-FVUT7SF7.js";import"./chunk-2VMXMS7J.js";function T(o,r){o&1&&(i(0,"div",3),n(1,"Cargando plan..."),e())}function B(o,r){if(o&1){let t=h();i(0,"form",5),P("ngSubmit",function(){v(t);let b=g();return C(b.guardar())}),i(1,"div",6)(2,"label"),n(3,"Nombre "),i(4,"span",7),n(5,"*"),e()(),d(6,"input",8),e(),i(7,"div",6)(8,"label"),n(9,"Descripci\xF3n "),i(10,"span",7),n(11,"*"),e()(),d(12,"textarea",9),e(),i(13,"div",6)(14,"label"),n(15,"Duraci\xF3n (d\xEDas) "),i(16,"span",7),n(17,"*"),e()(),d(18,"input",10),e(),i(19,"div",11)(20,"h3"),n(21,"Objetivos"),e(),i(22,"div",12)(23,"div",6)(24,"label"),n(25,"Calor\xEDas"),e(),d(26,"input",13),e(),i(27,"div",6)(28,"label"),n(29,"Prote\xEDnas (g)"),e(),d(30,"input",14),e()()(),i(31,"div",15)(32,"button",16),n(33,"Cancelar"),e(),i(34,"button",17),n(35),e()()()}if(o&2){let t=g();f("formGroup",t.formulario),l(34),f("disabled",t.formulario.invalid||t.guardando()),l(),S(" ",t.guardando()?"Guardando...":"Guardar Cambios"," ")}}var z=class o{constructor(r,t,m,b,L){this.fb=r;this.route=t;this.router=m;this.planService=b;this.notificationService=L}formulario;cargando=s(!0);guardando=s(!1);planId;ngOnInit(){this.planId=Number(this.route.snapshot.paramMap.get("id")),this.cargarPlan()}cargarPlan(){this.planService.obtenerPlanPorId(this.planId).subscribe({next:r=>{if(r.success&&r.data){let t=r.data;this.formulario=this.fb.group({nombre:[t.nombre,c.required],descripcion:[t.descripcion,c.required],duracionDias:[t.duracionDias,c.required]}),this.cargando.set(!1)}},error:()=>{this.notificationService.showError("Error al cargar plan"),this.router.navigate(["/admin/planes"])}})}guardar(){this.formulario.invalid||(this.guardando.set(!0),this.planService.actualizarPlan(this.planId,this.formulario.value).subscribe({next:r=>{r.success&&(this.notificationService.showSuccess("Plan actualizado"),this.router.navigate(["/admin/planes"]))},error:()=>{this.guardando.set(!1),this.notificationService.showError("Error al actualizar")}}))}static \u0275fac=function(t){return new(t||o)(a(R),a(_),a(M),a(A),a(q))};static \u0275cmp=x({type:o,selectors:[["app-editar-plan"]],decls:8,vars:2,consts:[[1,"editar-plan-container"],[1,"header"],["routerLink","/admin/planes",1,"btn-link"],[1,"loading"],[1,"form",3,"formGroup"],[1,"form",3,"ngSubmit","formGroup"],[1,"form-group"],[1,"required"],["type","text","formControlName","nombre"],["formControlName","descripcion","rows","4"],["type","number","formControlName","duracionDias","min","1"],["formGroupName","objetivo"],[1,"form-row"],["type","number","formControlName","caloriasObjetivo"],["type","number","formControlName","proteinasObjetivo"],[1,"form-actions"],["type","button","routerLink","/admin/planes",1,"btn-secondary"],["type","submit",1,"btn-primary",3,"disabled"]],template:function(t,m){t&1&&(i(0,"div",0)(1,"div",1)(2,"h1"),n(3,"Editar Plan"),e(),i(4,"button",2),n(5,"\u2190 Volver"),e()(),u(6,T,2,0,"div",3),u(7,B,36,3,"form",4),e()),t&2&&(l(6),p(m.cargando()?6:-1),l(),p(!m.cargando()&&m.formulario?7:-1))},dependencies:[E,y,V,D,O,I,N,w,k,F,G,j],styles:[".editar-plan-container[_ngcontent-%COMP%]{padding:2rem;max-width:900px;margin:0 auto}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:2rem}h1[_ngcontent-%COMP%]{font-size:2rem;color:#2d3748}.btn-link[_ngcontent-%COMP%]{background:none;border:none;color:#667eea;font-weight:600;cursor:pointer}.form[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:12px;box-shadow:0 2px 8px #0000001a}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem}label[_ngcontent-%COMP%]{display:block;font-weight:600;color:#4a5568;margin-bottom:.5rem}.required[_ngcontent-%COMP%]{color:#e53e3e}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid #e2e8f0;border-radius:8px}.form-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:flex-end;margin-top:2rem}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]{padding:.75rem 2rem;border:none;border-radius:8px;font-weight:600;cursor:pointer}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.btn-secondary[_ngcontent-%COMP%]{background:#edf2f7;color:#4a5568}.loading[_ngcontent-%COMP%]{text-align:center;padding:3rem}"]})};export{z as EditarPlanComponent};
