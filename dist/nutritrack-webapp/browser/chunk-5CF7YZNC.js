import{a as U}from"./chunk-YUW6ET6K.js";import{a as $}from"./chunk-SMVVNKRT.js";import{c as D,g as F,j as V,p as z,q as W,r as j,v as q}from"./chunk-2VZLF2MU.js";import"./chunk-6LZ2YNEV.js";import{g as I}from"./chunk-7Q5XKRGT.js";import{$ as p,Jb as L,Ka as r,Lb as w,Mb as o,Nb as C,Ob as b,Pa as O,Pb as A,Qb as x,Rb as M,Sb as h,Ub as k,Va as R,Vb as N,aa as _,ib as m,jb as u,ka as v,lb as P,mb as S,nb as E,ob as i,pb as n,qb as y,ub as f,wb as g,xc as T,yb as d}from"./chunk-FVUT7SF7.js";import"./chunk-2VMXMS7J.js";var Y=()=>["/metas/mis-asignaciones"],Z=a=>["/catalogo/rutinas",a],G=(a,e)=>e.id;function H(a,e){a&1&&(i(0,"div",19)(1,"p"),o(2,"Cargando rutinas..."),n()())}function J(a,e){a&1&&(i(0,"div",20)(1,"p"),o(2,"No se encontraron rutinas con los filtros seleccionados"),n()())}function K(a,e){if(a&1&&(i(0,"span",41),o(1),n()),a&2){let t=d().$implicit,s=d(2);w("estado-"+t.estado.toLowerCase()),r(),b(" ",s.formatearEstado(t.estado)," ")}}function Q(a,e){a&1&&(i(0,"span",27),o(1,"Disponible"),n())}function X(a,e){if(a&1&&(i(0,"div",30)(1,"span",31),o(2,"Progreso:"),n(),i(3,"span",32),o(4),n()()),a&2){let t=d().$implicit;r(4),A("",t.diaActual,"/",t.diasTotales," d\xEDas")}}function tt(a,e){if(a&1&&(i(0,"div",33)(1,"div",42)(2,"span"),o(3,"Progreso"),n(),i(4,"span",43),o(5),n()(),i(6,"div",44),y(7,"div",45),n()()),a&2){let t=d().$implicit;r(5),b("",t.porcentajeCompletado,"%"),r(2),L("width",t.porcentajeCompletado,"%")}}function et(a,e){if(a&1&&(i(0,"span",35),o(1),n()),a&2){let t=e.$implicit;r(),C(t.nombre)}}function nt(a,e){if(a&1){let t=f();i(0,"button",46),g("click",function(){p(t);let c=d().$implicit,l=d(2);return _(l.activarRutina(c))}),o(1," Activar Rutina "),n()}}function it(a,e){if(a&1){let t=f();i(0,"button",47),g("click",function(){p(t);let c=d().$implicit,l=d(2);return _(l.pausarRutina(c.asignacionId))}),o(1," Pausar "),n()}}function at(a,e){if(a&1){let t=f();i(0,"button",47),g("click",function(){p(t);let c=d().$implicit,l=d(2);return _(l.reanudarRutina(c.asignacionId))}),o(1," Reanudar "),n()}}function ot(a,e){if(a&1){let t=f();i(0,"button",48),g("click",function(){p(t);let c=d().$implicit,l=d(2);return _(l.cancelarRutina(c.asignacionId))}),o(1," Cancelar "),n()}}function rt(a,e){if(a&1&&(i(0,"div",22)(1,"div",23)(2,"h3"),o(3),n(),i(4,"div",24)(5,"span",25),o(6),n(),m(7,K,2,3,"span",26)(8,Q,2,0,"span",27),n()(),i(9,"p",28),o(10),n(),i(11,"div",29)(12,"div",30)(13,"span",31),o(14,"Duraci\xF3n:"),n(),i(15,"span",32),o(16),n()(),i(17,"div",30)(18,"span",31),o(19,"Sesiones/Semana:"),n(),i(20,"span",32),o(21),n()(),m(22,X,5,2,"div",30),n(),m(23,tt,8,3,"div",33),i(24,"div",34),P(25,et,2,1,"span",35,G),n(),i(27,"div",36)(28,"button",37),o(29," Ver Detalles "),n(),m(30,nt,2,0,"button",38),m(31,it,2,0,"button",39),m(32,at,2,0,"button",39),m(33,ot,2,0,"button",40),n()()),a&2){let t=e.$implicit,s=d(2);r(3),C(t.nombre),r(2),w("nivel-"+t.nivel.toLowerCase()),r(),b(" ",s.formatearNivel(t.nivel)," "),r(),u(t.estado?7:8),r(3),C(t.descripcion),r(6),b("",t.duracionMinutos," min"),r(5),C(t.sesionasSemanales),r(),u(t.estado&&t.diaActual?22:-1),r(),u(t.porcentajeCompletado!==void 0?23:-1),r(2),S(t.etiquetas),r(3),E("routerLink",N(15,Z,t.id)),r(2),u(!t.estado||t.estado==="CANCELADO"||t.estado==="COMPLETADO"?30:-1),r(),u(t.estado==="ACTIVO"?31:-1),r(),u(t.estado==="PAUSADO"?32:-1),r(),u(t.estado==="ACTIVO"||t.estado==="PAUSADO"?33:-1)}}function st(a,e){if(a&1&&(i(0,"div",21),P(1,rt,34,17,"div",22,G),n()),a&2){let t=d();r(),S(t.rutinasFiltradas())}}var B=class a{constructor(e,t){this.metasService=e;this.notificationService=t}loading=v(!1);filtroNombre="";filtroNivel="";filtroEstado="";rutinas=v([]);rutinasFiltradas=v([]);ngOnInit(){this.cargarRutinas()}cargarRutinas(){this.loading.set(!0),this.metasService.obtenerTodasLasRutinasDeUsuario().subscribe({next:e=>{this.loading.set(!1),e.success&&(this.rutinas.set(e.data||[]),this.filtrarRutinas())},error:()=>{this.loading.set(!1),this.notificationService.showError("Error al cargar rutinas")}})}filtrarRutinas(){let e=this.rutinas();if(this.filtroNombre){let t=this.filtroNombre.toLowerCase();e=e.filter(s=>s.nombre.toLowerCase().includes(t)||s.descripcion.toLowerCase().includes(t))}this.filtroNivel&&(e=e.filter(t=>t.nivel===this.filtroNivel)),this.filtroEstado&&(this.filtroEstado==="NO_ASIGNADO"?e=e.filter(t=>!t.estado):e=e.filter(t=>t.estado===this.filtroEstado)),this.rutinasFiltradas.set(e)}activarRutina(e){this.metasService.activarRutina({rutinaId:e.id}).subscribe({next:t=>{t.success&&(this.notificationService.showSuccess(`Rutina "${e.nombre}" activada exitosamente`),this.cargarRutinas())},error:t=>{this.notificationService.showError(t.error?.message||"Error al activar la rutina")}})}pausarRutina(e){this.metasService.pausarRutina(e).subscribe({next:()=>{this.notificationService.showSuccess("Rutina pausada"),this.cargarRutinas()},error:()=>this.notificationService.showError("Error al pausar rutina")})}reanudarRutina(e){this.metasService.reanudarRutina(e).subscribe({next:()=>{this.notificationService.showSuccess("Rutina reanudada"),this.cargarRutinas()},error:()=>this.notificationService.showError("Error al reanudar rutina")})}cancelarRutina(e){this.metasService.cancelarRutina(e).subscribe({next:()=>{this.notificationService.showSuccess("Rutina cancelada"),this.cargarRutinas()},error:()=>this.notificationService.showError("Error al cancelar rutina")})}formatearNivel(e){return{PRINCIPIANTE:"Principiante",INTERMEDIO:"Intermedio",AVANZADO:"Avanzado"}[e]||e}formatearEstado(e){return{ACTIVO:"Activo",PAUSADO:"Pausado",COMPLETADO:"Completado",CANCELADO:"Cancelado"}[e]||e}static \u0275fac=function(t){return new(t||a)(O(U),O($))};static \u0275cmp=R({type:a,selectors:[["app-catalogo-lista-rutinas"]],decls:38,vars:8,consts:[[1,"catalogo-rutinas-container"],[1,"header"],[1,"btn-back",3,"routerLink"],[1,"subtitle"],[1,"filters"],[1,"search-box"],["type","text","placeholder","Buscar por nombre...",3,"ngModelChange","ngModel"],[1,"filter-nivel"],[3,"ngModelChange","ngModel"],["value",""],["value","PRINCIPIANTE"],["value","INTERMEDIO"],["value","AVANZADO"],[1,"filter-estado"],["value","ACTIVO"],["value","PAUSADO"],["value","COMPLETADO"],["value","CANCELADO"],["value","NO_ASIGNADO"],[1,"loading"],[1,"empty-state"],[1,"rutinas-grid"],[1,"rutina-card"],[1,"rutina-header"],[1,"badges"],[1,"badge-nivel"],[1,"estado-badge",3,"class"],[1,"estado-badge","estado-disponible"],[1,"rutina-description"],[1,"rutina-stats"],[1,"stat"],[1,"stat-label"],[1,"stat-value"],[1,"progress-section"],[1,"rutina-etiquetas"],[1,"etiqueta"],[1,"rutina-actions"],[1,"btn-primary",3,"routerLink"],[1,"btn-activate"],[1,"btn-secondary"],[1,"btn-danger"],[1,"estado-badge"],[1,"progress-text"],[1,"percentage"],[1,"progress-bar"],[1,"progress-fill"],[1,"btn-activate",3,"click"],[1,"btn-secondary",3,"click"],[1,"btn-danger",3,"click"]],template:function(t,s){t&1&&(i(0,"div",0)(1,"div",1)(2,"button",2),o(3," \u2190 Volver a Mis Asignaciones "),n(),i(4,"h1"),o(5,"Todas las Rutinas de Ejercicio"),n(),i(6,"p",3),o(7,"Explora todas las rutinas disponibles y gestiona tus asignaciones"),n()(),i(8,"div",4)(9,"div",5)(10,"input",6),h("ngModelChange",function(l){return M(s.filtroNombre,l)||(s.filtroNombre=l),l}),g("ngModelChange",function(){return s.filtrarRutinas()}),n()(),i(11,"div",7)(12,"select",8),h("ngModelChange",function(l){return M(s.filtroNivel,l)||(s.filtroNivel=l),l}),g("ngModelChange",function(){return s.filtrarRutinas()}),i(13,"option",9),o(14,"Todos los niveles"),n(),i(15,"option",10),o(16,"Principiante"),n(),i(17,"option",11),o(18,"Intermedio"),n(),i(19,"option",12),o(20,"Avanzado"),n()()(),i(21,"div",13)(22,"select",8),h("ngModelChange",function(l){return M(s.filtroEstado,l)||(s.filtroEstado=l),l}),g("ngModelChange",function(){return s.filtrarRutinas()}),i(23,"option",9),o(24,"Todos los estados"),n(),i(25,"option",14),o(26,"Activos"),n(),i(27,"option",15),o(28,"Pausados"),n(),i(29,"option",16),o(30,"Completados"),n(),i(31,"option",17),o(32,"Cancelados"),n(),i(33,"option",18),o(34,"No Asignados"),n()()()(),m(35,H,3,0,"div",19),m(36,J,3,0,"div",20),m(37,st,3,0,"div",21),n()),t&2&&(r(2),E("routerLink",k(7,Y)),r(8),x("ngModel",s.filtroNombre),r(2),x("ngModel",s.filtroNivel),r(10),x("ngModel",s.filtroEstado),r(13),u(s.loading()?35:-1),r(),u(!s.loading()&&s.rutinasFiltradas().length===0?36:-1),r(),u(!s.loading()&&s.rutinasFiltradas().length>0?37:-1))},dependencies:[T,I,q,W,j,D,z,F,V],styles:[".catalogo-rutinas-container[_ngcontent-%COMP%]{padding:2rem;max-width:1400px;margin:0 auto}.header[_ngcontent-%COMP%]{margin-bottom:2rem;text-align:center;position:relative}.btn-back[_ngcontent-%COMP%]{position:absolute;left:0;top:0;padding:.625rem 1.25rem;background:#edf2f7;color:#4a5568;border:none;border-radius:8px;font-weight:600;cursor:pointer;font-size:.875rem;transition:all .2s}.btn-back[_ngcontent-%COMP%]:hover{background:#e2e8f0;transform:translate(-2px)}h1[_ngcontent-%COMP%]{font-size:2.5rem;color:#2d3748;margin:0 0 .5rem}.subtitle[_ngcontent-%COMP%]{color:#718096;font-size:1.125rem;margin:0}.filters[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:2rem;align-items:center;flex-wrap:wrap}.search-box[_ngcontent-%COMP%]{flex:1;min-width:250px}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid #e2e8f0;border-radius:8px;font-size:1rem}.filter-nivel[_ngcontent-%COMP%], .filter-estado[_ngcontent-%COMP%]{min-width:200px}.filter-nivel[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .filter-estado[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid #e2e8f0;border-radius:8px;font-size:1rem;background-color:#fff}.rutinas-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:1.5rem}.rutina-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:1.5rem;box-shadow:0 2px 8px #0000001a;transition:transform .2s,box-shadow .2s;display:flex;flex-direction:column}.rutina-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 4px 16px #00000026}.rutina-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:start;margin-bottom:1rem;gap:1rem}.rutina-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;color:#2d3748;flex:1}.badges[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;align-items:flex-end}.badge-nivel[_ngcontent-%COMP%], .estado-badge[_ngcontent-%COMP%]{padding:.25rem .75rem;border-radius:20px;font-size:.75rem;font-weight:600;white-space:nowrap}.badge-nivel.nivel-principiante[_ngcontent-%COMP%]{background:#c6f6d5;color:#22543d}.badge-nivel.nivel-intermedio[_ngcontent-%COMP%]{background:#bee3f8;color:#2c5282}.badge-nivel.nivel-avanzado[_ngcontent-%COMP%]{background:#fbd38d;color:#7c2d12}.estado-badge.estado-activo[_ngcontent-%COMP%]{background:#c6f6d5;color:#22543d}.estado-badge.estado-pausado[_ngcontent-%COMP%]{background:#bee3f8;color:#2c5282}.estado-badge.estado-completado[_ngcontent-%COMP%]{background:#c6f6d5;color:#22543d}.estado-badge.estado-cancelado[_ngcontent-%COMP%]{background:#fed7d7;color:#742a2a}.estado-badge.estado-disponible[_ngcontent-%COMP%]{background:#48bb78;color:#fff}.rutina-description[_ngcontent-%COMP%]{color:#718096;margin-bottom:1rem;line-height:1.5}.rutina-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:.75rem;margin-bottom:1rem;padding:1rem;background:#f7fafc;border-radius:8px}.stat[_ngcontent-%COMP%]{display:flex;flex-direction:column}.stat-label[_ngcontent-%COMP%]{font-size:.875rem;color:#718096;margin-bottom:.25rem}.stat-value[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#2d3748}.progress-section[_ngcontent-%COMP%]{margin-bottom:1rem}.progress-text[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem;font-size:.875rem;color:#718096}.percentage[_ngcontent-%COMP%]{font-weight:600;color:#2d3748}.progress-bar[_ngcontent-%COMP%]{width:100%;height:8px;background:#e2e8f0;border-radius:10px;overflow:hidden}.progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#48bb78,#38a169);transition:width .3s ease}.rutina-etiquetas[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;margin-bottom:1rem}.etiqueta[_ngcontent-%COMP%]{padding:.25rem .75rem;background:#edf2f7;color:#4a5568;border-radius:20px;font-size:.875rem}.rutina-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;flex-wrap:wrap;margin-top:auto}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%], .btn-danger[_ngcontent-%COMP%], .btn-activate[_ngcontent-%COMP%]{padding:.5rem 1rem;border:none;border-radius:8px;font-weight:600;cursor:pointer;transition:all .2s;font-size:.75rem;flex:1;min-width:90px}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #667eea66}.btn-activate[_ngcontent-%COMP%]{background:#48bb78;color:#fff}.btn-activate[_ngcontent-%COMP%]:hover{background:#38a169}.btn-secondary[_ngcontent-%COMP%]{background:#edf2f7;color:#4a5568}.btn-secondary[_ngcontent-%COMP%]:hover{background:#e2e8f0}.btn-danger[_ngcontent-%COMP%]{background:#fed7d7;color:#742a2a}.btn-danger[_ngcontent-%COMP%]:hover{background:#fc8181}.loading[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{text-align:center;padding:3rem;color:#718096}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.125rem}"]})};export{B as MetasListaRutinasComponent};
