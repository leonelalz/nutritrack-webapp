import{a as J}from"./chunk-3ITULOAN.js";import{a as B}from"./chunk-SMVVNKRT.js";import{c as D,e as s,g as w,h as F,k as G,l as A,m as k,o as V,p as T,q as z,r as L,t as $,u as q,w as U}from"./chunk-2VZLF2MU.js";import"./chunk-6LZ2YNEV.js";import{d as N,f as y,g as I}from"./chunk-7Q5XKRGT.js";import{$ as E,Ka as a,Mb as n,Nb as v,Ob as p,Pa as f,Pb as R,Va as O,aa as C,ib as d,jb as m,ka as g,lb as x,mb as b,nb as S,ob as t,pb as e,qb as l,ub as j,wb as h,xc as P,yb as u}from"./chunk-FVUT7SF7.js";import"./chunk-2VMXMS7J.js";var K=(r,o)=>o.dia,Q=(r,o)=>o.id;function W(r,o){r&1&&(t(0,"div",3),n(1,"Cargando ejercicios..."),e())}function X(r,o){r&1&&(t(0,"div",27)(1,"p"),n(2,"No hay ejercicios asignados. Comienza agregando ejercicios para cada d\xEDa."),e()())}function Y(r,o){if(r&1&&(t(0,"span"),n(1),e()),r&2){let i=u().$implicit;a(),p("",i.peso," kg")}}function Z(r,o){if(r&1&&(t(0,"span"),n(1),e()),r&2){let i=u().$implicit;a(),p("",i.duracionMinutos," min")}}function ee(r,o){if(r&1&&(t(0,"span"),n(1),e()),r&2){let i=u().$implicit;a(),p("Descanso: ",i.descansoSegundos,"s")}}function ie(r,o){if(r&1&&(t(0,"p",37),n(1),e()),r&2){let i=u().$implicit;a(),v(i.notas)}}function te(r,o){if(r&1){let i=j();t(0,"div",32)(1,"div",33)(2,"span",34),n(3),e(),t(4,"div",35)(5,"strong"),n(6),e(),t(7,"div",36)(8,"span"),n(9),e(),d(10,Y,2,1,"span"),d(11,Z,2,1,"span"),d(12,ee,2,1,"span"),e(),d(13,ie,2,1,"p",37),e()(),t(14,"button",38),h("click",function(){let _=E(i).$implicit,M=u(3);return C(M.eliminarEjercicio(_.id))}),n(15," Eliminar "),e()()}if(r&2){let i=o.$implicit;a(3),p("",i.orden,"."),a(3),v(i.ejercicio.nombre),a(3),R("",i.series," series \xD7 ",i.repeticiones," reps"),a(),m(i.peso?10:-1),a(),m(i.duracionMinutos?11:-1),a(),m(i.descansoSegundos?12:-1),a(),m(i.notas?13:-1)}}function ne(r,o){if(r&1&&(t(0,"div",28)(1,"div",29)(2,"h3"),n(3),e(),t(4,"span",30),n(5),e()(),t(6,"div",31),x(7,te,16,8,"div",32,Q),e()()),r&2){let i=o.$implicit;a(3),v(i.dia),a(2),p("",i.ejercicios.length," ejercicio(s)"),a(2),b(i.ejercicios)}}function oe(r,o){if(r&1){let i=j();t(0,"div",4)(1,"div",5)(2,"h2"),n(3,"Agregar Ejercicio a la Rutina"),e(),t(4,"form",6),h("ngSubmit",function(){E(i);let _=u();return C(_.agregarEjercicio())}),t(5,"div",7)(6,"div",8)(7,"label"),n(8,"ID Ejercicio "),t(9,"span",9),n(10,"*"),e()(),l(11,"input",10),e(),t(12,"div",8)(13,"label"),n(14,"D\xEDa "),t(15,"span",9),n(16,"*"),e()(),t(17,"select",11)(18,"option",12),n(19,"Lunes"),e(),t(20,"option",13),n(21,"Martes"),e(),t(22,"option",14),n(23,"Mi\xE9rcoles"),e(),t(24,"option",15),n(25,"Jueves"),e(),t(26,"option",16),n(27,"Viernes"),e(),t(28,"option",17),n(29,"S\xE1bado"),e(),t(30,"option",18),n(31,"Domingo"),e()()(),t(32,"div",8)(33,"label"),n(34,"Series "),t(35,"span",9),n(36,"*"),e()(),l(37,"input",19),t(38,"small"),n(39,"Debe ser positivo (RN13)"),e()(),t(40,"div",8)(41,"label"),n(42,"Repeticiones "),t(43,"span",9),n(44,"*"),e()(),l(45,"input",20),t(46,"small"),n(47,"Debe ser positivo (RN13)"),e()(),t(48,"div",8)(49,"label"),n(50,"Peso (kg)"),e(),l(51,"input",21),e(),t(52,"div",8)(53,"label"),n(54,"Duraci\xF3n (min)"),e(),l(55,"input",22),e(),t(56,"div",8)(57,"label"),n(58,"Descanso (seg)"),e(),l(59,"input",23),e(),t(60,"div",8)(61,"label"),n(62,"Orden"),e(),l(63,"input",24),e()(),t(64,"button",25),n(65),e()()(),t(66,"div",26)(67,"h2"),n(68,"Ejercicios por D\xEDa"),e(),d(69,X,3,0,"div",27),x(70,ne,9,2,"div",28,K),e()()}if(r&2){let i=u();a(4),S("formGroup",i.formulario),a(60),S("disabled",i.formulario.invalid||i.guardando()),a(),p(" ",i.guardando()?"Agregando...":"+ Agregar Ejercicio"," "),a(4),m(i.ejerciciosAgrupados().length===0?69:-1),a(),b(i.ejerciciosAgrupados())}}var H=class r{constructor(o,i,c,_,M){this.fb=o;this.route=i;this.router=c;this.rutinaService=_;this.notificationService=M;this.inicializarFormulario()}formulario;rutinaId;nombreRutina=g("");cargando=g(!0);guardando=g(!1);ejercicios=g([]);ejerciciosAgrupados=g([]);ngOnInit(){this.rutinaId=Number(this.route.snapshot.paramMap.get("id")),this.cargarRutina()}inicializarFormulario(){this.formulario=this.fb.group({ejercicioId:["",[s.required,s.min(1)]],diaSemana:["LUNES",s.required],series:[3,[s.required,s.min(1)]],repeticiones:[12,[s.required,s.min(1)]],peso:[null],duracionMinutos:[null],tiempoDescanso:[60],orden:[1,[s.required,s.min(1)]],notas:[""]})}cargarRutina(){this.rutinaService.obtenerRutinaPorId(this.rutinaId).subscribe({next:o=>{o.success&&o.data&&(this.nombreRutina.set(o.data.nombre),this.ejercicios.set(o.data.ejercicios||[]),this.agruparEjercicios(),this.cargando.set(!1))},error:()=>{this.notificationService.showError("Error al cargar rutina"),this.router.navigate(["/admin/rutinas"])}})}agruparEjercicios(){let o=[{dia:"Ejercicios de la rutina",ejercicios:[...this.ejercicios()].sort((i,c)=>i.orden-c.orden)}];this.ejerciciosAgrupados.set(o)}agregarEjercicio(){if(this.formulario.invalid){this.formulario.markAllAsTouched(),this.notificationService.showError("Completa los campos requeridos");return}let o=this.formulario.get("series")?.value,i=this.formulario.get("repeticiones")?.value;if(o<=0||i<=0){this.notificationService.showError("Series y repeticiones deben ser positivas (RN13)");return}this.guardando.set(!0),this.rutinaService.agregarEjercicio(this.rutinaId,this.formulario.value).subscribe({next:c=>{this.guardando.set(!1),c.success&&(this.notificationService.showSuccess("Ejercicio agregado"),this.formulario.reset({diaSemana:"LUNES",series:3,repeticiones:12,tiempoDescanso:60,orden:1}),this.cargarRutina())},error:c=>{this.guardando.set(!1),this.notificationService.showError(c.error?.message||"Error al agregar ejercicio")}})}eliminarEjercicio(o){confirm("\xBFEliminar este ejercicio de la rutina?")&&this.rutinaService.eliminarEjercicio(this.rutinaId,o).subscribe({next:i=>{i.success&&(this.notificationService.showSuccess("Ejercicio eliminado"),this.cargarRutina())},error:()=>{this.notificationService.showError("Error al eliminar")}})}formatearDia(o){return{LUNES:"Lunes",MARTES:"Martes",MIERCOLES:"Mi\xE9rcoles",JUEVES:"Jueves",VIERNES:"Viernes",SABADO:"S\xE1bado",DOMINGO:"Domingo"}[o]||o}static \u0275fac=function(i){return new(i||r)(f(q),f(N),f(y),f(J),f(B))};static \u0275cmp=O({type:r,selectors:[["app-gestionar-ejercicios-rutina"]],decls:8,vars:3,consts:[[1,"gestionar-ejercicios-container"],[1,"header"],["routerLink","/admin/rutinas",1,"btn-link"],[1,"loading"],[1,"content"],[1,"add-section"],[1,"add-form",3,"ngSubmit","formGroup"],[1,"form-grid"],[1,"form-group"],[1,"req"],["type","number","formControlName","ejercicioId","min","1"],["formControlName","diaSemana"],["value","LUNES"],["value","MARTES"],["value","MIERCOLES"],["value","JUEVES"],["value","VIERNES"],["value","SABADO"],["value","DOMINGO"],["type","number","formControlName","series","min","1"],["type","number","formControlName","repeticiones","min","1"],["type","number","formControlName","peso","min","0","step","0.5"],["type","number","formControlName","duracionMinutos","min","1"],["type","number","formControlName","tiempoDescanso","min","0"],["type","number","formControlName","orden","min","1"],["type","submit",1,"btn-primary",3,"disabled"],[1,"ejercicios-section"],[1,"empty-state"],[1,"dia-card"],[1,"dia-header"],[1,"count"],[1,"ejercicios-list"],[1,"ejercicio-item"],[1,"ejercicio-info"],[1,"orden"],[1,"ejercicio-details"],[1,"ejercicio-meta"],[1,"notas"],[1,"btn-delete",3,"click"]],template:function(i,c){i&1&&(t(0,"div",0)(1,"div",1)(2,"h1"),n(3),e(),t(4,"button",2),n(5,"\u2190 Volver"),e()(),d(6,W,2,0,"div",3),d(7,oe,72,4,"div",4),e()),i&2&&(a(3),p("Gestionar Ejercicios - ",c.nombreRutina()),a(3),m(c.cargando()?6:-1),a(),m(c.cargando()?-1:7))},dependencies:[P,I,U,G,z,L,D,A,T,w,F,$,k,V],styles:[".gestionar-ejercicios-container[_ngcontent-%COMP%]{padding:2rem;max-width:1200px;margin:0 auto}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem}h1[_ngcontent-%COMP%]{font-size:2rem;color:#2d3748;margin:0}.btn-link[_ngcontent-%COMP%]{background:none;border:none;color:#667eea;font-weight:600;cursor:pointer}.add-section[_ngcontent-%COMP%]{background:#fff;padding:1.5rem;border-radius:12px;margin-bottom:2rem;box-shadow:0 2px 8px #0000001a}.add-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem;margin-bottom:1rem}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:1rem;margin-bottom:1rem}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;margin-bottom:.25rem;color:#4a5568}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:.5rem;border:1px solid #e2e8f0;border-radius:6px;font-size:.875rem}.form-group[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.75rem;color:#718096;margin-top:.25rem}.req[_ngcontent-%COMP%]{color:#e53e3e}.ejercicios-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem;margin-bottom:1rem}.dia-card[_ngcontent-%COMP%]{background:#fff;padding:1.5rem;border-radius:12px;margin-bottom:1rem;box-shadow:0 2px 8px #0000001a}.dia-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem;padding-bottom:.75rem;border-bottom:2px solid #e2e8f0}.dia-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.125rem;color:#2d3748;margin:0}.count[_ngcontent-%COMP%]{background:#edf2f7;padding:.25rem .75rem;border-radius:20px;font-size:.875rem;color:#4a5568}.ejercicios-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.ejercicio-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:start;padding:1rem;background:#f7fafc;border-radius:8px}.ejercicio-info[_ngcontent-%COMP%]{display:flex;gap:1rem;flex:1}.orden[_ngcontent-%COMP%]{font-weight:700;color:#667eea;font-size:1.125rem}.ejercicio-details[_ngcontent-%COMP%]{flex:1}.ejercicio-details[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;color:#2d3748;margin-bottom:.25rem}.ejercicio-meta[_ngcontent-%COMP%]{display:flex;gap:1rem;font-size:.875rem;color:#718096;flex-wrap:wrap}.notas[_ngcontent-%COMP%]{margin-top:.5rem;font-size:.875rem;color:#718096;font-style:italic}.btn-primary[_ngcontent-%COMP%]{padding:.75rem 2rem;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;border-radius:8px;font-weight:600;cursor:pointer}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-delete[_ngcontent-%COMP%]{padding:.5rem 1rem;background:#fc8181;color:#fff;border:none;border-radius:6px;font-weight:600;cursor:pointer;font-size:.875rem;white-space:nowrap}.btn-delete[_ngcontent-%COMP%]:hover{background:#f56565}.loading[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{text-align:center;padding:3rem;color:#718096}"]})};export{H as GestionarEjerciciosRutinaComponent};
