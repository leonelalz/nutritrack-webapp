import{a as J,b as K,c as Q,d as tt,e as et}from"./chunk-7Y6DIVO4.js";import{a as it}from"./chunk-3ITULOAN.js";import{a as V,c as q,e as U,f as G,g as $,j as H,k as X,m as Y,o as Z}from"./chunk-AAWOA4Z3.js";import{k as F,l as A,u as k,v as T}from"./chunk-4WQ3J2NC.js";import{a as W}from"./chunk-SMVVNKRT.js";import{c as j,g as D,j as z,v as B}from"./chunk-2VZLF2MU.js";import"./chunk-6LZ2YNEV.js";import{f as N,g as L}from"./chunk-7Q5XKRGT.js";import{$ as P,Ka as s,Kb as h,Mb as i,Nb as m,Ob as x,Pa as f,Qb as b,Rb as E,Sb as S,Va as y,Vb as R,aa as O,ib as u,jb as p,ka as d,lb as C,mb as M,nb as _,ob as n,pb as e,ub as I,wb as v,xc as w,yb as g}from"./chunk-FVUT7SF7.js";import"./chunk-2VMXMS7J.js";var rt=r=>["/admin/rutinas",r,"editar"],ot=r=>["/admin/rutinas",r,"ejercicios"],at=(r,a)=>a.id;function st(r,a){r&1&&(n(0,"div",12),i(1,"Cargando rutinas..."),e())}function ct(r,a){r&1&&(n(0,"mat-card")(1,"mat-card-content")(2,"div",14)(3,"mat-icon",15),i(4,"event_repeat"),e(),n(5,"h3"),i(6,"No hay rutinas registradas"),e(),n(7,"p"),i(8,"Comienza creando tu primera rutina para el sistema"),e(),n(9,"button",5)(10,"mat-icon"),i(11,"add"),e(),i(12," Crear Primera Rutina "),e()()()())}function mt(r,a){if(r&1&&(n(0,"div",22)(1,"span",23),i(2,"Ejercicios:"),e(),n(3,"span",24),i(4),e()()),r&2){let t=g().$implicit;s(4),m(t.totalEjerciciosProgramados)}}function lt(r,a){if(r&1&&(n(0,"mat-chip"),i(1),e()),r&2){let t=a.$implicit;s(),m(t.nombre)}}function dt(r,a){if(r&1){let t=I();n(0,"mat-card",17)(1,"div",18)(2,"h3"),i(3),e(),n(4,"span",19),i(5),e()(),n(6,"p",20),i(7),e(),n(8,"div",21)(9,"div",22)(10,"span",23),i(11,"Duraci\xF3n:"),e(),n(12,"span",24),i(13),e()(),n(14,"div",22)(15,"span",23),i(16,"Nivel:"),e(),n(17,"span",24),i(18),e()(),u(19,mt,5,1,"div",22),e(),n(20,"mat-chip-set",25),C(21,lt,2,1,"mat-chip",null,at),e(),n(23,"div",26)(24,"button",27)(25,"mat-icon"),i(26,"edit"),e(),i(27," Editar "),e(),n(28,"button",27)(29,"mat-icon"),i(30,"list"),e(),i(31," Ejercicios "),e(),n(32,"button",28),v("click",function(){let l=P(t).$implicit,c=g(2);return O(c.confirmarEliminar(l))}),n(33,"mat-icon"),i(34,"delete"),e(),i(35," Eliminar "),e()()()}if(r&2){let t=a.$implicit,o=g(2);h("inactiva",!t.activo),s(3),m(t.nombre),s(),h("activo",t.activo)("inactivo",!t.activo),s(),x(" ",t.activo?"Activa":"Inactiva"," "),s(2),m(t.descripcion),s(6),x("",t.duracionSemanas," semanas"),s(5),m(o.formatearNivel(t.nivelDificultad)),s(),p(t.totalEjerciciosProgramados!==void 0?19:-1),s(2),M(t.etiquetas),s(3),_("routerLink",R(15,rt,t.id)),s(4),_("routerLink",R(17,ot,t.id)),s(4),_("disabled",t.numeroUsuariosActivos&&t.numeroUsuariosActivos>0)}}function ut(r,a){if(r&1&&(n(0,"div",13),C(1,dt,36,19,"mat-card",16,at),e()),r&2){let t=g();s(),M(t.rutinasFiltradas())}}var nt=class r{constructor(a,t,o){this.rutinaService=a;this.notificationService=t;this.router=o}loading=d(!1);mostrarInactivas=d(!1);filtroNombre=d("");rutinasFiltradas=d([]);ngOnInit(){this.cargarRutinas()}cargarRutinas(){this.loading.set(!0),(this.mostrarInactivas()?this.rutinaService.obtenerRutinas():this.rutinaService.obtenerRutinasActivas()).subscribe({next:t=>{this.loading.set(!1),t.success&&t.data&&this.rutinasFiltradas.set(this.rutinaService.rutinas())},error:()=>{this.loading.set(!1),this.notificationService.showError("Error al cargar rutinas")}})}filtrarRutinas(){let a=this.filtroNombre().trim();if(!a){this.cargarRutinas();return}this.loading.set(!0),this.rutinaService.buscarRutinas(a).subscribe({next:t=>{this.loading.set(!1),t.success&&t.data&&this.rutinasFiltradas.set(this.rutinaService.rutinas())},error:()=>{this.loading.set(!1),this.notificationService.showError("Error al buscar rutinas")}})}confirmarEliminar(a){confirm(`\xBFEst\xE1s seguro de eliminar la rutina "${a.nombre}"?

Esta acci\xF3n no se puede deshacer.`)&&this.rutinaService.eliminarRutina(a.id).subscribe({next:o=>{o.success&&(this.notificationService.showSuccess("Rutina eliminada exitosamente"),this.cargarRutinas())},error:o=>{o.status===409?this.notificationService.showError(o.error.message||"La rutina tiene usuarios activos"):this.notificationService.showError("Error al eliminar rutina")}})}formatearNivel(a){return{PRINCIPIANTE:"Principiante",INTERMEDIO:"Intermedio",AVANZADO:"Avanzado",EXPERTO:"Experto"}[a]||a}formatearObjetivo(a){return a?{PERDER_PESO:"P\xE9rdida de Peso",GANAR_MASA_MUSCULAR:"Ganancia Muscular",MANTENER_FORMA:"Mantenimiento",REHABILITACION:"Rehabilitaci\xF3n",CONTROLAR_ESTRES:"Control de Estr\xE9s"}[a]||a:"Sin objetivo"}static \u0275fac=function(t){return new(t||r)(f(it),f(W),f(N))};static \u0275cmp=y({type:r,selectors:[["app-lista-rutinas"]],decls:27,vars:5,consts:[[1,"page-container"],[1,"page-header"],[1,"header-content"],[1,"page-title"],[1,"page-subtitle"],["mat-raised-button","","color","primary","routerLink","/admin/rutinas/crear"],[1,"filters-card"],[1,"filters"],["appearance","outline",1,"search-field"],["matInput","","placeholder","Buscar por nombre...",3,"ngModelChange","ngModel"],["matPrefix",""],[3,"ngModelChange","ngModel"],[1,"loading"],[1,"rutinas-grid"],[1,"empty-state"],[1,"empty-icon"],[1,"rutina-card",3,"inactiva"],[1,"rutina-card"],[1,"rutina-header"],[1,"estado-badge"],[1,"rutina-descripcion"],[1,"rutina-stats"],[1,"stat"],[1,"stat-label"],[1,"stat-value"],[1,"rutina-etiquetas"],[1,"rutina-actions"],["mat-raised-button","",3,"routerLink"],["mat-raised-button","","color","warn",3,"click","disabled"]],template:function(t,o){t&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3)(4,"mat-icon"),i(5,"fitness_center"),e(),i(6," Gesti\xF3n de Rutinas de Ejercicio "),e(),n(7,"p",4),i(8,"Administra las rutinas de ejercicio del sistema"),e()(),n(9,"button",5)(10,"mat-icon"),i(11,"add"),e(),i(12," Crear Rutina "),e()(),n(13,"mat-card",6)(14,"mat-card-content")(15,"div",7)(16,"mat-form-field",8)(17,"mat-label"),i(18,"Buscar rutinas"),e(),n(19,"input",9),S("ngModelChange",function(c){return E(o.filtroNombre,c)||(o.filtroNombre=c),c}),v("ngModelChange",function(){return o.filtrarRutinas()}),e(),n(20,"mat-icon",10),i(21,"search"),e()(),n(22,"mat-checkbox",11),S("ngModelChange",function(c){return E(o.mostrarInactivas,c)||(o.mostrarInactivas=c),c}),v("ngModelChange",function(){return o.cargarRutinas()}),i(23," Mostrar rutinas inactivas "),e()()()(),u(24,st,2,0,"div",12),u(25,ct,13,0,"mat-card"),u(26,ut,3,0,"div",13),e()),t&2&&(s(19),b("ngModel",o.filtroNombre),s(3),b("ngModel",o.mostrarInactivas),s(2),p(o.loading()?24:-1),s(),p(!o.loading()&&o.rutinasFiltradas().length===0?25:-1),s(),p(!o.loading()&&o.rutinasFiltradas().length>0?26:-1))},dependencies:[w,L,B,j,D,z,U,V,q,T,k,A,F,Q,K,H,G,$,J,et,tt,Z,X,Y],styles:[".page-container[_ngcontent-%COMP%]{padding:2rem;max-width:1400px;margin:0 auto}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem;gap:2rem}.header-content[_ngcontent-%COMP%]{flex:1}.page-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;margin:0 0 .5rem;font-size:2rem;color:#333}.page-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:2rem;width:2rem;height:2rem;color:var(--primary-color, #00A859)}.page-subtitle[_ngcontent-%COMP%]{margin:0;color:#666;font-size:1rem}.filters-card[_ngcontent-%COMP%]{margin-bottom:2rem}.filters[_ngcontent-%COMP%]{display:flex;gap:1.5rem;align-items:center;flex-wrap:wrap}.search-field[_ngcontent-%COMP%]{flex:1;min-width:300px}mat-checkbox[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;cursor:pointer}.rutinas-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:1.5rem}.rutina-card[_ngcontent-%COMP%]{transition:transform .2s,box-shadow .2s}.rutina-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 24px #0000001f}.rutina-card.inactiva[_ngcontent-%COMP%]{opacity:.6}.rutina-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:start;margin-bottom:1rem}.rutina-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;color:#333;flex:1}.estado-badge[_ngcontent-%COMP%]{padding:.25rem .75rem;border-radius:12px;font-size:.85rem;font-weight:500}.estado-badge.activo[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.estado-badge.inactivo[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.rutina-descripcion[_ngcontent-%COMP%]{color:#666;margin-bottom:1rem;min-height:3rem}.rutina-stats[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:1rem;padding:.75rem;background:#f8f9fa;border-radius:8px}.stat[_ngcontent-%COMP%]{flex:1;text-align:center}.stat-label[_ngcontent-%COMP%]{display:block;font-size:.85rem;color:#666;margin-bottom:.25rem}.stat-value[_ngcontent-%COMP%]{display:block;font-size:1.25rem;font-weight:700;color:#333}.rutina-etiquetas[_ngcontent-%COMP%]{margin-bottom:1rem}.rutina-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;flex-wrap:wrap;margin-top:1rem}.rutina-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;min-width:120px}.loading[_ngcontent-%COMP%]{text-align:center;padding:3rem;color:#666}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:3rem}.empty-icon[_ngcontent-%COMP%]{font-size:4rem;width:4rem;height:4rem;color:#ccc;margin-bottom:1rem}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .5rem;color:#333}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin-bottom:1.5rem}"]})};export{nt as ListaRutinasComponent};
