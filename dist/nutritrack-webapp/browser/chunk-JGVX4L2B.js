import{a as k}from"./chunk-73PQWT7O.js";import{a as N}from"./chunk-AVXLCIQN.js";import"./chunk-Q53AFBXZ.js";import{b as D,e as j}from"./chunk-ONQJZTIX.js";import"./chunk-N5IZLMDI.js";import{Bb as I,Db as P,Ec as y,Ma as r,Ob as g,Rb as a,Sa as m,Sb as f,Tb as c,Za as _,_b as w,ba as C,ca as h,ma as u,mb as v,nb as b,pb as O,qb as E,rb as x,sb as t,tb as n,ub as p,zb as S}from"./chunk-D6HZ3QFW.js";import"./chunk-2VMXMS7J.js";var G=()=>["/metas/planes"],T=(o,i)=>i.id;function R(o,i){o&1&&(t(0,"div",0)(1,"p"),a(2,"Cargando detalles del plan..."),n()())}function z(o,i){if(o&1&&(t(0,"div",22),a(1),n()),o&2){let e=i.$implicit;r(),c("\u2713 ",e.nombre)}}function L(o,i){if(o&1){let e=S();t(0,"div",1)(1,"button",2),a(2," \u2190 Volver a Planes "),n(),t(3,"div",3)(4,"div",4)(5,"h1"),a(6),n(),t(7,"span",5),a(8),n()(),t(9,"p",6),a(10),n(),t(11,"div",7)(12,"div",8)(13,"h3"),a(14,"Duraci\xF3n"),n(),t(15,"p",9),a(16),n()(),t(17,"div",8)(18,"h3"),a(19,"Calor\xEDas Diarias"),n(),t(20,"p",9),a(21),n()(),t(22,"div",8)(23,"h3"),a(24,"Prote\xEDna"),n(),t(25,"p",9),a(26),n()(),t(27,"div",8)(28,"h3"),a(29,"Carbohidratos"),n(),t(30,"p",9),a(31),n()(),t(32,"div",8)(33,"h3"),a(34,"Grasas"),n(),t(35,"p",9),a(36),n()()(),t(37,"div",10)(38,"h2"),a(39,"Distribuci\xF3n Macronutrientes"),n(),t(40,"div",11)(41,"div",12)(42,"div",13)(43,"span",14),a(44,"Prote\xEDna"),n(),t(45,"span",15),a(46),n()(),t(47,"div",16),p(48,"div",17),n()(),t(49,"div",12)(50,"div",13)(51,"span",14),a(52,"Carbohidratos"),n(),t(53,"span",15),a(54),n()(),t(55,"div",18),p(56,"div",17),n()(),t(57,"div",12)(58,"div",13)(59,"span",14),a(60,"Grasas"),n(),t(61,"span",15),a(62),n()(),t(63,"div",19),p(64,"div",17),n()()()(),t(65,"div",20)(66,"h2"),a(67,"Caracter\xEDsticas"),n(),t(68,"div",21),O(69,z,2,1,"div",22,T),n()(),t(71,"div",23)(72,"button",24),I("click",function(){C(e);let s=P();return h(s.activarPlan())}),a(73),n()()()()}if(o&2){let e=P();r(),x("routerLink",w(20,G)),r(5),f(e.plan().nombre),r(2),f(e.formatearObjetivo(e.plan().objetivo.tipoObjetivo)),r(2),f(e.plan().descripcion),r(6),c("",e.plan().duracionDias," d\xEDas"),r(5),c("",e.plan().objetivo.caloriasObjetivo," kcal"),r(5),c("",e.plan().objetivo.proteinaGramos,"g/d\xEDa"),r(5),c("",e.plan().objetivo.carbohidratosGramos,"g/d\xEDa"),r(5),c("",e.plan().objetivo.grasasGramos,"g/d\xEDa"),r(10),c("",e.calcularPorcentajeMacro("protein"),"%"),r(2),g("width",e.calcularPorcentajeMacro("protein"),"%"),r(6),c("",e.calcularPorcentajeMacro("carbs"),"%"),r(2),g("width",e.calcularPorcentajeMacro("carbs"),"%"),r(6),c("",e.calcularPorcentajeMacro("fats"),"%"),r(2),g("width",e.calcularPorcentajeMacro("fats"),"%"),r(5),E(e.plan().etiquetas),r(3),x("disabled",e.plan().activoParaUsuario),r(),c(" ",e.plan().activoParaUsuario?"Ya Activado":"Activar Plan"," ")}}var A=class o{constructor(i,e,l){this.route=i;this.metasService=e;this.notificationService=l}loading=u(!1);planId=0;plan=u(null);ngOnInit(){this.route.params.subscribe(i=>{this.planId=+i.id,this.cargarPlan()})}cargarPlan(){this.loading.set(!0),this.metasService.obtenerTodosLosPlanesDeUsuario().subscribe({next:i=>{if(this.loading.set(!1),i.success){let l=(i.data||[]).find(s=>s.id===this.planId);l&&this.plan.set(l)}},error:()=>{this.loading.set(!1),this.notificationService.showError("Error al cargar el plan")}})}activarPlan(){this.plan()&&this.metasService.activarPlan({planId:this.planId}).subscribe({next:i=>{i.success&&(this.notificationService.showSuccess("Plan activado exitosamente"),this.cargarPlan())},error:i=>{this.notificationService.showError(i.error?.message||"Error al activar el plan")}})}calcularPorcentajeMacro(i){let e=this.plan();if(!e)return 0;let l=e.objetivo.proteinaGramos*4,s=e.objetivo.carbohidratosGramos*4,M=e.objetivo.grasasGramos*9,d=l+s+M;if(d===0)return 0;switch(i){case"protein":return Math.round(l/d*100);case"carbs":return Math.round(s/d*100);case"fats":return Math.round(M/d*100)}}formatearObjetivo(i){return{PERDIDA_PESO:"P\xE9rdida de Peso",GANANCIA_MUSCULAR:"Ganancia Muscular",MANTENIMIENTO:"Mantenimiento",DEFINICION:"Definici\xF3n",SALUD_GENERAL:"Salud General"}[i]||i}static \u0275fac=function(e){return new(e||o)(m(D),m(k),m(N))};static \u0275cmp=_({type:o,selectors:[["app-catalogo-detalle-plan"]],decls:2,vars:2,consts:[[1,"loading"],[1,"detalle-plan-container"],[1,"btn-back",3,"routerLink"],[1,"plan-detail"],[1,"plan-header"],[1,"badge"],[1,"description"],[1,"plan-info-grid"],[1,"info-card"],[1,"value"],[1,"macronutrients-section"],[1,"macros-bars"],[1,"macro-item"],[1,"macro-label"],[1,"label-text"],[1,"percentage"],[1,"progress-bar","protein"],[1,"progress-fill"],[1,"progress-bar","carbs"],[1,"progress-bar","fats"],[1,"features-section"],[1,"features-list"],[1,"feature-tag"],[1,"cta-section"],[1,"btn-primary",3,"click","disabled"]],template:function(e,l){e&1&&(v(0,R,3,0,"div",0),v(1,L,74,21,"div",1)),e&2&&(b(l.loading()?0:-1),r(),b(!l.loading()&&l.plan()?1:-1))},dependencies:[y,j],styles:[".detalle-plan-container[_ngcontent-%COMP%]{padding:2rem;max-width:900px;margin:0 auto}.btn-back[_ngcontent-%COMP%]{background:none;border:none;color:#667eea;font-size:1rem;cursor:pointer;margin-bottom:2rem;font-weight:600}.btn-back[_ngcontent-%COMP%]:hover{text-decoration:underline}.plan-detail[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:2rem;box-shadow:0 2px 8px #0000001a}.plan-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem;gap:1rem;flex-wrap:wrap}.plan-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;color:#2d3748;font-size:2rem}.badge[_ngcontent-%COMP%]{padding:.5rem 1rem;background:#667eea;color:#fff;border-radius:20px;font-weight:600;white-space:nowrap}.description[_ngcontent-%COMP%]{color:#718096;font-size:1.125rem;margin-bottom:2rem;line-height:1.6}.plan-info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:1rem;margin-bottom:2rem}.info-card[_ngcontent-%COMP%]{background:#f7fafc;padding:1.5rem;border-radius:8px;text-align:center}.info-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .5rem;color:#718096;font-size:.875rem;text-transform:uppercase;letter-spacing:.5px}.info-card[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{margin:0;color:#2d3748;font-size:1.5rem;font-weight:700}.macronutrients-section[_ngcontent-%COMP%]{margin-bottom:2rem}.macronutrients-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#2d3748;margin-bottom:1.5rem}.macros-bars[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem}.macro-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.macro-label[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem}.label-text[_ngcontent-%COMP%]{font-weight:600;color:#2d3748}.percentage[_ngcontent-%COMP%]{font-size:.875rem;color:#718096;font-weight:500}.progress-bar[_ngcontent-%COMP%]{width:100%;height:10px;background:#e2e8f0;border-radius:10px;overflow:hidden}.progress-bar.protein[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]{background:linear-gradient(90deg,#667eea,#764ba2)}.progress-bar.carbs[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]{background:linear-gradient(90deg,#f093fb,#f5576c)}.progress-bar.fats[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]{background:linear-gradient(90deg,#4facfe,#00f2fe)}.progress-fill[_ngcontent-%COMP%]{height:100%;transition:width .3s ease}.features-section[_ngcontent-%COMP%]{margin-bottom:2rem}.features-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#2d3748;margin-bottom:1rem}.features-list[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem}.feature-tag[_ngcontent-%COMP%]{background:#e6f0ff;color:#667eea;padding:.75rem 1rem;border-radius:8px;font-weight:500}.cta-section[_ngcontent-%COMP%]{display:flex;gap:1rem;padding-top:2rem;border-top:1px solid #e2e8f0}.btn-primary[_ngcontent-%COMP%]{flex:1;padding:1rem;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;border-radius:8px;font-weight:600;font-size:1rem;cursor:pointer;transition:all .2s}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 4px 12px #667eea66}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.loading[_ngcontent-%COMP%]{text-align:center;padding:4rem;color:#718096}"]})};export{A as MetasDetallePlanComponent};
