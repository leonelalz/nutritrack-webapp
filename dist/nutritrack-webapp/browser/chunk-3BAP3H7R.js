import{a as U}from"./chunk-LPBBENYK.js";import{a as G}from"./chunk-73PQWT7O.js";import{a as V}from"./chunk-FAQLDPXB.js";import{a as R}from"./chunk-AVXLCIQN.js";import{b as j,c as D,g as T,j as A,p as F,q as z,r as W,w as q}from"./chunk-GRSFFSFU.js";import"./chunk-Q53AFBXZ.js";import{e as I}from"./chunk-ONQJZTIX.js";import"./chunk-N5IZLMDI.js";import{$b as L,Bb as u,Db as p,Ec as k,Ma as l,Pb as w,Rb as o,Sa as f,Sb as _,Tb as C,Vb as b,Wb as x,Xb as M,Za as E,_b as N,ba as S,ca as O,ma as g,mb as c,nb as m,pb as P,qb as h,rb as v,sb as i,tb as n,zb as y}from"./chunk-D6HZ3QFW.js";import"./chunk-2VMXMS7J.js";var $=()=>["/metas/mis-asignaciones"],H=a=>["/metas/planes",a],Y=(a,t)=>t.id;function J(a,t){a&1&&(i(0,"div",18)(1,"p"),o(2,"Cargando planes..."),n()())}function K(a,t){a&1&&(i(0,"p",21),o(1,"Intenta desactivar el filtro de planes sugeridos"),n())}function Q(a,t){if(a&1&&(i(0,"div",19)(1,"p"),o(2,"No se encontraron planes disponibles con los filtros seleccionados"),n(),c(3,K,2,0,"p",21),n()),a&2){let e=p();l(3),m(e.soloSugeridos?3:-1)}}function X(a,t){a&1&&(i(0,"span",25),o(1,"\u2728 Sugerido"),n())}function Z(a,t){if(a&1&&(i(0,"div",28)(1,"span",29),o(2,"Objetivo:"),n(),i(3,"span",30),o(4),n()(),i(5,"div",28)(6,"span",29),o(7,"Calor\xEDas:"),n(),i(8,"span",30),o(9),n()()),a&2){let e=p().$implicit,r=p(2);l(4),_(r.formatearObjetivo(e.objetivo.tipoObjetivo)),l(5),C("",e.objetivo.caloriasObjetivo," kcal")}}function ee(a,t){a&1&&(i(0,"div",28)(1,"span",29),o(2,"Objetivo:"),n(),i(3,"span",35),o(4,"No especificado"),n()())}function te(a,t){if(a&1&&(i(0,"span",36),o(1),n()),a&2){let e=t.$implicit;l(),_(e.nombre)}}function ne(a,t){if(a&1&&(i(0,"div",31),P(1,te,2,1,"span",36,Y),n()),a&2){let e=p().$implicit;l(),h(e.etiquetas)}}function ie(a,t){if(a&1){let e=y();i(0,"div",23)(1,"div",24)(2,"h3"),o(3),n(),c(4,X,2,0,"span",25),n(),i(5,"p",26),o(6),n(),i(7,"div",27)(8,"div",28)(9,"span",29),o(10,"Duraci\xF3n:"),n(),i(11,"span",30),o(12),n()(),c(13,Z,10,2)(14,ee,5,0,"div",28),n(),c(15,ne,3,0,"div",31),i(16,"div",32)(17,"button",33),o(18," Ver Detalles "),n(),i(19,"button",34),u("click",function(){let d=S(e).$implicit,s=p(2);return O(s.activarPlan(d))}),o(20),n()()()}if(a&2){let e=t.$implicit,r=p(2);w("plan-sugerido",e.sugerido),l(3),_(e.nombre),l(),m(e.sugerido?4:-1),l(2),_(e.descripcion),l(6),C("",e.duracionDias," d\xEDas"),l(),m(e.objetivo?13:14),l(2),m(e.etiquetas&&e.etiquetas.length>0?15:-1),l(2),v("routerLink",L(11,H,e.id)),l(2),v("disabled",r.activandoPlan()===e.id),l(),C(" ",r.activandoPlan()===e.id?"Activando...":"Activar Plan"," ")}}function ae(a,t){if(a&1&&(i(0,"div",20),P(1,ie,21,13,"div",22,Y),n()),a&2){let e=p();l(),h(e.planesFiltrados())}}var B=class a{constructor(t,e,r,d){this.catalogoService=t;this.metasService=e;this.notificationService=r;this.mockData=d}loading=g(!1);activandoPlan=g(null);filtroNombre="";filtroObjetivo="";soloSugeridos=!1;planes=g([]);planesFiltrados=g([]);ngOnInit(){this.cargarPlanes()}cargarPlanes(){this.loading.set(!0),this.planes.set(this.mockData.planesDisponibles()),this.filtrarPlanes(),this.loading.set(!1),this.catalogoService.verCatalogo(this.soloSugeridos).subscribe({next:t=>{if(t.success){let e=t.data?.content||t.data||[];this.planes.set(e),this.filtrarPlanes()}},error:()=>{this.notificationService.showSuccess("Modo demo: planes cargados sin conexi\xF3n")}})}filtrarPlanes(){let t=this.planes();if(this.filtroNombre){let e=this.filtroNombre.toLowerCase();t=t.filter(r=>r.nombre.toLowerCase().includes(e)||r.descripcion.toLowerCase().includes(e))}this.filtroObjetivo&&(t=t.filter(e=>e.objetivo?.tipoObjetivo===this.filtroObjetivo)),this.planesFiltrados.set(t)}activarPlan(t){this.activandoPlan.set(t.id),this.mockData.activarPlan(t.id),this.metasService.activarPlan({planId:t.id}).subscribe({next:e=>{this.activandoPlan.set(null),e.success?this.notificationService.showSuccess(`Plan "${t.nombre}" activado exitosamente`):this.notificationService.showSuccess(`Plan "${t.nombre}" activado (demo)`)},error:()=>{this.activandoPlan.set(null),this.notificationService.showSuccess(`Plan "${t.nombre}" activado (demo)`)}})}formatearObjetivo(t){return{PERDIDA_PESO:"P\xE9rdida de Peso",GANANCIA_MUSCULAR:"Ganancia Muscular",MANTENIMIENTO:"Mantenimiento",DEFINICION:"Definici\xF3n",SALUD_GENERAL:"Salud General"}[t]||t}static \u0275fac=function(e){return new(e||a)(f(U),f(G),f(R),f(V))};static \u0275cmp=E({type:a,selectors:[["app-catalogo-lista-planes"]],decls:33,vars:8,consts:[[1,"catalogo-planes-container"],[1,"header"],[1,"btn-back",3,"routerLink"],[1,"subtitle"],[1,"filters"],[1,"search-box"],["type","text","placeholder","Buscar por nombre...",3,"ngModelChange","ngModel"],[1,"filter-objetivo"],[3,"ngModelChange","ngModel"],["value",""],["value","PERDIDA_PESO"],["value","GANANCIA_MUSCULAR"],["value","MANTENIMIENTO"],["value","DEFINICION"],["value","SALUD_GENERAL"],[1,"filter-sugeridos"],[1,"checkbox-label"],["type","checkbox",3,"ngModelChange","ngModel"],[1,"loading"],[1,"empty-state"],[1,"planes-grid"],[1,"hint"],[1,"plan-card",3,"plan-sugerido"],[1,"plan-card"],[1,"plan-header"],[1,"badge-sugerido"],[1,"plan-description"],[1,"plan-stats"],[1,"stat"],[1,"stat-label"],[1,"stat-value"],[1,"plan-etiquetas"],[1,"plan-actions"],[1,"btn-primary",3,"routerLink"],[1,"btn-activate",3,"click","disabled"],[1,"stat-value","text-muted"],[1,"etiqueta"]],template:function(e,r){e&1&&(i(0,"div",0)(1,"div",1)(2,"button",2),o(3," \u2190 Volver a Mis Asignaciones "),n(),i(4,"h1"),o(5,"Cat\xE1logo de Planes Nutricionales"),n(),i(6,"p",3),o(7,"Explora planes disponibles seg\xFAn tu perfil y objetivos"),n()(),i(8,"div",4)(9,"div",5)(10,"input",6),M("ngModelChange",function(s){return x(r.filtroNombre,s)||(r.filtroNombre=s),s}),u("ngModelChange",function(){return r.filtrarPlanes()}),n()(),i(11,"div",7)(12,"select",8),M("ngModelChange",function(s){return x(r.filtroObjetivo,s)||(r.filtroObjetivo=s),s}),u("ngModelChange",function(){return r.filtrarPlanes()}),i(13,"option",9),o(14,"Todos los objetivos"),n(),i(15,"option",10),o(16,"P\xE9rdida de Peso"),n(),i(17,"option",11),o(18,"Ganancia Muscular"),n(),i(19,"option",12),o(20,"Mantenimiento"),n(),i(21,"option",13),o(22,"Definici\xF3n"),n(),i(23,"option",14),o(24,"Salud General"),n()()(),i(25,"div",15)(26,"label",16)(27,"input",17),M("ngModelChange",function(s){return x(r.soloSugeridos,s)||(r.soloSugeridos=s),s}),u("ngModelChange",function(){return r.cargarPlanes()}),n(),i(28,"span"),o(29,"Solo planes sugeridos para mi objetivo"),n()()()(),c(30,J,3,0,"div",18),c(31,Q,4,1,"div",19),c(32,ae,3,0,"div",20),n()),e&2&&(l(2),v("routerLink",N(7,$)),l(8),b("ngModel",r.filtroNombre),l(2),b("ngModel",r.filtroObjetivo),l(15),b("ngModel",r.soloSugeridos),l(3),m(r.loading()?30:-1),l(),m(!r.loading()&&r.planesFiltrados().length===0?31:-1),l(),m(!r.loading()&&r.planesFiltrados().length>0?32:-1))},dependencies:[k,I,q,z,W,D,j,F,T,A],styles:[".catalogo-planes-container[_ngcontent-%COMP%]{padding:2rem;max-width:1400px;margin:0 auto}.header[_ngcontent-%COMP%]{margin-bottom:2rem;text-align:center;position:relative}.btn-back[_ngcontent-%COMP%]{position:absolute;left:0;top:0;padding:.625rem 1.25rem;background:#edf2f7;color:#4a5568;border:none;border-radius:8px;font-weight:600;cursor:pointer;font-size:.875rem;transition:all .2s}.btn-back[_ngcontent-%COMP%]:hover{background:#e2e8f0;transform:translate(-2px)}h1[_ngcontent-%COMP%]{font-size:2.5rem;color:#2d3748;margin:0 0 .5rem}.subtitle[_ngcontent-%COMP%]{color:#718096;font-size:1.125rem;margin:0}.filters[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:2rem;align-items:center;flex-wrap:wrap}.search-box[_ngcontent-%COMP%]{flex:1;min-width:250px}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid #e2e8f0;border-radius:8px;font-size:1rem}.filter-objetivo[_ngcontent-%COMP%]{min-width:200px}.filter-objetivo[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid #e2e8f0;border-radius:8px;font-size:1rem;background-color:#fff}.filter-sugeridos[_ngcontent-%COMP%]{display:flex;align-items:center}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;cursor:pointer;font-size:.95rem;color:#4a5568}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:18px;height:18px;cursor:pointer}.planes-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:1.5rem}.plan-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:1.5rem;box-shadow:0 2px 8px #0000001a;transition:transform .2s,box-shadow .2s;display:flex;flex-direction:column;border:2px solid transparent}.plan-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 4px 16px #00000026}.plan-card.plan-sugerido[_ngcontent-%COMP%]{border-color:#f6ad55;background:linear-gradient(to bottom,#fffaf0,#fff)}.plan-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:start;margin-bottom:1rem;gap:1rem}.plan-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;color:#2d3748;flex:1}.badge-sugerido[_ngcontent-%COMP%]{padding:.25rem .75rem;border-radius:20px;font-size:.75rem;font-weight:600;background:linear-gradient(135deg,#f6ad55,#ed8936);color:#fff;white-space:nowrap}.plan-description[_ngcontent-%COMP%]{color:#718096;margin-bottom:1rem;line-height:1.5}.plan-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:.75rem;margin-bottom:1rem;padding:1rem;background:#f7fafc;border-radius:8px}.stat[_ngcontent-%COMP%]{display:flex;flex-direction:column}.stat-label[_ngcontent-%COMP%]{font-size:.875rem;color:#718096;margin-bottom:.25rem}.stat-value[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#2d3748}.stat-value.text-muted[_ngcontent-%COMP%]{color:#a0aec0;font-style:italic}.plan-etiquetas[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;margin-bottom:1rem}.etiqueta[_ngcontent-%COMP%]{padding:.25rem .75rem;background:#edf2f7;color:#4a5568;border-radius:20px;font-size:.875rem}.plan-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;flex-wrap:wrap;margin-top:auto}.btn-primary[_ngcontent-%COMP%], .btn-activate[_ngcontent-%COMP%]{padding:.625rem 1rem;border:none;border-radius:8px;font-weight:600;cursor:pointer;transition:all .2s;font-size:.875rem;flex:1;min-width:120px}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #667eea66}.btn-activate[_ngcontent-%COMP%]{background:#48bb78;color:#fff}.btn-activate[_ngcontent-%COMP%]:hover:not(:disabled){background:#38a169;transform:translateY(-2px);box-shadow:0 4px 12px #48bb7866}.btn-activate[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.loading[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{text-align:center;padding:3rem;color:#718096}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.125rem}.empty-state[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%]{font-size:.95rem;color:#a0aec0;margin-top:.5rem}"]})};export{B as MetasListaPlanesComponent};
