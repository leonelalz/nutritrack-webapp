import{a as h}from"./chunk-KCS7VTYM.js";import{$ as s,A as m,I as y,J as M,L as $,M as q,O as i,P as r,Q as a,R as f,S as v,T as w,U as Y,V as Z,W as J,X as K,Z as S,_ as Q,aa as H,c as R,ca as W,ea as X,f as G,ha as d,ia as ee,j as z,ka as te,la as ne,m as p,ma as P,n as j,na as O,o as U,oa as E,p as l,pa as oe,q as x,qa as ie,s as B,t as _,x as u}from"./chunk-YCPTOAUE.js";import"./chunk-2VMXMS7J.js";var re=(t,n)=>{let e=p(h),o=p(O);return e.isAuthenticated()?!0:(o.navigate(["/login"],{queryParams:{returnUrl:n.url}}),!1)};var k=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=m({type:t,selectors:[["app-landing-layout"]],decls:15,vars:0,consts:[[1,"landing-layout"],[1,"landing-header"],[1,"header-content"],["routerLink","/",1,"logo"],[1,"logo-icon"],[1,"logo-text"],[1,"logo-highlight"],[1,"landing-main"],[1,"landing-footer"]],template:function(e,o){e&1&&(i(0,"div",0)(1,"header",1)(2,"div",2)(3,"a",3)(4,"span",4),s(5,"\u{1F957}"),r(),i(6,"span",5),s(7,"Nutri"),i(8,"span",6),s(9,"Track"),r()()()()(),i(10,"main",7),a(11,"router-outlet"),r(),i(12,"footer",8)(13,"p"),s(14,"\xA9 2025 Nutritrack App. Todos los derechos reservados por el equipo de nutritrack."),r()()())},dependencies:[d,P,E],styles:["[_nghost-%COMP%]{--color-primary: #16a34a;--color-secondary: #64748B;--color-light: #F5F5F5;--color-white: #FFFFFF}.landing-layout[_ngcontent-%COMP%]{min-height:100vh;display:flex;flex-direction:column;background:var(--color-light)}.landing-header[_ngcontent-%COMP%]{background:var(--color-white);box-shadow:0 2px 4px #0000001a;padding:1rem 2rem}.header-content[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto}.logo[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;text-decoration:none;font-size:1.5rem;font-weight:700}.logo-icon[_ngcontent-%COMP%]{font-size:2rem}.logo-text[_ngcontent-%COMP%]{color:var(--color-primary)}.logo-highlight[_ngcontent-%COMP%]{color:var(--color-secondary)}.landing-main[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;background:linear-gradient(148deg,#667eea,#764ba2)}.landing-footer[_ngcontent-%COMP%]{background:var(--color-primary);padding:1.5rem;text-align:center;color:var(--color-white)}.landing-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;opacity:.8}"]})};var A=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=m({type:t,selectors:[["app-navbar-user"]],decls:0,vars:0,template:function(e,o){},dependencies:[d],encapsulation:2})};var T=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=m({type:t,selectors:[["app-navbar-admin"]],decls:0,vars:0,template:function(e,o){},dependencies:[d],encapsulation:2})};function pe(t,n){t&1&&(l(),a(0,"polyline",3))}function de(t,n){t&1&&(l(),a(0,"polyline",4))}var L=class t{authService=p(h);isCollapsed=_(!1);toggleSidebar(){this.isCollapsed.update(n=>!n)}isAdmin(){return this.authService.isAdmin()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=m({type:t,selectors:[["app-sidebar"]],decls:67,vars:3,consts:[[1,"sidebar"],["title","Ocultar/Mostrar men\xFA",1,"toggle-btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["points","9 18 15 12 9 6"],["points","15 18 9 12 15 6"],[1,"sidebar-nav"],[1,"nav-section"],[1,"section-title"],["routerLink","/dashboard","routerLinkActive","active",1,"nav-item"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"nav-icon"],["x","3","y","3","width","7","height","7"],["x","14","y","3","width","7","height","7"],["x","14","y","14","width","7","height","7"],["x","3","y","14","width","7","height","7"],[1,"nav-text"],["routerLink","/accounts","routerLinkActive","active",1,"nav-item"],["x","3","y","3","width","18","height","18","rx","2","ry","2"],["x1","3","y1","9","x2","21","y2","9"],["x1","9","y1","21","x2","9","y2","9"],["routerLink","/transactions","routerLinkActive","active",1,"nav-item"],["points","22 12 18 12 15 21 9 3 6 12 2 12"],[1,"nav-section","nav-section-divider"],["routerLink","/accounts/paginated","routerLinkActive","active",1,"nav-item"],["x1","9","y1","3","x2","9","y2","21"],["x1","15","y1","3","x2","15","y2","21"],["routerLink","/transactions/paginated","routerLinkActive","active",1,"nav-item"],["d","M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"],["points","14 2 14 8 20 8"],["x1","12","y1","18","x2","12","y2","12"],["x1","9","y1","15","x2","15","y2","15"],[1,"nav-section","nav-section-divider","admin-section"],["routerLink","/reports","routerLinkActive","active",1,"nav-item"],["d","M3 3v18h18"],["d","M18 17V9"],["d","M13 17V5"],["d","M8 17v-3"],[1,"nav-section","nav-section-bottom"],["routerLink","/profile","routerLinkActive","active",1,"nav-item"],["d","M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"]],template:function(e,o){e&1&&(i(0,"aside",0)(1,"button",1),Z("click",function(){return o.toggleSidebar()}),l(),i(2,"svg",2),y(3,pe,1,0,":svg:polyline",3)(4,de,1,0,":svg:polyline",4),r()(),x(),i(5,"nav",5)(6,"div",6)(7,"div",7),s(8,"Principal"),r(),i(9,"a",8),l(),i(10,"svg",9),a(11,"rect",10)(12,"rect",11)(13,"rect",12)(14,"rect",13),r(),x(),i(15,"span",14),s(16,"Dashboard"),r()(),i(17,"a",15),l(),i(18,"svg",9),a(19,"rect",16)(20,"line",17)(21,"line",18),r(),x(),i(22,"span",14),s(23,"Mis Cuentas"),r()(),i(24,"a",19),l(),i(25,"svg",9),a(26,"polyline",20),r(),x(),i(27,"span",14),s(28,"Transacciones"),r()()(),i(29,"div",21)(30,"div",7),s(31,"Vistas Paginadas"),r(),i(32,"a",22),l(),i(33,"svg",9),a(34,"rect",16)(35,"line",23)(36,"line",24),r(),x(),i(37,"span",14),s(38,"Cuentas Paginado"),r()(),i(39,"a",25),l(),i(40,"svg",9),a(41,"path",26)(42,"polyline",27)(43,"line",28)(44,"line",29),r(),x(),i(45,"span",14),s(46,"Transacciones Paginado"),r()()(),i(47,"div",30)(48,"div",7),s(49,"Administraci\xF3n"),r(),i(50,"a",31),l(),i(51,"svg",9),a(52,"path",32)(53,"path",33)(54,"path",34)(55,"path",35),r(),x(),i(56,"span",14),s(57,"Reportes"),r()()(),i(58,"div",36)(59,"div",7),s(60,"Cuenta"),r(),i(61,"a",37),l(),i(62,"svg",9),a(63,"path",38)(64,"circle",39),r(),x(),i(65,"span",14),s(66,"Mi Perfil"),r()()()()()),e&2&&(S("collapsed",o.isCollapsed()),u(3),M(o.isCollapsed()?3:4))},dependencies:[d,E,oe],styles:[".sidebar[_ngcontent-%COMP%]{position:fixed;left:0;top:var(--navbar-height);height:calc(100vh - var(--navbar-height));width:var(--sidebar-width);background:var(--color-background-light);box-shadow:var(--shadow-md);transition:var(--transition-base);z-index:var(--z-index-sidebar);display:flex;flex-direction:column}.sidebar.collapsed[_ngcontent-%COMP%]{transform:translate(calc(-1 * var(--sidebar-width)))}.toggle-btn[_ngcontent-%COMP%]{position:absolute;right:-40px;top:10px;width:36px;height:36px;background:var(--color-purple);color:var(--color-text-light);border:none;border-radius:var(--border-radius-round);box-shadow:0 2px 8px #667eea4d;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:var(--transition-base);z-index:var(--z-index-fixed)}.toggle-btn[_ngcontent-%COMP%]:hover{background:var(--color-purple-dark);box-shadow:0 4px 12px #667eea80;transform:scale(1.05)}.toggle-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transition:var(--transition-base)}.sidebar-nav[_ngcontent-%COMP%]{padding:var(--spacing-md) 0;overflow-y:auto;flex:1;display:flex;flex-direction:column}.nav-section[_ngcontent-%COMP%]{display:flex;flex-direction:column}.nav-section-divider[_ngcontent-%COMP%]{padding-top:var(--spacing-md);margin-top:var(--spacing-md);border-top:2px solid var(--color-border-light)}.nav-section-bottom[_ngcontent-%COMP%]{margin-top:auto;padding-top:var(--spacing-md);border-top:2px solid var(--color-border-light)}.section-title[_ngcontent-%COMP%]{padding:.75rem var(--spacing-lg) var(--spacing-sm) var(--spacing-lg);font-size:var(--font-size-xs);font-weight:var(--font-weight-bold);text-transform:uppercase;letter-spacing:.5px;color:var(--color-text-muted)}.nav-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-md);padding:var(--spacing-md) var(--spacing-lg);color:var(--color-text-secondary);text-decoration:none;transition:var(--transition-base);position:relative}.nav-item[_ngcontent-%COMP%]:hover{background:var(--color-background);color:var(--color-purple)}.nav-item.active[_ngcontent-%COMP%]{background:linear-gradient(90deg,rgba(102,126,234,.1) 0%,transparent 100%);color:var(--color-purple);border-left:3px solid var(--color-purple)}.nav-item.active[_ngcontent-%COMP%]   .nav-icon[_ngcontent-%COMP%]{color:var(--color-purple)}.nav-icon[_ngcontent-%COMP%]{width:24px;height:24px;flex-shrink:0}.nav-text[_ngcontent-%COMP%]{font-size:.95rem;font-weight:var(--font-weight-medium);white-space:nowrap}.admin-section[_ngcontent-%COMP%]{border-top:2px solid var(--color-warning);background:linear-gradient(180deg,rgba(255,193,7,.05) 0%,transparent 100%)}.admin-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{color:var(--color-warning);font-weight:var(--font-weight-bold)}.admin-section[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{border-left:3px solid transparent}.admin-section[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]:hover{background:#ffc1071a;color:var(--color-warning);border-left:3px solid var(--color-warning)}.admin-section[_ngcontent-%COMP%]   .nav-item.active[_ngcontent-%COMP%]{background:linear-gradient(90deg,rgba(255,193,7,.15) 0%,transparent 100%);color:var(--color-warning);border-left:3px solid var(--color-warning)}.admin-section[_ngcontent-%COMP%]   .nav-item.active[_ngcontent-%COMP%]   .nav-icon[_ngcontent-%COMP%]{color:var(--color-warning)}@media (max-width: 768px){.sidebar[_ngcontent-%COMP%]{top:60px;height:calc(100vh - 60px)}.toggle-btn[_ngcontent-%COMP%]{right:-38px}}"]})};var N=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=m({type:t,selectors:[["app-footer"]],decls:0,vars:0,template:function(e,o){},dependencies:[d],encapsulation:2})};function ge(t,n){t&1&&a(0,"app-navbar-admin")}function fe(t,n){t&1&&a(0,"app-navbar-user")}var D=class t{authService=p(h);isAdmin=X(()=>this.authService.currentUser()?.role==="ROLE_ADMIN");static \u0275fac=function(e){return new(e||t)};static \u0275cmp=m({type:t,selectors:[["app-auth-layout"]],decls:8,vars:3,consts:[[1,"auth-layout"],[1,"content-wrapper"],[1,"auth-main"]],template:function(e,o){e&1&&(i(0,"div",0),y(1,ge,1,0,"app-navbar-admin")(2,fe,1,0,"app-navbar-user"),a(3,"app-sidebar"),i(4,"div",1)(5,"main",2),a(6,"router-outlet"),r(),a(7,"app-footer"),r()()),e&2&&(u(),M(o.isAdmin()?1:2),u(3),S("sidebar-open",!0))},dependencies:[d,P,A,T,L,N],styles:[".auth-layout[_ngcontent-%COMP%]{min-height:100vh;display:flex;flex-direction:column;position:relative}.content-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:calc(100vh - 64px);margin-top:64px;margin-left:0;transition:margin-left .3s ease}.content-wrapper.sidebar-open[_ngcontent-%COMP%]{margin-left:260px}.auth-main[_ngcontent-%COMP%]{flex:1;padding:2rem;background:#f8f9fa;min-height:calc(100vh - 124px)}@media (max-width: 768px){.content-wrapper[_ngcontent-%COMP%]{margin-top:60px;min-height:calc(100vh - 60px)}.content-wrapper.sidebar-open[_ngcontent-%COMP%]{margin-left:0}.auth-main[_ngcontent-%COMP%]{min-height:calc(100vh - 120px)}}"]})};var ae=[{path:"",loadChildren:()=>import("./chunk-ETULTZWS.js").then(t=>t.HOME_ROUTES)},{path:"",component:k,children:[{path:"",loadChildren:()=>import("./chunk-JWSJI54S.js").then(t=>t.AUTH_ROUTES)}]},{path:"",component:D,canActivate:[re],children:[{path:"dashboard",loadChildren:()=>import("./chunk-AZ2OFE3Q.js").then(t=>t.DASHBOARD_ROUTES)}]},{path:"**",redirectTo:""}];var se=(t,n)=>{if(p(h).getToken()){let c=t.clone({setHeaders:{Authorization:"Bearer token"}});return n(c)}return n(t)};var ce=(t,n)=>{let e=p(O),o=p(h);return n(t).pipe(G(c=>{let g="Ocurri\xF3 un error";return c.error instanceof ErrorEvent?g=`Error: ${c.error.message}`:(g=`Error ${c.status}: ${c.error?.message||c.message}`,c.status===401&&(o.logout(),e.navigate(["/login"])),c.status===403&&e.navigate(["/"])),console.error(g),R(()=>new Error(g))}))};var le={providers:[B(),W(),ie(ae),te(ne([se,ce]))]};var F=class t{notifications=_([]);nextId=0;notifications$=this.notifications.asReadonly();success(n,e,o=5e3){this.show("success",n,e,o)}error(n,e,o=7e3){this.show("error",n,e,o)}warning(n,e,o=6e3){this.show("warning",n,e,o)}info(n,e,o=5e3){this.show("info",n,e,o)}showHttpError(n,e){let o=e;e&&e.toLowerCase().includes("access denied")&&(o="No tienes los permisos necesarios para acceder a este recurso. Por favor, verifica que tu cuenta tenga los privilegios correctos.");let g={400:{title:"Solicitud incorrecta",message:o||"Los datos enviados no son v\xE1lidos. Por favor, verifica la informaci\xF3n."},401:{title:"No autorizado",message:"Tu sesi\xF3n ha expirado. Por favor, inicia sesi\xF3n nuevamente."},403:{title:"Acceso denegado",message:o||"No tienes permisos para realizar esta acci\xF3n."},404:{title:"No encontrado",message:o||"El recurso solicitado no existe."},409:{title:"Conflicto",message:o||"Ya existe un registro con estos datos."},500:{title:"Acceso restringido",message:o.toLowerCase().includes("access denied")?o:"Ocurri\xF3 un problema en el servidor. Por favor, intenta de nuevo m\xE1s tarde."},503:{title:"Servicio no disponible",message:"El servicio no est\xE1 disponible en este momento. Por favor, intenta m\xE1s tarde."}}[n]||{title:"Error",message:"Ocurri\xF3 un error inesperado. Por favor, intenta de nuevo."};this.error(g.title,g.message)}remove(n){this.notifications.update(e=>e.filter(o=>o.id!==n))}clear(){this.notifications.set([])}show(n,e,o,c){let g={id:this.nextId++,type:n,title:e,message:o,duration:c};this.notifications.update(me=>[...me,g]),c>0&&setTimeout(()=>{this.remove(g.id)},c)}static \u0275fac=function(e){return new(e||t)};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})};var ue=(t,n)=>n.id;function ve(t,n){t&1&&(l(),f(0,"svg",4),w(1,"path",12)(2,"polyline",13),v())}function he(t,n){t&1&&(l(),f(0,"svg",4),w(1,"circle",14)(2,"line",15)(3,"line",16),v())}function xe(t,n){t&1&&(l(),f(0,"svg",4),w(1,"path",17)(2,"line",18)(3,"line",19),v())}function Ce(t,n){t&1&&(l(),f(0,"svg",4),w(1,"circle",14)(2,"line",20)(3,"line",21),v())}function be(t,n){if(t&1){let e=Y();f(0,"div",2)(1,"div",3),y(2,ve,3,0,":svg:svg",4)(3,he,4,0,":svg:svg",4)(4,xe,4,0,":svg:svg",4)(5,Ce,4,0,":svg:svg",4),v(),f(6,"div",5)(7,"div",6),s(8),v(),f(9,"div",7),s(10),v()(),f(11,"button",8),J("click",function(){let c=j(e).$implicit,g=K();return U(g.close(c.id))}),l(),f(12,"svg",9),w(13,"line",10)(14,"line",11),v()()()}if(t&2){let e,o=n.$implicit;Q("toast-"+o.type),u(2),M((e=o.type)==="success"?2:e==="error"?3:e==="warning"?4:e==="info"?5:-1),u(6),H(o.title),u(2),H(o.message)}}var I=class t{notificationService=p(F);close(n){this.notificationService.remove(n)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=m({type:t,selectors:[["app-toast"]],decls:3,vars:0,consts:[[1,"toast-container"],[1,"toast",3,"class"],[1,"toast"],[1,"toast-icon"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],[1,"toast-content"],[1,"toast-title"],[1,"toast-message"],["aria-label","Cerrar",1,"toast-close",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["x1","18","y1","6","x2","6","y2","18"],["x1","6","y1","6","x2","18","y2","18"],["d","M22 11.08V12a10 10 0 1 1-5.93-9.14"],["points","22 4 12 14.01 9 11.01"],["cx","12","cy","12","r","10"],["x1","15","y1","9","x2","9","y2","15"],["x1","9","y1","9","x2","15","y2","15"],["d","M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"],["x1","12","y1","9","x2","12","y2","13"],["x1","12","y1","17","x2","12.01","y2","17"],["x1","12","y1","16","x2","12","y2","12"],["x1","12","y1","8","x2","12.01","y2","8"]],template:function(e,o){e&1&&(f(0,"div",0),$(1,be,15,5,"div",1,ue),v()),e&2&&(u(),q(o.notificationService.notifications$()))},dependencies:[d],styles:[".toast-container[_ngcontent-%COMP%]{position:fixed;top:80px;right:20px;z-index:9999;display:flex;flex-direction:column;gap:12px;max-width:400px}.toast[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:12px;padding:16px;background:#fff;border-radius:8px;box-shadow:0 4px 12px #00000026;animation:_ngcontent-%COMP%_slideIn .3s ease-out;border-left:4px solid}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translate(100%);opacity:0}to{transform:translate(0);opacity:1}}.toast-success[_ngcontent-%COMP%]{border-left-color:#28a745}.toast-error[_ngcontent-%COMP%]{border-left-color:#dc3545}.toast-warning[_ngcontent-%COMP%]{border-left-color:#ffc107}.toast-info[_ngcontent-%COMP%]{border-left-color:#17a2b8}.toast-icon[_ngcontent-%COMP%]{flex-shrink:0;width:24px;height:24px}.toast-success[_ngcontent-%COMP%]   .toast-icon[_ngcontent-%COMP%]{color:#28a745}.toast-error[_ngcontent-%COMP%]   .toast-icon[_ngcontent-%COMP%]{color:#dc3545}.toast-warning[_ngcontent-%COMP%]   .toast-icon[_ngcontent-%COMP%]{color:#ffc107}.toast-info[_ngcontent-%COMP%]   .toast-icon[_ngcontent-%COMP%]{color:#17a2b8}.toast-content[_ngcontent-%COMP%]{flex:1;min-width:0}.toast-title[_ngcontent-%COMP%]{font-weight:600;font-size:.95rem;color:#333;margin-bottom:4px}.toast-message[_ngcontent-%COMP%]{font-size:.875rem;color:#666;line-height:1.4}.toast-close[_ngcontent-%COMP%]{flex-shrink:0;width:24px;height:24px;padding:0;background:none;border:none;color:#999;cursor:pointer;transition:color .2s;display:flex;align-items:center;justify-content:center}.toast-close[_ngcontent-%COMP%]:hover{color:#333}@media (max-width: 480px){.toast-container[_ngcontent-%COMP%]{left:10px;right:10px;top:70px;max-width:none}}"]})};var V=class t{title=_("nutritrack-webapp");static \u0275fac=function(e){return new(e||t)};static \u0275cmp=m({type:t,selectors:[["app-root"]],decls:2,vars:0,template:function(e,o){e&1&&a(0,"router-outlet")(1,"app-toast")},dependencies:[P,I],encapsulation:2})};ee(V,le).catch(t=>console.error(t));
